$(document).ready(function(){function e(){u(),t("player_loop",y.videoID_loop,!0),t("player",y.videoID_online,!1)}function a(e){s(!1),y.menuTimeout&&clearTimeout(y.menuTimeout),y.menuTimeout=setTimeout(function(){y.nowpage=e.attr("data-num"),g(),$.address.value("/page"+y.nowpage)},y.fadespeed)}function o(){y.player_loop.pauseVideo(),y.player.playVideo(),$("#player_loop").fadeOut(y.fadespeed),$(".player_ctrl").fadeIn(y.fadespeed),$("#player").fadeIn(y.fadespeed)}function t(e,a,o){var t,p=0;y.mobile&&(p=1,o=!1),t=new YT.Player(e,{height:"100%",width:"100%",videoId:a,playerVars:{controls:p,autoplay:o,enablejsapi:"0",hd:"1",rel:"0",showinfo:"0",modestbranding:"1",cc_load_policy:"1",wmode:"transparent"},events:{onReady:l,onStateChange:n}}),"player_loop"==e?y.player_loop=t:"player"==e&&(y.player=t)}function l(e){"player_loop"==e.target.a.id&&y.player_loop.mute(),y.videohasready+=1,y.videohasready>=2&&(s(!1),setTimeout(function(){f(!1)},y.fadespeed))}function n(e){y.mobile&&(1==y.player.getPlayerState()?$(".player_ctrl").addClass("on").fadeOut(y.fadespeed):$(".player_ctrl").removeClass("on").fadeIn(y.fadespeed)),e.data==YT.PlayerState.ENDED&&("player_loop"==e.target.a.id?y.player_loop.playVideo():"player"==e.target.a.id&&(y.hasWatchvideo=!0,$(".player_ctrl").addClass("on"),p())),1==y.player.getPlayerState()&&($(".play_btn").hasClass("off")||$(".play_btn").addClass("off").fadeOut(y.fadespeed))}function p(){y.nowpage+=1,g(),$.address.value("/page"+y.nowpage)}function d(){function e(){t+=1,t>o-1&&(t=0),l!=-1?(a.eq(l).fadeOut(y.fadespeed),a.eq(t).fadeIn(y.fadespeed)):a.eq(t).fadeIn(y.fadespeed),l=t,setTimeout(function(){e()},5e3)}var a=$(this).find("li"),o=a.length,t=-1,l=-1;e()}function s(e){e?($(".menudom").addClass("on"),$(".menu").fadeIn(y.fadespeed)):($(".menudom").removeClass("on"),$(".menu").fadeOut(y.fadespeed))}function i(){var e=$.address.value();switch(e){case"/":y.nowpage=1;break;case"/page1":y.nowpage=1;break;case"/page2":y.nowpage=2;break;case"/page3":y.nowpage=3;break;case"/page4":y.nowpage=4;break;case"/page5":y.nowpage=5;break;case"/page6":y.nowpage=6;break;case"/page7":y.nowpage=7;break;default:y.nowpage=1}c(),$(".page_box").attr("class","page_box pg"+y.nowpage),y.mobile&&$("html,body").animate({scrollTop:$(".page"+y.nowpage).offset().top},y.fadespeed)}function r(e){y.mobile||(e.preventDefault(),y.canwheel&&(y.canwheel=!1,setTimeout(function(){y.canwheel=!0},y.fadespeed),e.wheelDelta>0?y.nowpage-=1:y.nowpage+=1,g(),$.address.value("/page"+y.nowpage)))}function g(){y.nowpage<1?y.nowpage=1:y.nowpage>=$(".page_box .page").length&&(y.nowpage=$(".page_box .page").length);var e=!0;y.nowpage==$(".page_box .page").length?e=!1:y.hasWatchvideo||y.mobile||y.nowpage>=3&&(3!=y.nowpage&&alert(y.warningtxt),y.nowpage=3,e=!1),e?$(".scroll_btn").hasClass("on")||$(".scroll_btn").addClass("on").fadeIn(y.fadespeed):$(".scroll_btn").removeClass("on").fadeOut(y.fadespeed)}function c(){if(2==y.nowpage?y.page2Timeout=setTimeout(function(){$(".person_all").addClass("on")},y.fadespeed):(clearTimeout(y.page2Timeout),$(".person_all").removeClass("on")),5==y.nowpage?y.page5Timeout=setTimeout(function(){$(".icon_all").addClass("on")},y.fadespeed):(clearTimeout(y.page5Timeout),$(".icon_all").removeClass("on")),$(".play_btn").hasClass("off"))if(3!=y.nowpage)try{1==y.player.getPlayerState()&&$(".player_ctrl").trigger("click")}catch(e){}else try{5!=y.player.getPlayerState()&&1!=y.player.getPlayerState()&&$(".player_ctrl").trigger("click")}catch(e){}}function f(e){e?$(".loading").fadeIn(y.fadespeed):$(".loading").fadeOut(y.fadespeed)}function u(){if(device.mobile()?y.mobile=!0:$(window).width()<=1024?y.mobile=!0:y.mobile=!1,y.mobile){$(".page_box .page1").css("height",$(window).height()),$(".page_box .page3").css("height",$(window).height());try{1==y.player_loop.getPlayerState()&&y.player_loop.pauseVideo(),1==y.player.getPlayerState()?$(".player_ctrl").addClass("on"):$(".player_ctrl").removeClass("on")}catch(e){}}else{$(".page_box .page1").attr("style",""),$(".page_box .page3").attr("style","");try{$(".play_btn").hasClass("off")?(y.player_loop.pauseVideo(),$("#player_loop").fadeOut(y.fadespeed),$(".play_btn").fadeOut(y.fadespeed)):y.player_loop.playVideo(),1==y.player.getPlayerState()?($("#player_loop").fadeOut(y.fadespeed),$(".player_ctrl").removeClass("on").fadeIn(y.fadespeed)):$(".play_btn").hasClass("off")?$(".player_ctrl").addClass("on").fadeIn(y.fadespeed):$(".player_ctrl").removeClass("on").fadeOut(y.fadespeed)}catch(e){}g()}if(y.mobile)y.videoW=$(".page_box .page3").width(),y.videoH=$(".page_box .page3").height();else{var a=$(".page_box .page3").width()/$(".page_box .page3").height(),o=640/360;a>o?(y.videoW=$(".page_box .page3").width(),y.videoH=$(".page_box .page3").width()/o):a<o?(y.videoH=$(".page_box .page3").height(),y.videoW=y.videoH*o):a==o&&(y.videoW=$(".page_box .page3").width(),y.videoH=$(".page_box .page3").height())}$(".video").css({width:y.videoW,height:y.videoH})}var y={wrp:$(".wrapper"),fadespeed:500,canwheel:!0,hasWatchvideo:!1,videohasready:0,videoW:$(window).width(),videoH:$(window).height(),warningtxt:"請先欣賞完景點影片，即可往下繼續瀏覽。",videoID_loop:"722u9ZmgVtE",videoID_online:"eCiRnxgyLRk",nowpage:1};$(window).on("touchstart",function(){y.mobile&&($(".scroll_btn").hasClass("inMb")||$(".scroll_btn").addClass("inMb").fadeOut(y.fadespeed))}),$(".menua").click(function(){a($(this))}),$(".player_ctrl").click(function(){$(this).hasClass("on")?($(this).removeClass("on"),y.player.playVideo()):($(this).addClass("on"),y.player.pauseVideo())}),$(".play_btn").click(function(){o()}),$(".scroll_btn").click(function(){p()}),$(".page1 .bg").each(d),$(".menubtn").click(function(){s($(this).hasClass("on")?!1:!0)}),$.address.change(i),window.onmousewheel=function(e){r(e)},$(window).resize(u),$(window).load(e)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIndpbmRvd2xvYWQiLCJjaGVja21vYmlsZSIsImNyZWF0ZVZpZGVvIiwib2JqIiwidmlkZW9JRF9sb29wIiwidmlkZW9JRF9vbmxpbmUiLCJtZW51YUNsaWNrIiwiX28iLCJzaG93TWVudSIsIm1lbnVUaW1lb3V0IiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsIm5vd3BhZ2UiLCJhdHRyIiwiY2hlY2tub3dwYWdlc2Nyb2xsIiwiYWRkcmVzcyIsInZhbHVlIiwiZmFkZXNwZWVkIiwic3RhcnRWaWRlbyIsInBsYXllcl9sb29wIiwicGF1c2VWaWRlbyIsInBsYXllciIsInBsYXlWaWRlbyIsImZhZGVPdXQiLCJmYWRlSW4iLCJfaWQiLCJfYXV0b3BsYXkiLCJfb2JqIiwiX2NvbiIsIm1vYmlsZSIsIllUIiwiUGxheWVyIiwiaGVpZ2h0Iiwid2lkdGgiLCJ2aWRlb0lkIiwicGxheWVyVmFycyIsImNvbnRyb2xzIiwiYXV0b3BsYXkiLCJlbmFibGVqc2FwaSIsImhkIiwicmVsIiwic2hvd2luZm8iLCJtb2Rlc3RicmFuZGluZyIsImNjX2xvYWRfcG9saWN5Iiwid21vZGUiLCJldmVudHMiLCJvblJlYWR5IiwidmlkZW9SZWFkeSIsIm9uU3RhdGVDaGFuZ2UiLCJvblBsYXllclN0YXRlQ2hhbmdlIiwiZXZlbnQiLCJ0YXJnZXQiLCJhIiwiaWQiLCJtdXRlIiwidmlkZW9oYXNyZWFkeSIsInNob3dMb2FkaW5nIiwiZ2V0UGxheWVyU3RhdGUiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiZGF0YSIsIlBsYXllclN0YXRlIiwiRU5ERUQiLCJoYXNXYXRjaHZpZGVvIiwic2Nyb2xsX2J0bmNsaWNrIiwiaGFzQ2xhc3MiLCJiYW5uZXJmYyIsImNoYW5nZSIsIl9ub3ciLCJfbGVuZ3RoIiwiX3ByZSIsIl9saSIsImVxIiwidGhpcyIsImZpbmQiLCJsZW5ndGgiLCJfdCIsImFkZHJDaGFuZ2UiLCJjaGVja25vd3BhZ2UiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwidG9wIiwib25tb3VzZXdoZWVsZmMiLCJlIiwicHJldmVudERlZmF1bHQiLCJjYW53aGVlbCIsIndoZWVsRGVsdGEiLCJfY2Fuc2hvdyIsImFsZXJ0Iiwid2FybmluZ3R4dCIsInBhZ2UyVGltZW91dCIsInBhZ2U1VGltZW91dCIsInRyaWdnZXIiLCJlcnIiLCJkZXZpY2UiLCJ3aW5kb3ciLCJjc3MiLCJ2aWRlb1ciLCJ2aWRlb0giLCJfdyIsIl92Iiwid3JwIiwib24iLCJjbGljayIsImVhY2giLCJvbm1vdXNld2hlZWwiLCJyZXNpemUiLCJsb2FkIl0sIm1hcHBpbmdzIjoiQUFBQUEsRUFBRUMsVUFBVUMsTUFBTSxXQTZDakIsUUFBU0MsS0FDUkMsSUFDQUMsRUFBWSxjQUFjQyxFQUFJQyxjQUFhLEdBQzNDRixFQUFZLFNBQVNDLEVBQUlFLGdCQUFlLEdBSXpDLFFBQVNDLEdBQVdDLEdBQ25CQyxHQUFTLEdBQ05MLEVBQUlNLGFBQWFDLGFBQWFQLEVBQUlNLGFBQ3JDTixFQUFJTSxZQUFjRSxXQUFXLFdBQzVCUixFQUFJUyxRQUFVTCxFQUFHTSxLQUFLLFlBQ3RCQyxJQUNBakIsRUFBRWtCLFFBQVFDLE1BQU0sUUFBUWIsRUFBSVMsVUFDM0JULEVBQUljLFdBRVAsUUFBU0MsS0FDUmYsRUFBSWdCLFlBQVlDLGFBQ2hCakIsRUFBSWtCLE9BQU9DLFlBQ1h6QixFQUFFLGdCQUFnQjBCLFFBQVFwQixFQUFJYyxXQUM5QnBCLEVBQUUsZ0JBQWdCMkIsT0FBT3JCLEVBQUljLFdBQzdCcEIsRUFBRSxXQUFXMkIsT0FBT3JCLEVBQUljLFdBRXpCLFFBQVNmLEdBQVlLLEVBQUdrQixFQUFJQyxHQUMzQixHQUFJQyxHQUNBQyxFQUFPLENBQ1J6QixHQUFJMEIsU0FDTkQsRUFBTyxFQUNQRixHQUFVLEdBRUxDLEVBQU8sR0FBSUcsSUFBR0MsT0FBT3hCLEdBQ25CeUIsT0FBUSxPQUNSQyxNQUFPLE9BQ1BDLFFBQVNU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Q2ZPLFFBQVMsRUFLVmYsR0FBRW1HLFFBQVFPLEdBQUcsYUFBYSxXQUN0QnBHLEVBQUkwQixTQUNBaEMsRUFBRSxlQUFlb0UsU0FBUyxTQUFTcEUsRUFBRSxlQUFlNkQsU0FBUyxRQUFRbkMsUUFBUXBCLEVBQUljLGNBR3pGcEIsRUFBRSxVQUFVMkcsTUFBTSxXQUFXbEcsRUFBV1QsRUFBRTRFLFNBQzFDNUUsRUFBRSxnQkFBZ0IyRyxNQUFNLFdBQ3BCM0csRUFBRTRFLE1BQU1SLFNBQVMsT0FDbkJwRSxFQUFFNEUsTUFBTWQsWUFBWSxNQUNwQnhELEVBQUlrQixPQUFPQyxjQUdYekIsRUFBRTRFLE1BQU1mLFNBQVMsTUFDakJ2RCxFQUFJa0IsT0FBT0QsZ0JBR2J2QixFQUFFLGFBQWEyRyxNQUFNLFdBQVd0RixNQUNoQ3JCLEVBQUUsZUFBZTJHLE1BQU0sV0FBV3hDLE1BQ2xDbkUsRUFBRSxjQUFjNEcsS0FBS3ZDLEdBQ3JCckUsRUFBRSxZQUFZMkcsTUFBTSxXQUNPaEcsRUFBdkJYLEVBQUU0RSxNQUFNUixTQUFTLE9BQWUsR0FDckIsS0FFZnBFLEVBQUVrQixRQUFRb0QsT0FBT1UsR0FDakJtQixPQUFPVSxhQUFjLFNBQVN0QixHQUFHRCxFQUFlQyxJQUNoRHZGLEVBQUVtRyxRQUFRVyxPQUFPMUcsR0FDakJKLEVBQUVtRyxRQUFRWSxLQUFLNUciLCJmaWxlIjoiY29tbW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcclxuXHQvL0luaXRcclxuXHR2YXIgb2JqID17XHJcblx0XHR3cnA6ICQoJy53cmFwcGVyJyksXHJcblx0XHRmYWRlc3BlZWQ6IDUwMCxcclxuXHRcdGNhbndoZWVsOiB0cnVlLFxyXG5cdFx0aGFzV2F0Y2h2aWRlbzogZmFsc2UsXHJcblx0XHR2aWRlb2hhc3JlYWR5OiAwLFxyXG5cdFx0dmlkZW9XOiAkKHdpbmRvdykud2lkdGgoKSxcclxuXHRcdHZpZGVvSDogJCh3aW5kb3cpLmhlaWdodCgpLFxyXG5cdFx0d2FybmluZ3R4dDogJ+iri+WFiOaso+iznuWujOaZr+m7nuW9seeJh++8jOWNs+WPr+W+gOS4i+e5vOe6jOeAj+imveOAgicsXHJcblx0XHR2aWRlb0lEX2xvb3A6JzcyMnU5Wm1nVnRFJyxcclxuXHRcdHZpZGVvSURfb25saW5lOidlQ2lSbnhneUxSaycsXHJcblx0XHRub3dwYWdlOiAxXHJcblx0fTtcclxuXHRcclxuXHJcblx0Ly9BZGRMaXN0ZW5lclxyXG5cdCQod2luZG93KS5vbihcInRvdWNoc3RhcnRcIixmdW5jdGlvbigpe1xyXG5cdFx0aWYob2JqLm1vYmlsZSl7XHJcbiAgXHRcdFx0aWYoISQoJy5zY3JvbGxfYnRuJykuaGFzQ2xhc3MoJ2luTWInKSkgJCgnLnNjcm9sbF9idG4nKS5hZGRDbGFzcygnaW5NYicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcbiAgXHRcdH1cclxuXHR9KTtcclxuXHQkKCcubWVudWEnKS5jbGljayhmdW5jdGlvbigpe21lbnVhQ2xpY2soJCh0aGlzKSk7fSk7XHJcblx0JCgnLnBsYXllcl9jdHJsJykuY2xpY2soZnVuY3Rpb24oKXtcclxuXHRcdGlmKCQodGhpcykuaGFzQ2xhc3MoJ29uJykpe1xyXG5cdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG5cdFx0XHRvYmoucGxheWVyLnBsYXlWaWRlbygpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZXtcclxuXHRcdFx0JCh0aGlzKS5hZGRDbGFzcygnb24nKTtcclxuXHRcdFx0b2JqLnBsYXllci5wYXVzZVZpZGVvKCk7XHRcclxuXHRcdH1cclxuXHR9KVxyXG5cdCQoJy5wbGF5X2J0bicpLmNsaWNrKGZ1bmN0aW9uKCl7c3RhcnRWaWRlbygpO30pO1xyXG5cdCQoJy5zY3JvbGxfYnRuJykuY2xpY2soZnVuY3Rpb24oKXtzY3JvbGxfYnRuY2xpY2soKTt9KTtcclxuXHQkKCcucGFnZTEgLmJnJykuZWFjaChiYW5uZXJmYyk7XHJcblx0JCgnLm1lbnVidG4nKS5jbGljayhmdW5jdGlvbigpe1xyXG5cdFx0aWYoJCh0aGlzKS5oYXNDbGFzcygnb24nKSlzaG93TWVudShmYWxzZSk7XHJcblx0XHRlbHNlIHNob3dNZW51KHRydWUpO1xyXG5cdH0pO1xyXG5cdCQuYWRkcmVzcy5jaGFuZ2UoYWRkckNoYW5nZSk7XHJcblx0d2luZG93Lm9ubW91c2V3aGVlbD0gZnVuY3Rpb24oZSl7b25tb3VzZXdoZWVsZmMoZSk7fVxyXG5cdCQod2luZG93KS5yZXNpemUoY2hlY2ttb2JpbGUpO1xyXG5cdCQod2luZG93KS5sb2FkKHdpbmRvd2xvYWQpO1xyXG5cdGZ1bmN0aW9uIHdpbmRvd2xvYWQoKXtcclxuXHRcdGNoZWNrbW9iaWxlKCk7XHJcblx0XHRjcmVhdGVWaWRlbygncGxheWVyX2xvb3AnLG9iai52aWRlb0lEX2xvb3AsdHJ1ZSk7XHJcblx0XHRjcmVhdGVWaWRlbygncGxheWVyJyxvYmoudmlkZW9JRF9vbmxpbmUsZmFsc2UpO1x0XHRcclxuXHR9XHJcblxyXG5cdC8vRXZlbnRcclxuXHRmdW5jdGlvbiBtZW51YUNsaWNrKF9vKXtcclxuXHRcdHNob3dNZW51KGZhbHNlKTtcclxuXHRcdGlmKG9iai5tZW51VGltZW91dCkgY2xlYXJUaW1lb3V0KG9iai5tZW51VGltZW91dCk7XHJcblx0XHRvYmoubWVudVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0XHRcdG9iai5ub3dwYWdlID0gX28uYXR0cignZGF0YS1udW0nKTtcclxuXHRcdFx0Y2hlY2tub3dwYWdlc2Nyb2xsKCk7XHJcblx0XHRcdCQuYWRkcmVzcy52YWx1ZShcIi9wYWdlXCIrb2JqLm5vd3BhZ2UpO1xyXG5cdFx0fSxvYmouZmFkZXNwZWVkKTtcdFx0XHJcblx0fVxyXG5cdGZ1bmN0aW9uIHN0YXJ0VmlkZW8oKXtcdFx0XHJcblx0XHRvYmoucGxheWVyX2xvb3AucGF1c2VWaWRlbygpO1xyXG5cdFx0b2JqLnBsYXllci5wbGF5VmlkZW8oKTtcdFx0XHJcblx0XHQkKCcjcGxheWVyX2xvb3AnKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0JCgnLnBsYXllcl9jdHJsJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0JCgnI3BsYXllcicpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuXHR9XHJcblx0ZnVuY3Rpb24gY3JlYXRlVmlkZW8oX28sX2lkLF9hdXRvcGxheSl7XHJcblx0XHR2YXIgX29iajtcdFx0XHJcblx0XHR2YXIgX2NvbiA9IDA7XHJcblx0XHRpZihvYmoubW9iaWxlKXtcclxuXHRcdFx0X2NvbiA9IDE7XHJcblx0XHRcdF9hdXRvcGxheT1mYWxzZTtcclxuXHRcdH1cclxuICAgICAgICBfb2JqID0gbmV3IFlULlBsYXllcihfbywge1xyXG4gICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXHJcbiAgICAgICAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAgICAgICAgdmlkZW9JZDogX2lkLFxyXG4gICAgICAgICAgcGxheWVyVmFyczp7XHJcbiAgICAgICAgICAgICdjb250cm9scyc6X2NvbixcclxuICAgICAgICAgICAgJ2F1dG9wbGF5JzpfYXV0b3BsYXksXHJcbiAgICAgICAgICAgICdlbmFibGVqc2FwaSc6JzAnLFxyXG4gICAgICAgICAgICAnaGQnOicxJyxcclxuICAgICAgICAgICAgJ3JlbCc6JzAnLFxyXG4gICAgICAgICAgICAnc2hvd2luZm8nOicwJyxcclxuICAgICAgICAgICAgJ21vZGVzdGJyYW5kaW5nJzonMScsXHJcbiAgICAgICAgICAgICdjY19sb2FkX3BvbGljeSc6JzEnLFxyXG4gICAgICAgICAgICAnd21vZGUnOid0cmFuc3BhcmVudCcgICAgICBcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBldmVudHM6IHtcclxuXHQgICAgICAgICdvblJlYWR5JzogdmlkZW9SZWFkeSxcclxuXHQgICAgICAgICdvblN0YXRlQ2hhbmdlJzogb25QbGF5ZXJTdGF0ZUNoYW5nZVxyXG5cdCAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZihfbyA9PSAncGxheWVyX2xvb3AnKSAgb2JqLnBsYXllcl9sb29wID0gX29iajtcclxuXHRcdGVsc2UgaWYoX28gPT0gJ3BsYXllcicpIG9iai5wbGF5ZXIgPSBfb2JqO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdmlkZW9SZWFkeShldmVudCl7XHJcbiAgICBcdGlmKGV2ZW50LnRhcmdldC5hLmlkID09ICdwbGF5ZXJfbG9vcCcpIG9iai5wbGF5ZXJfbG9vcC5tdXRlKCk7XHJcbiAgICBcdG9iai52aWRlb2hhc3JlYWR5Kz0xO1xyXG4gICAgXHRpZihvYmoudmlkZW9oYXNyZWFkeSA+PTIpe1xyXG4gICAgXHRcdHNob3dNZW51KGZhbHNlKTtcclxuICAgIFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICBcdFx0XHRzaG93TG9hZGluZyhmYWxzZSk7XHJcbiAgICBcdFx0fSxvYmouZmFkZXNwZWVkKTsgICAgXHRcdFxyXG4gICAgXHR9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBvblBsYXllclN0YXRlQ2hhbmdlKGV2ZW50KXtcclxuICAgIFx0aWYob2JqLm1vYmlsZSl7XHJcbiAgICBcdFx0aWYob2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpID09MSl7XHJcbiAgICBcdFx0XHQkKCcucGxheWVyX2N0cmwnKS5hZGRDbGFzcygnb24nKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG4gICAgXHRcdH1lbHNlICQoJy5wbGF5ZXJfY3RybCcpLnJlbW92ZUNsYXNzKCdvbicpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuICAgIFx0fVxyXG4gICAgXHRpZihldmVudC5kYXRhID09IFlULlBsYXllclN0YXRlLkVOREVEKXtcclxuICAgIFx0XHRpZihldmVudC50YXJnZXQuYS5pZCA9PSAncGxheWVyX2xvb3AnKSBvYmoucGxheWVyX2xvb3AucGxheVZpZGVvKCk7XHJcbiAgICBcdFx0ZWxzZSBpZihldmVudC50YXJnZXQuYS5pZCA9PSAncGxheWVyJyl7XHJcbiAgICBcdFx0XHRvYmouaGFzV2F0Y2h2aWRlbyA9IHRydWU7XHJcbiAgICBcdFx0XHQkKCcucGxheWVyX2N0cmwnKS5hZGRDbGFzcygnb24nKTtcclxuICAgIFx0XHRcdHNjcm9sbF9idG5jbGljaygpO1xyXG4gICAgXHRcdH0gICAgXHRcdFxyXG4gICAgXHR9XHJcbiAgICBcdGlmKG9iai5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSA9PTEpe1xyXG4gICAgXHRcdGlmKCEkKCcucGxheV9idG4nKS5oYXNDbGFzcygnb2ZmJykpICQoJy5wbGF5X2J0bicpLmFkZENsYXNzKCdvZmYnKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpOyAgICBcdFx0XHJcbiAgICBcdH1cclxuICAgIFx0XHJcbiAgICB9XHJcblx0ZnVuY3Rpb24gc2Nyb2xsX2J0bmNsaWNrKCl7XHJcblx0XHRvYmoubm93cGFnZSs9MTtcclxuXHRcdGNoZWNrbm93cGFnZXNjcm9sbCgpO1xyXG5cdFx0JC5hZGRyZXNzLnZhbHVlKFwiL3BhZ2VcIitvYmoubm93cGFnZSk7XHJcblx0fVx0XHJcblx0ZnVuY3Rpb24gYmFubmVyZmMoKXtcclxuXHRcdHZhciBfbGkgPSAkKHRoaXMpLmZpbmQoJ2xpJyksXHJcblx0XHRcdF9sZW5ndGggPSBfbGkubGVuZ3RoLFxyXG5cdFx0XHRfbm93ID0gLTEsX3ByZSA9IC0xO1xyXG5cclxuXHRcdGNoYW5nZSgpO1xyXG5cdFx0ZnVuY3Rpb24gY2hhbmdlKCl7XHJcblx0XHRcdF9ub3crPTE7XHJcblx0XHRcdGlmKF9ub3c+X2xlbmd0aC0xKV9ub3c9MDtcclxuXHRcdFx0aWYoX3ByZSE9LTEpe1xyXG5cdFx0XHRcdF9saS5lcShfcHJlKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRcdF9saS5lcShfbm93KS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHRcdFx0XHRcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIF9saS5lcShfbm93KS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdF9wcmUgPSBfbm93O1xyXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Y2hhbmdlKCk7fSw1MDAwKTtcclxuXHRcdH1cclxuXHR9XHJcblx0ZnVuY3Rpb24gc2hvd01lbnUoX3Qpe1xyXG5cdFx0aWYoX3Qpe1xyXG5cdFx0XHQkKCcubWVudWRvbScpLmFkZENsYXNzKCdvbicpO1xyXG5cdFx0XHQkKCcubWVudScpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHQkKCcubWVudWRvbScpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG5cdFx0XHQkKCcubWVudScpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHR9XHJcblx0ZnVuY3Rpb24gYWRkckNoYW5nZSgpe1xyXG4gICAgXHR2YXIgdmFsdWUgPSAkLmFkZHJlc3MudmFsdWUoKTtcclxuXHRcdHN3aXRjaCh2YWx1ZSkge1xyXG5cdFx0XHRjYXNlICcvJzpcclxuXHRcdFx0XHRvYmoubm93cGFnZSA9IDE7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICcvcGFnZTEnOlx0XHRcdFx0XHJcblx0XHRcdFx0b2JqLm5vd3BhZ2UgPSAxO1xyXG5cdFx0XHRicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnL3BhZ2UyJzpcclxuICAgICAgICAgICAgICAgIG9iai5ub3dwYWdlID0gMjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJy9wYWdlMyc6XHJcbiAgICAgICAgICAgICAgICBvYmoubm93cGFnZSA9IDM7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTQnOlxyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSA0O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnL3BhZ2U1JzpcclxuICAgICAgICAgICAgICAgIG9iai5ub3dwYWdlID0gNTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJy9wYWdlNic6XHJcbiAgICAgICAgICAgICAgICBvYmoubm93cGFnZSA9IDY7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTcnOlxyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSA3O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIC8vIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIvXCI7XHJcbiAgICAgICAgICAgICAgICBvYmoubm93cGFnZSA9IDE7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cdFx0fVxyXG5cdFx0Y2hlY2tub3dwYWdlKCk7XHJcblx0XHQkKCcucGFnZV9ib3gnKS5hdHRyKCdjbGFzcycsJ3BhZ2VfYm94IHBnJytvYmoubm93cGFnZSk7XHJcblx0XHRpZihvYmoubW9iaWxlKSAkKCdodG1sLGJvZHknKS5hbmltYXRlKHtzY3JvbGxUb3A6JCgnLnBhZ2UnICsgb2JqLm5vd3BhZ2UpLm9mZnNldCgpLnRvcH0sb2JqLmZhZGVzcGVlZCk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBvbm1vdXNld2hlZWxmYyhlKXtcclxuICAgIFx0aWYoIW9iai5tb2JpbGUpe1xyXG4gICAgXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0aWYob2JqLmNhbndoZWVsKXtcclxuXHRcdFx0XHRvYmouY2Fud2hlZWwgPSBmYWxzZTtcclxuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7b2JqLmNhbndoZWVsPXRydWU7fSxvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0XHRpZihlLndoZWVsRGVsdGE+MCkgb2JqLm5vd3BhZ2UtPTE7XHJcblx0XHRcdFx0ZWxzZSBvYmoubm93cGFnZSs9MTtcclxuXHRcdFx0XHRjaGVja25vd3BhZ2VzY3JvbGwoKTtcclxuXHRcdFx0XHQkLmFkZHJlc3MudmFsdWUoXCIvcGFnZVwiK29iai5ub3dwYWdlKTtcclxuXHRcdFx0fVxyXG4gICAgXHR9XHJcblx0fVxyXG5cdGZ1bmN0aW9uIGNoZWNrbm93cGFnZXNjcm9sbCgpe1xyXG5cdFx0aWYob2JqLm5vd3BhZ2U8MSkgb2JqLm5vd3BhZ2U9MTtcclxuXHRcdGVsc2UgaWYob2JqLm5vd3BhZ2UgPj0gJCgnLnBhZ2VfYm94IC5wYWdlJykubGVuZ3RoKW9iai5ub3dwYWdlID0gJCgnLnBhZ2VfYm94IC5wYWdlJykubGVuZ3RoO1xyXG5cclxuXHRcdC8vc2Nyb2xsX2J0blxyXG5cdFx0dmFyIF9jYW5zaG93ID0gdHJ1ZTtcclxuXHRcdGlmKG9iai5ub3dwYWdlID09ICQoJy5wYWdlX2JveCAucGFnZScpLmxlbmd0aCkgX2NhbnNob3cgPSBmYWxzZTtcclxuXHRcdGVsc2V7XHJcblx0XHRcdC8vaGFzV2F0Y2h2aWRlb1xyXG5cdFx0XHRpZighb2JqLmhhc1dhdGNodmlkZW8pe1xyXG5cdFx0XHRcdGlmKCFvYmoubW9iaWxlKXtcclxuXHRcdFx0XHRcdGlmKG9iai5ub3dwYWdlPj0zKXtcclxuXHRcdFx0XHRcdFx0aWYob2JqLm5vd3BhZ2UhPTMpIGFsZXJ0KG9iai53YXJuaW5ndHh0KTtcclxuXHRcdFx0XHRcdFx0b2JqLm5vd3BhZ2U9MztcclxuXHRcdFx0XHRcdFx0X2NhbnNob3c9ZmFsc2U7XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRpZihfY2Fuc2hvdyl7XHJcblx0XHRcdGlmKCEkKCcuc2Nyb2xsX2J0bicpLmhhc0NsYXNzKCdvbicpKSAkKCcuc2Nyb2xsX2J0bicpLmFkZENsYXNzKCdvbicpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuXHRcdH1lbHNlICQoJy5zY3JvbGxfYnRuJykucmVtb3ZlQ2xhc3MoJ29uJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuXHR9XHJcblx0ZnVuY3Rpb24gY2hlY2tub3dwYWdlKCl7XHJcblx0XHQvL3BhZ2VBbmlcclxuXHRcdGlmKG9iai5ub3dwYWdlPT0yKSBvYmoucGFnZTJUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpeyQoJy5wZXJzb25fYWxsJykuYWRkQ2xhc3MoJ29uJyk7fSxvYmouZmFkZXNwZWVkKTtcclxuXHRcdGVsc2V7XHJcblx0XHRcdGNsZWFyVGltZW91dChvYmoucGFnZTJUaW1lb3V0KTtcclxuXHRcdFx0JCgnLnBlcnNvbl9hbGwnKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdH1cclxuXHRcdGlmKG9iai5ub3dwYWdlPT01KSBvYmoucGFnZTVUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpeyQoJy5pY29uX2FsbCcpLmFkZENsYXNzKCdvbicpO30sb2JqLmZhZGVzcGVlZCk7XHJcblx0XHRlbHNle1xyXG5cdFx0XHRjbGVhclRpbWVvdXQob2JqLnBhZ2U1VGltZW91dCk7XHJcblx0XHRcdCQoJy5pY29uX2FsbCcpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vY2hlY2t2aWRlb1xyXG5cdFx0aWYoJCgnLnBsYXlfYnRuJykuaGFzQ2xhc3MoJ29mZicpKXtcclxuXHRcdFx0aWYob2JqLm5vd3BhZ2UhPTMpe1xyXG5cdFx0XHRcdHRyeXtcclxuXHRcdFx0XHRcdGlmKG9iai5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSA9PTEpICQoJy5wbGF5ZXJfY3RybCcpLnRyaWdnZXIoXCJjbGlja1wiKTtcclxuXHRcdFx0XHR9Y2F0Y2goZXJyKXt9XHRcdFx0XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdHRyeXtcclxuXHRcdFx0XHRcdGlmKG9iai5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSAhPTUgJiYgb2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpICE9MSkgJCgnLnBsYXllcl9jdHJsJykudHJpZ2dlcihcImNsaWNrXCIpO1xyXG5cdFx0XHRcdH1jYXRjaChlcnIpe31cdFx0XHRcclxuXHRcdFx0fVxyXG5cdFx0fVx0XHRcclxuXHR9XHJcbiAgXHRmdW5jdGlvbiBzaG93TG9hZGluZyhfdCl7XHJcbiAgXHRcdGlmKF90KSAkKCcubG9hZGluZycpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuICBcdFx0ZWxzZSAkKCcubG9hZGluZycpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcbiAgXHR9ICBcdFxyXG4gIFx0ZnVuY3Rpb24gY2hlY2ttb2JpbGUoKXtcclxuICBcdFx0aWYoZGV2aWNlLm1vYmlsZSgpKSBvYmoubW9iaWxlID0gdHJ1ZTtcclxuXHRcdGVsc2V7XHJcblx0XHRcdGlmKCQod2luZG93KS53aWR0aCgpPD0xMDI0KSBvYmoubW9iaWxlID0gdHJ1ZTtcclxuXHRcdFx0ZWxzZSBvYmoubW9iaWxlID0gZmFsc2U7XHRcdFxyXG5cdFx0fVx0XHRcclxuXHJcblx0XHQvL3BhZ2UgZXZlbnRcclxuXHRcdGlmKG9iai5tb2JpbGUpe1xyXG5cdFx0XHQkKCcucGFnZV9ib3ggLnBhZ2UxJykuY3NzKCdoZWlnaHQnLCQod2luZG93KS5oZWlnaHQoKSk7XHJcblx0XHRcdCQoJy5wYWdlX2JveCAucGFnZTMnKS5jc3MoJ2hlaWdodCcsJCh3aW5kb3cpLmhlaWdodCgpKTtcclxuXHRcdFx0dHJ5e1xyXG5cdFx0XHRcdGlmKG9iai5wbGF5ZXJfbG9vcC5nZXRQbGF5ZXJTdGF0ZSgpID09MSkgb2JqLnBsYXllcl9sb29wLnBhdXNlVmlkZW8oKTtcclxuXHRcdFx0XHRpZihvYmoucGxheWVyLmdldFBsYXllclN0YXRlKCkgPT0xKSAkKCcucGxheWVyX2N0cmwnKS5hZGRDbGFzcygnb24nKTtcclxuXHRcdFx0XHRlbHNlICQoJy5wbGF5ZXJfY3RybCcpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG5cdFx0XHR9Y2F0Y2goZXJyKXt9XHRcdFx0XHJcblx0XHRcdC8vICQoJ2h0bWwsYm9keScpLmFuaW1hdGUoe3Njcm9sbFRvcDokKCcucGFnZScgKyBvYmoubm93cGFnZSkub2Zmc2V0KCkudG9wfSxvYmouZmFkZXNwZWVkKTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHQkKCcucGFnZV9ib3ggLnBhZ2UxJykuYXR0cignc3R5bGUnLCcnKTtcclxuXHRcdFx0JCgnLnBhZ2VfYm94IC5wYWdlMycpLmF0dHIoJ3N0eWxlJywnJyk7XHJcblx0XHRcdHRyeXtcclxuXHRcdFx0XHRpZighJCgnLnBsYXlfYnRuJykuaGFzQ2xhc3MoJ29mZicpKSBvYmoucGxheWVyX2xvb3AucGxheVZpZGVvKCk7XHJcblx0XHRcdFx0ZWxzZXtcclxuXHRcdFx0XHRcdG9iai5wbGF5ZXJfbG9vcC5wYXVzZVZpZGVvKCk7XHJcblx0XHRcdFx0XHQkKCcjcGxheWVyX2xvb3AnKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRcdFx0JCgnLnBsYXlfYnRuJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYob2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpID09MSl7XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0JCgnI3BsYXllcl9sb29wJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0XHRcdCQoJy5wbGF5ZXJfY3RybCcpLnJlbW92ZUNsYXNzKCdvbicpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcdFx0XHRcdFx0XHJcblx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRpZighJCgnLnBsYXlfYnRuJykuaGFzQ2xhc3MoJ29mZicpKSAkKCcucGxheWVyX2N0cmwnKS5yZW1vdmVDbGFzcygnb24nKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRcdFx0ZWxzZSAkKCcucGxheWVyX2N0cmwnKS5hZGRDbGFzcygnb24nKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9Y2F0Y2goZXJyKXt9XHRcdFx0XHJcblx0XHRcdGNoZWNrbm93cGFnZXNjcm9sbCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vdmlkZW8gd2lkdGggaGVpZ2h0XHJcblx0XHRpZihvYmoubW9iaWxlKXtcclxuXHRcdFx0b2JqLnZpZGVvVyA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS53aWR0aCgpO1xyXG5cdFx0ICAgIG9iai52aWRlb0ggPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykuaGVpZ2h0KCk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0dmFyIF93ID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLndpZHRoKCkgLyAkKCcucGFnZV9ib3ggLnBhZ2UzJykuaGVpZ2h0KCk7XHJcblx0XHRcdHZhciBfdiA9IDY0MCAvIDM2MDtcclxuXHRcdFx0aWYoX3c+X3Ype1xyXG5cdFx0ICAgICAgICBvYmoudmlkZW9XID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLndpZHRoKCk7XHJcblx0XHQgICAgICAgIG9iai52aWRlb0ggPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykud2lkdGgoKSAvIF92O1xyXG5cdFx0ICAgIH1lbHNlIGlmKF93PF92KXtcclxuXHRcdCAgICBcdG9iai52aWRlb0ggPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykuaGVpZ2h0KCk7XHJcblx0XHQgICAgXHRvYmoudmlkZW9XID0gb2JqLnZpZGVvSCAqIF92O1xyXG5cdFx0ICAgIH1lbHNlIGlmKF93PT1fdil7XHJcblx0XHQgICAgICAgIG9iai52aWRlb1cgPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykud2lkdGgoKTtcclxuXHRcdCAgICAgICAgb2JqLnZpZGVvSCA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS5oZWlnaHQoKTtcclxuXHRcdCAgICB9XHRcdFx0XHJcblx0XHR9XHJcblx0XHQkKCcudmlkZW8nKS5jc3Moeyd3aWR0aCc6b2JqLnZpZGVvVywnaGVpZ2h0JzpvYmoudmlkZW9IfSk7XHJcbiAgXHR9XHJcbn0pLy9yZWFkeSBlbmQgIFxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=

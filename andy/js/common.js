$(document).ready(function(){function e(){f(),h.mobile&&(p(!1),setTimeout(function(){c(!1)},h.fadespeed)),t("player_loop",h.videoID_loop,!0),t("player",h.videoID_online,!1)}function a(e){p(!1),$(".scroll_btn").hasClass("inMb")||$(".scroll_btn").addClass("inMb").fadeOut(h.fadespeed),h.menuTimeout&&clearTimeout(h.menuTimeout),h.menuTimeout=setTimeout(function(){h.nowpage=e.attr("data-num"),r(),$.address.value("/page"+h.nowpage)},h.fadespeed)}function o(){h.hasWatchvideo=!0,$.cookie("hasWatch_kasiboan_video",!0),h.player_loop.pauseVideo(),h.player.playVideo(),$("#player_loop").fadeOut(h.fadespeed),$(".player_ctrl").fadeIn(h.fadespeed),$("#player").fadeIn(h.fadespeed)}function t(e,a,o){var t,n=0;h.mobile&&(n=1,o=!1),t=new YT.Player(e,{height:"100%",width:"100%",videoId:a,playerVars:{controls:n,autoplay:o,enablejsapi:"0",hd:"1",rel:"0",showinfo:"0",modestbranding:"1",cc_load_policy:"1",wmode:"transparent"},events:{onReady:l,onStateChange:d}}),"player_loop"==e?h.player_loop=t:"player"==e&&(h.player=t)}function l(e){"player_loop"==e.target.a.id&&h.player_loop.mute(),h.videohasready+=1,h.videohasready>=2&&(p(!1),setTimeout(function(){c(!1)},h.fadespeed))}function d(e){h.mobile&&(1==h.player.getPlayerState()?$(".player_ctrl").addClass("on").fadeOut(h.fadespeed):$(".player_ctrl").removeClass("on").fadeIn(h.fadespeed)),e.data==YT.PlayerState.ENDED&&("player_loop"==e.target.a.id?h.player_loop.playVideo():"player"==e.target.a.id&&($(".player_ctrl").addClass("on"),h.nowpage=4,r(),$.address.value("/page"+h.nowpage))),1==h.player.getPlayerState()&&(h.hasWatchvideo=!0,$.cookie("hasWatch_kasiboan_video",!0),$(".menubtn").fadeIn(h.fadespeed),h.mobile&&$(".pgm").fadeIn(),$(".play_btn").hasClass("off")||$(".play_btn").addClass("off").fadeOut(h.fadespeed))}function n(){function e(){t+=1,t>o-1&&(t=0),l!=-1?(a.eq(l).fadeOut(h.fadespeed),a.eq(t).fadeIn(h.fadespeed)):a.eq(t).fadeIn(h.fadespeed),l=t,setTimeout(function(){e()},5e3)}var a=$(this).find("li"),o=a.length,t=-1,l=-1;e()}function p(e){e?($(".menudom").addClass("on"),$(".menu").fadeIn(h.fadespeed)):($(".menudom").removeClass("on"),$(".menu").fadeOut(h.fadespeed))}function i(){var e=$.address.value();switch(e){case"/":h.nowpage=1;break;case"/page1":h.nowpage=1;break;case"/page2":h.nowpage=2;break;case"/page3":h.nowpage=3;break;case"/page4":h.nowpage=4;break;case"/page5":h.nowpage=5;break;case"/page6":h.nowpage=6;break;case"/page7":h.nowpage=7;break;default:h.nowpage=1}g(),$(".page_box").attr("class","page_box pg"+h.nowpage),h.mobile&&$("html,body").animate({scrollTop:$(".page"+h.nowpage).offset().top},h.fadespeed)}function s(e){$(".scroll_btn").hasClass("inMb")||$(".scroll_btn").addClass("inMb").fadeOut(h.fadespeed),h.mobile||(e.preventDefault(),h.canwheel&&(h.canwheel=!1,clearTimeout(h.canwheeltimeout),h.canwheeltimeout=setTimeout(function(){h.canwheel=!0},h.fadespeed),e.wheelDelta>0?h.nowpage-=1:h.nowpage+=1,r(),$.address.value("/page"+h.nowpage)))}function r(){h.nowpage<1?h.nowpage=1:h.nowpage>=$(".page_box .page").length&&(h.nowpage=$(".page_box .page").length),h.hasWatchvideo||h.mobile||h.nowpage>=3&&(3!=h.nowpage&&alert(h.warningtxt),h.nowpage=3)}function g(){if(2==h.nowpage?h.page2Timeout=setTimeout(function(){$(".person_all").addClass("on")},h.fadespeed):(clearTimeout(h.page2Timeout),$(".person_all").removeClass("on")),5==h.nowpage?h.page5Timeout=setTimeout(function(){$(".icon_all").addClass("on")},h.fadespeed):(clearTimeout(h.page5Timeout),$(".icon_all").removeClass("on")),$(".play_btn").hasClass("off"))if(3!=h.nowpage)try{1==h.player.getPlayerState()&&$(".player_ctrl").trigger("click")}catch(e){}else try{5!=h.player.getPlayerState()&&1!=h.player.getPlayerState()&&$(".player_ctrl").trigger("click")}catch(e){}}function c(e){e?$(".loading").fadeIn(h.fadespeed):$(".loading").fadeOut(h.fadespeed)}function f(){if(device.mobile()?h.mobile=!0:$(window).width()<=1024?h.mobile=!0:h.mobile=!1,h.mobile){$(".page_box .page1").css("height",$(window).height()),$(".page_box .page3").css("height",$(window).height());try{1==h.player_loop.getPlayerState()&&h.player_loop.pauseVideo(),1==h.player.getPlayerState()?$(".player_ctrl").addClass("on"):$(".player_ctrl").removeClass("on")}catch(e){}}else{$(".page_box .page1").attr("style",""),$(".page_box .page3").attr("style","");try{$(".play_btn").hasClass("off")?(h.player_loop.pauseVideo(),$("#player_loop").fadeOut(h.fadespeed),$(".play_btn").fadeOut(h.fadespeed)):h.player_loop.playVideo(),1==h.player.getPlayerState()?($("#player_loop").fadeOut(h.fadespeed),$(".player_ctrl").removeClass("on").fadeIn(h.fadespeed)):$(".play_btn").hasClass("off")?$(".player_ctrl").addClass("on").fadeIn(h.fadespeed):$(".player_ctrl").removeClass("on").fadeOut(h.fadespeed)}catch(e){}r()}if(h.mobile)h.videoW=$(".page_box .page3").width(),h.videoH=$(".page_box .page3").height();else{var a=$(".page_box .page3").width()/$(".page_box .page3").height(),o=640/360;a>o?(h.videoW=$(".page_box .page3").width(),h.videoH=$(".page_box .page3").width()/o):a<o?(h.videoH=$(".page_box .page3").height(),h.videoW=h.videoH*o):a==o&&(h.videoW=$(".page_box .page3").width(),h.videoH=$(".page_box .page3").height())}$(".video").css({width:h.videoW,height:h.videoH})}var h={wrp:$(".wrapper"),fadespeed:500,canwheel:!0,hasWatchvideo:!1,videohasready:0,videoW:$(window).width(),videoH:$(window).height(),warningtxt:"請先欣賞完景點影片，即可往下繼續瀏覽。",videoID_loop:"722u9ZmgVtE",videoID_online:"eCiRnxgyLRk",nowpage:1};device.mobile()?h.mobile=!0:$(window).width()<=1024?h.mobile=!0:h.mobile=!1,null!=$.cookie("hasWatch_kasiboan_video")&&(h.hasWatchvideo=$.cookie("hasWatch_kasiboan_video"),"true"==h.hasWatchvideo&&($(".menubtn").fadeIn(h.fadespeed),h.mobile&&$(".pgm").fadeIn())),$(window).on("touchstart",function(){h.mobile&&($(".scroll_btn").hasClass("inMb")||$(".scroll_btn").addClass("inMb").fadeOut(h.fadespeed))}),$(".menua").click(function(){a($(this))}),$(".player_ctrl").click(function(){$(this).hasClass("on")?($(this).removeClass("on"),h.player.playVideo()):($(this).addClass("on"),h.player.pauseVideo())}),$(".play_btn").click(function(){o()}),$(".page1 .bg").each(n),$(".menubtn").click(function(){p($(this).hasClass("on")?!1:!0)}),$.address.change(i),window.onmousewheel=function(e){s(e)},$(window).resize(f),$(window).load(e)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIndpbmRvd2xvYWQiLCJjaGVja21vYmlsZSIsIm9iaiIsIm1vYmlsZSIsInNob3dNZW51Iiwic2V0VGltZW91dCIsInNob3dMb2FkaW5nIiwiZmFkZXNwZWVkIiwiY3JlYXRlVmlkZW8iLCJ2aWRlb0lEX2xvb3AiLCJ2aWRlb0lEX29ubGluZSIsIm1lbnVhQ2xpY2siLCJfbyIsImhhc0NsYXNzIiwiYWRkQ2xhc3MiLCJmYWRlT3V0IiwibWVudVRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJub3dwYWdlIiwiYXR0ciIsImNoZWNrbm93cGFnZXNjcm9sbCIsImFkZHJlc3MiLCJ2YWx1ZSIsInN0YXJ0VmlkZW8iLCJoYXNXYXRjaHZpZGVvIiwiY29va2llIiwicGxheWVyX2xvb3AiLCJwYXVzZVZpZGVvIiwicGxheWVyIiwicGxheVZpZGVvIiwiZmFkZUluIiwiX2lkIiwiX2F1dG9wbGF5IiwiX29iaiIsIl9jb24iLCJZVCIsIlBsYXllciIsImhlaWdodCIsIndpZHRoIiwidmlkZW9JZCIsInBsYXllclZhcnMiLCJjb250cm9scyIsImF1dG9wbGF5IiwiZW5hYmxlanNhcGkiLCJoZCIsInJlbCIsInNob3dpbmZvIiwibW9kZXN0YnJhbmRpbmciLCJjY19sb2FkX3BvbGljeSIsIndtb2RlIiwiZXZlbnRzIiwib25SZWFkeSIsInZpZGVvUmVhZHkiLCJvblN0YXRlQ2hhbmdlIiwib25QbGF5ZXJTdGF0ZUNoYW5nZSIsImV2ZW50IiwidGFyZ2V0IiwiYSIsImlkIiwibXV0ZSIsInZpZGVvaGFzcmVhZHkiLCJnZXRQbGF5ZXJTdGF0ZSIsInJlbW92ZUNsYXNzIiwiZGF0YSIsIlBsYXllclN0YXRlIiwiRU5ERUQiLCJiYW5uZXJmYyIsImNoYW5nZSIsIl9ub3ciLCJfbGVuZ3RoIiwiX3ByZSIsIl9saSIsImVxIiwidGhpcyIsImZpbmQiLCJsZW5ndGgiLCJfdCIsImFkZHJDaGFuZ2UiLCJjaGVja25vd3BhZ2UiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwidG9wIiwib25tb3VzZXdoZWVsZmMiLCJlIiwicHJldmVudERlZmF1bHQiLCJjYW53aGVlbCIsImNhbndoZWVsdGltZW91dCIsIndoZWVsRGVsdGEiLCJhbGVydCIsIndhcm5pbmd0eHQiLCJwYWdlMlRpbWVvdXQiLCJwYWdlNVRpbWVvdXQiLCJ0cmlnZ2VyIiwiZXJyIiwiZGV2aWNlIiwid2luZG93IiwiY3NzIiwidmlkZW9XIiwidmlkZW9IIiwiX3ciLCJfdiIsIndycCIsIm9uIiwiY2xpY2siLCJlYWNoIiwib25tb3VzZXdoZWVsIiwicmVzaXplIiwibG9hZCJdLCJtYXBwaW5ncyI6IkFBQUFBLEVBQUVDLFVBQVVDLE1BQU0sV0F3RGpCLFFBQVNDLEtBQ1JDLElBQ0dDLEVBQUlDLFNBQ05DLEdBQVMsR0FDTkMsV0FBVyxXQUFXQyxHQUFZLElBQVNKLEVBQUlLLFlBRW5EQyxFQUFZLGNBQWNOLEVBQUlPLGNBQWEsR0FDM0NELEVBQVksU0FBU04sRUFBSVEsZ0JBQWUsR0FJekMsUUFBU0MsR0FBV0MsR0FDbkJSLEdBQVMsR0FDTFAsRUFBRSxlQUFlZ0IsU0FBUyxTQUFTaEIsRUFBRSxlQUFlaUIsU0FBUyxRQUFRQyxRQUFRYixFQUFJSyxXQUNsRkwsRUFBSWMsYUFBYUMsYUFBYWYsRUFBSWMsYUFDckNkLEVBQUljLFlBQWNYLFdBQVcsV0FDNUJILEVBQUlnQixRQUFVTixFQUFHTyxLQUFLLFlBQ3RCQyxJQUNBdkIsRUFBRXdCLFFBQVFDLE1BQU0sUUFBUXBCLEVBQUlnQixVQUMzQmhCLEVBQUlLLFdBRVAsUUFBU2dCLEtBQ1JyQixFQUFJc0IsZUFBZ0IsRUFDakIzQixFQUFFNEIsT0FBTywyQkFBMEIsR0FDdEN2QixFQUFJd0IsWUFBWUMsYUFDaEJ6QixFQUFJMEIsT0FBT0MsWUFDWGhDLEVBQUUsZ0JBQWdCa0IsUUFBUWIsRUFBSUssV0FDOUJWLEVBQUUsZ0JBQWdCaUMsT0FBTzVCLEVBQUlLLFdBQzdCVixFQUFFLFdB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QyxJQUNoRHZGLEVBQUVtRyxRQUFRVyxPQUFPMUcsR0FDakJKLEVBQUVtRyxRQUFRWSxLQUFLNUciLCJmaWxlIjoiY29tbW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcclxuXHQvL0luaXRcclxuXHR2YXIgb2JqID17XHJcblx0XHR3cnA6ICQoJy53cmFwcGVyJyksXHJcblx0XHRmYWRlc3BlZWQ6IDUwMCxcclxuXHRcdGNhbndoZWVsOiB0cnVlLFxyXG5cdFx0aGFzV2F0Y2h2aWRlbzogZmFsc2UsXHJcblx0XHR2aWRlb2hhc3JlYWR5OiAwLFxyXG5cdFx0dmlkZW9XOiAkKHdpbmRvdykud2lkdGgoKSxcclxuXHRcdHZpZGVvSDogJCh3aW5kb3cpLmhlaWdodCgpLFxyXG5cdFx0d2FybmluZ3R4dDogJ+iri+WFiOaso+iznuWujOaZr+m7nuW9seeJh++8jOWNs+WPr+W+gOS4i+e5vOe6jOeAj+imveOAgicsXHJcblx0XHR2aWRlb0lEX2xvb3A6JzcyMnU5Wm1nVnRFJyxcclxuXHRcdHZpZGVvSURfb25saW5lOidlQ2lSbnhneUxSaycsXHJcblx0XHRub3dwYWdlOiAxXHJcblx0fTtcclxuXHRpZihkZXZpY2UubW9iaWxlKCkpIG9iai5tb2JpbGUgPSB0cnVlO1xyXG5cdGVsc2V7XHJcblx0XHRpZigkKHdpbmRvdykud2lkdGgoKTw9MTAyNCkgb2JqLm1vYmlsZSA9IHRydWU7XHJcblx0XHRlbHNlIG9iai5tb2JpbGUgPSBmYWxzZTtcdFx0XHJcblx0fVxyXG5cdGlmKCQuY29va2llKFwiaGFzV2F0Y2hfa2FzaWJvYW5fdmlkZW9cIikhPW51bGwpe1xyXG5cdFx0b2JqLmhhc1dhdGNodmlkZW89JC5jb29raWUoXCJoYXNXYXRjaF9rYXNpYm9hbl92aWRlb1wiKTtcclxuXHRcdGlmKG9iai5oYXNXYXRjaHZpZGVvPT0ndHJ1ZScpe1xyXG5cdFx0XHQkKCcubWVudWJ0bicpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0aWYob2JqLm1vYmlsZSkgJCgnLnBnbScpLmZhZGVJbigpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly9BZGRMaXN0ZW5lclxyXG5cdCQod2luZG93KS5vbihcInRvdWNoc3RhcnRcIixmdW5jdGlvbigpe1xyXG5cdFx0aWYob2JqLm1vYmlsZSl7XHJcbiAgXHRcdFx0aWYoISQoJy5zY3JvbGxfYnRuJykuaGFzQ2xhc3MoJ2luTWInKSkgJCgnLnNjcm9sbF9idG4nKS5hZGRDbGFzcygnaW5NYicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcbiAgXHRcdH1cclxuXHR9KTtcclxuXHQkKCcubWVudWEnKS5jbGljayhmdW5jdGlvbigpe21lbnVhQ2xpY2soJCh0aGlzKSk7fSk7XHJcblx0JCgnLnBsYXllcl9jdHJsJykuY2xpY2soZnVuY3Rpb24oKXtcclxuXHRcdGlmKCQodGhpcykuaGFzQ2xhc3MoJ29uJykpe1xyXG5cdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG5cdFx0XHRvYmoucGxheWVyLnBsYXlWaWRlbygpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZXtcclxuXHRcdFx0JCh0aGlzKS5hZGRDbGFzcygnb24nKTtcclxuXHRcdFx0b2JqLnBsYXllci5wYXVzZVZpZGVvKCk7XHRcclxuXHRcdH1cclxuXHR9KVxyXG5cdCQoJy5wbGF5X2J0bicpLmNsaWNrKGZ1bmN0aW9uKCl7c3RhcnRWaWRlbygpO30pO1xyXG5cdC8vICQoJy5zY3JvbGxfYnRuJykuY2xpY2soZnVuY3Rpb24oKXtzY3JvbGxfYnRuY2xpY2soKTt9KTtcclxuXHQkKCcucGFnZTEgLmJnJykuZWFjaChiYW5uZXJmYyk7XHJcblx0JCgnLm1lbnVidG4nKS5jbGljayhmdW5jdGlvbigpe1xyXG5cdFx0aWYoJCh0aGlzKS5oYXNDbGFzcygnb24nKSlzaG93TWVudShmYWxzZSk7XHJcblx0XHRlbHNlIHNob3dNZW51KHRydWUpO1xyXG5cdH0pO1xyXG5cdCQuYWRkcmVzcy5jaGFuZ2UoYWRkckNoYW5nZSk7XHJcblx0d2luZG93Lm9ubW91c2V3aGVlbD0gZnVuY3Rpb24oZSl7b25tb3VzZXdoZWVsZmMoZSk7fVxyXG5cdCQod2luZG93KS5yZXNpemUoY2hlY2ttb2JpbGUpO1xyXG5cdCQod2luZG93KS5sb2FkKHdpbmRvd2xvYWQpO1xyXG5cdGZ1bmN0aW9uIHdpbmRvd2xvYWQoKXtcclxuXHRcdGNoZWNrbW9iaWxlKCk7XHJcblx0XHRpZihvYmoubW9iaWxlKXtcclxuXHRcdFx0c2hvd01lbnUoZmFsc2UpO1xyXG4gICAgXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtzaG93TG9hZGluZyhmYWxzZSk7fSxvYmouZmFkZXNwZWVkKTtcclxuXHRcdH1cclxuXHRcdGNyZWF0ZVZpZGVvKCdwbGF5ZXJfbG9vcCcsb2JqLnZpZGVvSURfbG9vcCx0cnVlKTtcclxuXHRcdGNyZWF0ZVZpZGVvKCdwbGF5ZXInLG9iai52aWRlb0lEX29ubGluZSxmYWxzZSk7XHJcblx0fVxyXG5cclxuXHQvL0V2ZW50XHJcblx0ZnVuY3Rpb24gbWVudWFDbGljayhfbyl7XHJcblx0XHRzaG93TWVudShmYWxzZSk7XHJcblx0XHRpZighJCgnLnNjcm9sbF9idG4nKS5oYXNDbGFzcygnaW5NYicpKSAkKCcuc2Nyb2xsX2J0bicpLmFkZENsYXNzKCdpbk1iJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuXHRcdGlmKG9iai5tZW51VGltZW91dCkgY2xlYXJUaW1lb3V0KG9iai5tZW51VGltZW91dCk7XHJcblx0XHRvYmoubWVudVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0XHRcdG9iai5ub3dwYWdlID0gX28uYXR0cignZGF0YS1udW0nKTtcclxuXHRcdFx0Y2hlY2tub3dwYWdlc2Nyb2xsKCk7XHJcblx0XHRcdCQuYWRkcmVzcy52YWx1ZShcIi9wYWdlXCIrb2JqLm5vd3BhZ2UpO1xyXG5cdFx0fSxvYmouZmFkZXNwZWVkKTtcdFx0XHJcblx0fVxyXG5cdGZ1bmN0aW9uIHN0YXJ0VmlkZW8oKXtcdFx0XHJcblx0XHRvYmouaGFzV2F0Y2h2aWRlbyA9IHRydWU7XHJcbiAgICBcdCQuY29va2llKFwiaGFzV2F0Y2hfa2FzaWJvYW5fdmlkZW9cIix0cnVlKTtcclxuXHRcdG9iai5wbGF5ZXJfbG9vcC5wYXVzZVZpZGVvKCk7XHJcblx0XHRvYmoucGxheWVyLnBsYXlWaWRlbygpO1x0XHRcclxuXHRcdCQoJyNwbGF5ZXJfbG9vcCcpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHQkKCcucGxheWVyX2N0cmwnKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcblx0XHQkKCcjcGxheWVyJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdH1cclxuXHRmdW5jdGlvbiBjcmVhdGVWaWRlbyhfbyxfaWQsX2F1dG9wbGF5KXtcclxuXHRcdHZhciBfb2JqO1x0XHRcclxuXHRcdHZhciBfY29uID0gMDtcclxuXHRcdGlmKG9iai5tb2JpbGUpe1xyXG5cdFx0XHRfY29uID0gMTtcclxuXHRcdFx0X2F1dG9wbGF5PWZhbHNlO1xyXG5cdFx0fVxyXG4gICAgICAgIF9vYmogPSBuZXcgWVQuUGxheWVyKF9vLCB7XHJcbiAgICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcclxuICAgICAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgICB2aWRlb0lkOiBfaWQsXHJcbiAgICAgICAgICBwbGF5ZXJWYXJzOntcclxuICAgICAgICAgICAgJ2NvbnRyb2xzJzpfY29uLFxyXG4gICAgICAgICAgICAnYXV0b3BsYXknOl9hdXRvcGxheSxcclxuICAgICAgICAgICAgJ2VuYWJsZWpzYXBpJzonMCcsXHJcbiAgICAgICAgICAgICdoZCc6JzEnLFxyXG4gICAgICAgICAgICAncmVsJzonMCcsXHJcbiAgICAgICAgICAgICdzaG93aW5mbyc6JzAnLFxyXG4gICAgICAgICAgICAnbW9kZXN0YnJhbmRpbmcnOicxJyxcclxuICAgICAgICAgICAgJ2NjX2xvYWRfcG9saWN5JzonMScsXHJcbiAgICAgICAgICAgICd3bW9kZSc6J3RyYW5zcGFyZW50JyAgICAgIFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGV2ZW50czoge1xyXG5cdCAgICAgICAgJ29uUmVhZHknOiB2aWRlb1JlYWR5LFxyXG5cdCAgICAgICAgJ29uU3RhdGVDaGFuZ2UnOiBvblBsYXllclN0YXRlQ2hhbmdlXHJcblx0ICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmKF9vID09ICdwbGF5ZXJfbG9vcCcpICBvYmoucGxheWVyX2xvb3AgPSBfb2JqO1xyXG5cdFx0ZWxzZSBpZihfbyA9PSAncGxheWVyJykgb2JqLnBsYXllciA9IF9vYmo7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiB2aWRlb1JlYWR5KGV2ZW50KXtcclxuICAgIFx0aWYoZXZlbnQudGFyZ2V0LmEuaWQgPT0gJ3BsYXllcl9sb29wJykgb2JqLnBsYXllcl9sb29wLm11dGUoKTtcclxuICAgIFx0b2JqLnZpZGVvaGFzcmVhZHkrPTE7XHJcbiAgICBcdGlmKG9iai52aWRlb2hhc3JlYWR5ID49Mil7XHJcbiAgICBcdFx0c2hvd01lbnUoZmFsc2UpO1xyXG4gICAgXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgIFx0XHRcdHNob3dMb2FkaW5nKGZhbHNlKTtcclxuICAgIFx0XHR9LG9iai5mYWRlc3BlZWQpOyAgICBcdFx0XHJcbiAgICBcdH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG9uUGxheWVyU3RhdGVDaGFuZ2UoZXZlbnQpe1xyXG4gICAgXHRpZihvYmoubW9iaWxlKXtcclxuICAgIFx0XHRpZihvYmoucGxheWVyLmdldFBsYXllclN0YXRlKCkgPT0xKXtcclxuICAgIFx0XHRcdCQoJy5wbGF5ZXJfY3RybCcpLmFkZENsYXNzKCdvbicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcbiAgICBcdFx0fWVsc2UgJCgnLnBsYXllcl9jdHJsJykucmVtb3ZlQ2xhc3MoJ29uJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG4gICAgXHR9XHJcbiAgICBcdGlmKGV2ZW50LmRhdGEgPT0gWVQuUGxheWVyU3RhdGUuRU5ERUQpe1xyXG4gICAgXHRcdGlmKGV2ZW50LnRhcmdldC5hLmlkID09ICdwbGF5ZXJfbG9vcCcpIG9iai5wbGF5ZXJfbG9vcC5wbGF5VmlkZW8oKTtcclxuICAgIFx0XHRlbHNlIGlmKGV2ZW50LnRhcmdldC5hLmlkID09ICdwbGF5ZXInKXtcclxuICAgIFx0XHRcdC8vIG9iai5oYXNXYXRjaHZpZGVvID0gdHJ1ZTtcclxuICAgIFx0XHRcdC8vICQuY29va2llKFwiaGFzV2F0Y2hfa2FzaWJvYW5fdmlkZW9cIix0cnVlKTtcclxuICAgIFx0XHRcdC8vICQoJy5tZW51YnRuJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG4gICAgXHRcdFx0Ly8gaWYob2JqLm1vYmlsZSkgJCgnLnBnbScpLmZhZGVJbigpO1xyXG4gICAgXHRcdFx0JCgnLnBsYXllcl9jdHJsJykuYWRkQ2xhc3MoJ29uJyk7XHJcbiAgICBcdFx0XHRvYmoubm93cGFnZSA9IDQ7XHJcbiAgICBcdFx0XHRjaGVja25vd3BhZ2VzY3JvbGwoKTtcclxuXHRcdFx0XHQkLmFkZHJlc3MudmFsdWUoXCIvcGFnZVwiK29iai5ub3dwYWdlKTtcclxuICAgIFx0XHR9ICAgIFx0XHRcclxuICAgIFx0fVxyXG4gICAgXHRpZihvYmoucGxheWVyLmdldFBsYXllclN0YXRlKCkgPT0xKXtcclxuICAgIFx0XHRvYmouaGFzV2F0Y2h2aWRlbyA9IHRydWU7XHJcblx0XHRcdCQuY29va2llKFwiaGFzV2F0Y2hfa2FzaWJvYW5fdmlkZW9cIix0cnVlKTtcclxuXHRcdFx0JCgnLm1lbnVidG4nKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdGlmKG9iai5tb2JpbGUpICQoJy5wZ20nKS5mYWRlSW4oKTtcclxuICAgIFx0XHRpZighJCgnLnBsYXlfYnRuJykuaGFzQ2xhc3MoJ29mZicpKSAkKCcucGxheV9idG4nKS5hZGRDbGFzcygnb2ZmJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTsgICAgXHRcdFxyXG4gICAgXHR9XHJcbiAgICB9XHJcblx0ZnVuY3Rpb24gc2Nyb2xsX2J0bmNsaWNrKCl7XHJcblx0XHRvYmoubm93cGFnZSs9MTtcclxuXHRcdGNoZWNrbm93cGFnZXNjcm9sbCgpO1xyXG5cdFx0JC5hZGRyZXNzLnZhbHVlKFwiL3BhZ2VcIitvYmoubm93cGFnZSk7XHJcblx0fVx0XHJcblx0ZnVuY3Rpb24gYmFubmVyZmMoKXtcclxuXHRcdHZhciBfbGkgPSAkKHRoaXMpLmZpbmQoJ2xpJyksXHJcblx0XHRcdF9sZW5ndGggPSBfbGkubGVuZ3RoLFxyXG5cdFx0XHRfbm93ID0gLTEsX3ByZSA9IC0xO1xyXG5cclxuXHRcdGNoYW5nZSgpO1xyXG5cdFx0ZnVuY3Rpb24gY2hhbmdlKCl7XHJcblx0XHRcdF9ub3crPTE7XHJcblx0XHRcdGlmKF9ub3c+X2xlbmd0aC0xKV9ub3c9MDtcclxuXHRcdFx0aWYoX3ByZSE9LTEpe1xyXG5cdFx0XHRcdF9saS5lcShfcHJlKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRcdF9saS5lcShfbm93KS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHRcdFx0XHRcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIF9saS5lcShfbm93KS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdF9wcmUgPSBfbm93O1xyXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Y2hhbmdlKCk7fSw1MDAwKTtcclxuXHRcdH1cclxuXHR9XHJcblx0ZnVuY3Rpb24gc2hvd01lbnUoX3Qpe1xyXG5cdFx0aWYoX3Qpe1xyXG5cdFx0XHQkKCcubWVudWRvbScpLmFkZENsYXNzKCdvbicpO1xyXG5cdFx0XHQkKCcubWVudScpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHQkKCcubWVudWRvbScpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG5cdFx0XHQkKCcubWVudScpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHR9XHJcblx0ZnVuY3Rpb24gYWRkckNoYW5nZSgpe1xyXG4gICAgXHR2YXIgdmFsdWUgPSAkLmFkZHJlc3MudmFsdWUoKTtcclxuXHRcdHN3aXRjaCh2YWx1ZSkge1xyXG5cdFx0XHRjYXNlICcvJzpcclxuXHRcdFx0XHRvYmoubm93cGFnZSA9IDE7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICcvcGFnZTEnOlx0XHRcdFx0XHJcblx0XHRcdFx0b2JqLm5vd3BhZ2UgPSAxO1xyXG5cdFx0XHRicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnL3BhZ2UyJzpcclxuICAgICAgICAgICAgICAgIG9iai5ub3dwYWdlID0gMjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJy9wYWdlMyc6XHJcbiAgICAgICAgICAgICAgICBvYmoubm93cGFnZSA9IDM7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTQnOlxyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSA0O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnL3BhZ2U1JzpcclxuICAgICAgICAgICAgICAgIG9iai5ub3dwYWdlID0gNTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJy9wYWdlNic6XHJcbiAgICAgICAgICAgICAgICBvYmoubm93cGFnZSA9IDY7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTcnOlxyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSA3O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIG9iai5ub3dwYWdlID0gMTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcblx0XHR9XHJcblx0XHRjaGVja25vd3BhZ2UoKTtcclxuXHRcdCQoJy5wYWdlX2JveCcpLmF0dHIoJ2NsYXNzJywncGFnZV9ib3ggcGcnK29iai5ub3dwYWdlKTtcclxuXHRcdGlmKG9iai5tb2JpbGUpICQoJ2h0bWwsYm9keScpLmFuaW1hdGUoe3Njcm9sbFRvcDokKCcucGFnZScgKyBvYmoubm93cGFnZSkub2Zmc2V0KCkudG9wfSxvYmouZmFkZXNwZWVkKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG9ubW91c2V3aGVlbGZjKGUpe1xyXG4gICAgXHRpZighJCgnLnNjcm9sbF9idG4nKS5oYXNDbGFzcygnaW5NYicpKSAkKCcuc2Nyb2xsX2J0bicpLmFkZENsYXNzKCdpbk1iJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuICAgIFx0aWYoIW9iai5tb2JpbGUpe1xyXG4gICAgXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0aWYob2JqLmNhbndoZWVsKXtcclxuXHRcdFx0XHRvYmouY2Fud2hlZWwgPSBmYWxzZTtcclxuXHRcdFx0XHRjbGVhclRpbWVvdXQob2JqLmNhbndoZWVsdGltZW91dCk7XHJcblx0XHRcdFx0b2JqLmNhbndoZWVsdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtvYmouY2Fud2hlZWw9dHJ1ZTt9LG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRcdGlmKGUud2hlZWxEZWx0YT4wKSBvYmoubm93cGFnZS09MTtcclxuXHRcdFx0XHRlbHNlIG9iai5ub3dwYWdlKz0xO1xyXG5cdFx0XHRcdGNoZWNrbm93cGFnZXNjcm9sbCgpO1xyXG5cdFx0XHRcdCQuYWRkcmVzcy52YWx1ZShcIi9wYWdlXCIrb2JqLm5vd3BhZ2UpO1xyXG5cdFx0XHR9XHJcbiAgICBcdH1cclxuXHR9XHJcblx0ZnVuY3Rpb24gY2hlY2tub3dwYWdlc2Nyb2xsKCl7XHJcblx0XHRpZihvYmoubm93cGFnZTwxKSBvYmoubm93cGFnZT0xO1xyXG5cdFx0ZWxzZSBpZihvYmoubm93cGFnZSA+PSAkKCcucGFnZV9ib3ggLnBhZ2UnKS5sZW5ndGgpb2JqLm5vd3BhZ2UgPSAkKCcucGFnZV9ib3ggLnBhZ2UnKS5sZW5ndGg7XHJcblx0XHQvL2hhc1dhdGNodmlkZW9cclxuXHRcdGlmKCFvYmouaGFzV2F0Y2h2aWRlbyl7XHJcblx0XHRcdGlmKCFvYmoubW9iaWxlKXtcclxuXHRcdFx0XHRpZihvYmoubm93cGFnZT49Myl7XHJcblx0XHRcdFx0XHRpZihvYmoubm93cGFnZSE9MykgYWxlcnQob2JqLndhcm5pbmd0eHQpO1xyXG5cdFx0XHRcdFx0b2JqLm5vd3BhZ2U9MztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0ZnVuY3Rpb24gY2hlY2tub3dwYWdlKCl7XHJcblx0XHQvL3BhZ2VBbmlcclxuXHRcdGlmKG9iai5ub3dwYWdlPT0yKSBvYmoucGFnZTJUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpeyQoJy5wZXJzb25fYWxsJykuYWRkQ2xhc3MoJ29uJyk7fSxvYmouZmFkZXNwZWVkKTtcclxuXHRcdGVsc2V7XHJcblx0XHRcdGNsZWFyVGltZW91dChvYmoucGFnZTJUaW1lb3V0KTtcclxuXHRcdFx0JCgnLnBlcnNvbl9hbGwnKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdH1cclxuXHRcdGlmKG9iai5ub3dwYWdlPT01KSBvYmoucGFnZTVUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpeyQoJy5pY29uX2FsbCcpLmFkZENsYXNzKCdvbicpO30sb2JqLmZhZGVzcGVlZCk7XHJcblx0XHRlbHNle1xyXG5cdFx0XHRjbGVhclRpbWVvdXQob2JqLnBhZ2U1VGltZW91dCk7XHJcblx0XHRcdCQoJy5pY29uX2FsbCcpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vY2hlY2t2aWRlb1xyXG5cdFx0aWYoJCgnLnBsYXlfYnRuJykuaGFzQ2xhc3MoJ29mZicpKXtcclxuXHRcdFx0aWYob2JqLm5vd3BhZ2UhPTMpe1xyXG5cdFx0XHRcdHRyeXtcclxuXHRcdFx0XHRcdGlmKG9iai5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSA9PTEpICQoJy5wbGF5ZXJfY3RybCcpLnRyaWdnZXIoXCJjbGlja1wiKTtcclxuXHRcdFx0XHR9Y2F0Y2goZXJyKXt9XHRcdFx0XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdHRyeXtcclxuXHRcdFx0XHRcdGlmKG9iai5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSAhPTUgJiYgb2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpICE9MSkgJCgnLnBsYXllcl9jdHJsJykudHJpZ2dlcihcImNsaWNrXCIpO1xyXG5cdFx0XHRcdH1jYXRjaChlcnIpe31cdFx0XHRcclxuXHRcdFx0fVxyXG5cdFx0fVx0XHRcclxuXHR9XHJcbiAgXHRmdW5jdGlvbiBzaG93TG9hZGluZyhfdCl7XHJcbiAgXHRcdGlmKF90KSAkKCcubG9hZGluZycpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuICBcdFx0ZWxzZSAkKCcubG9hZGluZycpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcbiAgXHR9ICBcdFxyXG4gIFx0ZnVuY3Rpb24gY2hlY2ttb2JpbGUoKXtcclxuICBcdFx0aWYoZGV2aWNlLm1vYmlsZSgpKSBvYmoubW9iaWxlID0gdHJ1ZTtcclxuXHRcdGVsc2V7XHJcblx0XHRcdGlmKCQod2luZG93KS53aWR0aCgpPD0xMDI0KSBvYmoubW9iaWxlID0gdHJ1ZTtcclxuXHRcdFx0ZWxzZSBvYmoubW9iaWxlID0gZmFsc2U7XHRcdFxyXG5cdFx0fVx0XHRcclxuXHJcblx0XHQvL3BhZ2UgZXZlbnRcclxuXHRcdGlmKG9iai5tb2JpbGUpe1xyXG5cdFx0XHQkKCcucGFnZV9ib3ggLnBhZ2UxJykuY3NzKCdoZWlnaHQnLCQod2luZG93KS5oZWlnaHQoKSk7XHJcblx0XHRcdCQoJy5wYWdlX2JveCAucGFnZTMnKS5jc3MoJ2hlaWdodCcsJCh3aW5kb3cpLmhlaWdodCgpKTtcclxuXHRcdFx0dHJ5e1xyXG5cdFx0XHRcdGlmKG9iai5wbGF5ZXJfbG9vcC5nZXRQbGF5ZXJTdGF0ZSgpID09MSkgb2JqLnBsYXllcl9sb29wLnBhdXNlVmlkZW8oKTtcclxuXHRcdFx0XHRpZihvYmoucGxheWVyLmdldFBsYXllclN0YXRlKCkgPT0xKSAkKCcucGxheWVyX2N0cmwnKS5hZGRDbGFzcygnb24nKTtcclxuXHRcdFx0XHRlbHNlICQoJy5wbGF5ZXJfY3RybCcpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG5cdFx0XHR9Y2F0Y2goZXJyKXt9XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0JCgnLnBhZ2VfYm94IC5wYWdlMScpLmF0dHIoJ3N0eWxlJywnJyk7XHJcblx0XHRcdCQoJy5wYWdlX2JveCAucGFnZTMnKS5hdHRyKCdzdHlsZScsJycpO1xyXG5cdFx0XHR0cnl7XHJcblx0XHRcdFx0aWYoISQoJy5wbGF5X2J0bicpLmhhc0NsYXNzKCdvZmYnKSkgb2JqLnBsYXllcl9sb29wLnBsYXlWaWRlbygpO1xyXG5cdFx0XHRcdGVsc2V7XHJcblx0XHRcdFx0XHRvYmoucGxheWVyX2xvb3AucGF1c2VWaWRlbygpO1xyXG5cdFx0XHRcdFx0JCgnI3BsYXllcl9sb29wJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0XHRcdCQoJy5wbGF5X2J0bicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKG9iai5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSA9PTEpe1x0XHRcdFx0XHRcclxuXHRcdFx0XHRcdCQoJyNwbGF5ZXJfbG9vcCcpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0XHQkKCcucGxheWVyX2N0cmwnKS5yZW1vdmVDbGFzcygnb24nKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHRcdFx0XHRcdFxyXG5cdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0aWYoISQoJy5wbGF5X2J0bicpLmhhc0NsYXNzKCdvZmYnKSkgJCgnLnBsYXllcl9jdHJsJykucmVtb3ZlQ2xhc3MoJ29uJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0XHRcdGVsc2UgJCgnLnBsYXllcl9jdHJsJykuYWRkQ2xhc3MoJ29uJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fWNhdGNoKGVycil7fVx0XHRcdFxyXG5cdFx0XHRjaGVja25vd3BhZ2VzY3JvbGwoKTtcclxuXHRcdH1cclxuXHJcblx0XHQvL3ZpZGVvIHdpZHRoIGhlaWdodFxyXG5cdFx0aWYob2JqLm1vYmlsZSl7XHJcblx0XHRcdG9iai52aWRlb1cgPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykud2lkdGgoKTtcclxuXHRcdCAgICBvYmoudmlkZW9IID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLmhlaWdodCgpO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdHZhciBfdyA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS53aWR0aCgpIC8gJCgnLnBhZ2VfYm94IC5wYWdlMycpLmhlaWdodCgpO1xyXG5cdFx0XHR2YXIgX3YgPSA2NDAgLyAzNjA7XHJcblx0XHRcdGlmKF93Pl92KXtcclxuXHRcdCAgICAgICAgb2JqLnZpZGVvVyA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS53aWR0aCgpO1xyXG5cdFx0ICAgICAgICBvYmoudmlkZW9IID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLndpZHRoKCkgLyBfdjtcclxuXHRcdCAgICB9ZWxzZSBpZihfdzxfdil7XHJcblx0XHQgICAgXHRvYmoudmlkZW9IID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLmhlaWdodCgpO1xyXG5cdFx0ICAgIFx0b2JqLnZpZGVvVyA9IG9iai52aWRlb0ggKiBfdjtcclxuXHRcdCAgICB9ZWxzZSBpZihfdz09X3Ype1xyXG5cdFx0ICAgICAgICBvYmoudmlkZW9XID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLndpZHRoKCk7XHJcblx0XHQgICAgICAgIG9iai52aWRlb0ggPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykuaGVpZ2h0KCk7XHJcblx0XHQgICAgfVx0XHRcdFxyXG5cdFx0fVxyXG5cdFx0JCgnLnZpZGVvJykuY3NzKHsnd2lkdGgnOm9iai52aWRlb1csJ2hlaWdodCc6b2JqLnZpZGVvSH0pO1xyXG4gIFx0fVxyXG59KS8vcmVhZHkgZW5kICBcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9

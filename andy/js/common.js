$(document).ready(function(){function e(){u(),t("player_loop","722u9ZmgVtE",!0),t("player","MaAj77BvA2I",!1)}function a(e){s(!1),y.menuTimeout&&clearTimeout(y.menuTimeout),y.menuTimeout=setTimeout(function(){y.nowpage=e.attr("data-num"),g(),$.address.value("/page"+y.nowpage)},y.fadespeed)}function o(){y.player_loop.pauseVideo(),y.player.playVideo(),$("#player_loop").fadeOut(y.fadespeed),$(".player_ctrl").fadeIn(y.fadespeed),$("#player").fadeIn(y.fadespeed)}function t(e,a,o){var t,p=0;y.mobile&&(p=1,o=!1),t=new YT.Player(e,{height:"100%",width:"100%",videoId:a,playerVars:{controls:p,autoplay:o,enablejsapi:"0",hd:"1",rel:"0",showinfo:"0",modestbranding:"1",cc_load_policy:"1",wmode:"transparent"},events:{onReady:l,onStateChange:n}}),"player_loop"==e?y.player_loop=t:"player"==e&&(y.player=t)}function l(e){y.videohasready+=1,y.videohasready>=2&&(s(!1),setTimeout(function(){f(!1)},y.fadespeed))}function n(e){y.mobile&&(1==y.player.getPlayerState()?$(".player_ctrl").addClass("on").fadeOut(y.fadespeed):$(".player_ctrl").removeClass("on").fadeIn(y.fadespeed)),e.data==YT.PlayerState.ENDED&&("player_loop"==e.target.a.id?y.player_loop.playVideo():"player"==e.target.a.id&&(y.hasWatchvideo=!0,$(".player_ctrl").addClass("on"),p())),1==y.player.getPlayerState()&&($(".play_btn").hasClass("off")||$(".play_btn").addClass("off").fadeOut(y.fadespeed))}function p(){y.nowpage+=1,g(),$.address.value("/page"+y.nowpage)}function d(){function e(){t+=1,t>o-1&&(t=0),l!=-1?(a.eq(l).fadeOut(y.fadespeed),a.eq(t).fadeIn(y.fadespeed)):a.eq(t).fadeIn(y.fadespeed),l=t,setTimeout(function(){e()},5e3)}var a=$(this).find("li"),o=a.length,t=-1,l=-1;e()}function s(e){e?($(".menudom").addClass("on"),$(".menu").fadeIn(y.fadespeed)):($(".menudom").removeClass("on"),$(".menu").fadeOut(y.fadespeed))}function i(){var e=$.address.value();switch(e){case"/":y.nowpage=1;break;case"/page1":y.nowpage=1;break;case"/page2":y.nowpage=2;break;case"/page3":y.nowpage=3;break;case"/page4":y.nowpage=4;break;case"/page5":y.nowpage=5;break;case"/page6":y.nowpage=6;break;case"/page7":y.nowpage=7;break;default:y.nowpage=1}c(),$(".page_box").attr("class","page_box pg"+y.nowpage),y.mobile&&$("html,body").animate({scrollTop:$(".page"+y.nowpage).offset().top},y.fadespeed)}function r(e){y.mobile||(e.preventDefault(),y.canwheel&&(y.canwheel=!1,setTimeout(function(){y.canwheel=!0},y.fadespeed),e.wheelDelta>0?y.nowpage-=1:y.nowpage+=1,g(),$.address.value("/page"+y.nowpage)))}function g(){y.nowpage<1?y.nowpage=1:y.nowpage>=$(".page_box .page").length&&(y.nowpage=$(".page_box .page").length);var e=!0;y.nowpage==$(".page_box .page").length?e=!1:y.hasWatchvideo||y.mobile||y.nowpage>=3&&(3!=y.nowpage&&alert(y.warningtxt),y.nowpage=3,e=!1),e?$(".scroll_btn").hasClass("on")||$(".scroll_btn").addClass("on").fadeIn(y.fadespeed):$(".scroll_btn").removeClass("on").fadeOut(y.fadespeed)}function c(){if(2==y.nowpage?y.page2Timeout=setTimeout(function(){$(".person_all").addClass("on")},y.fadespeed):(clearTimeout(y.page2Timeout),$(".person_all").removeClass("on")),5==y.nowpage?y.page5Timeout=setTimeout(function(){$(".icon_all").addClass("on")},y.fadespeed):(clearTimeout(y.page5Timeout),$(".icon_all").removeClass("on")),$(".play_btn").hasClass("off"))if(3!=y.nowpage)try{1==y.player.getPlayerState()&&$(".player_ctrl").trigger("click")}catch(e){}else try{5!=y.player.getPlayerState()&&1!=y.player.getPlayerState()&&$(".player_ctrl").trigger("click")}catch(e){}}function f(e){e?$(".loading").fadeIn(y.fadespeed):$(".loading").fadeOut(y.fadespeed)}function u(){if(device.mobile()?y.mobile=!0:$(window).width()<=1024?y.mobile=!0:y.mobile=!1,y.mobile)y.videoW=$(".page_box .page3").width(),y.videoH=$(".page_box .page3").height();else{var e=$(".page_box .page3").width()/$(".page_box .page3").height(),a=640/360;e>a?(y.videoW=$(".page_box .page3").width(),y.videoH=$(".page_box .page3").width()/a):e<a?(y.videoH=$(".page_box .page3").height(),y.videoW=y.videoH*a):windowsize==videosize&&(y.videoW=$(".page_box .page3").width(),y.videoH=$(".page_box .page3").height())}if($(".video").css({width:y.videoW,height:y.videoH}),y.mobile){$(".page_box .page1").css("height",$(window).height()),$(".page_box .page3").css("height",$(window).height());try{1==y.player_loop.getPlayerState()&&y.player_loop.pauseVideo(),1==y.player.getPlayerState()?$(".player_ctrl").addClass("on"):$(".player_ctrl").removeClass("on")}catch(o){}}else{$(".page_box .page1").attr("style",""),$(".page_box .page3").attr("style","");try{$(".play_btn").hasClass("off")?(y.player_loop.pauseVideo(),$("#player_loop").fadeOut(y.fadespeed),$(".play_btn").fadeOut(y.fadespeed)):y.player_loop.playVideo(),1==y.player.getPlayerState()?($("#player_loop").fadeOut(y.fadespeed),$(".player_ctrl").removeClass("on").fadeIn(y.fadespeed)):$(".play_btn").hasClass("off")?$(".player_ctrl").addClass("on").fadeIn(y.fadespeed):$(".player_ctrl").removeClass("on").fadeOut(y.fadespeed)}catch(o){}g()}}var y={wrp:$(".wrapper"),fadespeed:500,canwheel:!0,hasWatchvideo:!1,videohasready:0,videoW:$(window).width(),videoH:$(window).height(),warningtxt:"請先欣賞完景點影片，即可往下繼續瀏覽。",nowpage:1};$("body").click(function(){y.mobile&&($(".scroll_btn").hasClass("inMb")||$(".scroll_btn").addClass("inMb").fadeOut(y.fadespeed))}),$(".menua").click(function(){a($(this))}),$(".player_ctrl").click(function(){$(this).hasClass("on")?($(this).removeClass("on"),y.player.playVideo()):($(this).addClass("on"),y.player.pauseVideo())}),$(".play_btn").click(function(){o()}),$(".scroll_btn").click(function(){p()}),$(".page1 .bg").each(d),$(".menubtn").click(function(){s($(this).hasClass("on")?!1:!0)}),$.address.change(i),window.onmousewheel=function(e){r(e)},$(window).resize(u),$(window).load(e)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIndpbmRvd2xvYWQiLCJjaGVja21vYmlsZSIsImNyZWF0ZVZpZGVvIiwibWVudWFDbGljayIsIl9vIiwic2hvd01lbnUiLCJvYmoiLCJtZW51VGltZW91dCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJub3dwYWdlIiwiYXR0ciIsImNoZWNrbm93cGFnZXNjcm9sbCIsImFkZHJlc3MiLCJ2YWx1ZSIsImZhZGVzcGVlZCIsInN0YXJ0VmlkZW8iLCJwbGF5ZXJfbG9vcCIsInBhdXNlVmlkZW8iLCJwbGF5ZXIiLCJwbGF5VmlkZW8iLCJmYWRlT3V0IiwiZmFkZUluIiwiX2lkIiwiX2F1dG9wbGF5IiwiX29iaiIsIl9jb24iLCJtb2JpbGUiLCJZVCIsIlBsYXllciIsImhlaWdodCIsIndpZHRoIiwidmlkZW9JZCIsInBsYXllclZhcnMiLCJjb250cm9scyIsImF1dG9wbGF5IiwiZW5hYmxlanNhcGkiLCJoZCIsInJlbCIsInNob3dpbmZvIiwibW9kZXN0YnJhbmRpbmciLCJjY19sb2FkX3BvbGljeSIsIndtb2RlIiwiZXZlbnRzIiwib25SZWFkeSIsInZpZGVvUmVhZHkiLCJvblN0YXRlQ2hhbmdlIiwib25QbGF5ZXJTdGF0ZUNoYW5nZSIsImV2ZW50IiwidmlkZW9oYXNyZWFkeSIsInNob3dMb2FkaW5nIiwiZ2V0UGxheWVyU3RhdGUiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiZGF0YSIsIlBsYXllclN0YXRlIiwiRU5ERUQiLCJ0YXJnZXQiLCJhIiwiaWQiLCJoYXNXYXRjaHZpZGVvIiwic2Nyb2xsX2J0bmNsaWNrIiwiaGFzQ2xhc3MiLCJiYW5uZXJmYyIsImNoYW5nZSIsIl9ub3ciLCJfbGVuZ3RoIiwiX3ByZSIsIl9saSIsImVxIiwidGhpcyIsImZpbmQiLCJsZW5ndGgiLCJfdCIsImFkZHJDaGFuZ2UiLCJjaGVja25vd3BhZ2UiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwidG9wIiwib25tb3VzZXdoZWVsZmMiLCJlIiwicHJldmVudERlZmF1bHQiLCJjYW53aGVlbCIsIndoZWVsRGVsdGEiLCJfY2Fuc2hvdyIsImFsZXJ0Iiwid2FybmluZ3R4dCIsInBhZ2UyVGltZW91dCIsInBhZ2U1VGltZW91dCIsInRyaWdnZXIiLCJlcnIiLCJkZXZpY2UiLCJ3aW5kb3ciLCJ2aWRlb1ciLCJ2aWRlb0giLCJfdyIsIl92Iiwid2luZG93c2l6ZSIsInZpZGVvc2l6ZSIsImNzcyIsIndycCIsImNsaWNrIiwiZWFjaCIsIm9ubW91c2V3aGVlbCIsInJlc2l6ZSIsImxvYWQiXSwibWFwcGluZ3MiOiJBQUFBQSxFQUFFQyxVQUFVQyxNQUFNLFdBNkNqQixRQUFTQyxLQUNSQyxJQUNBQyxFQUFZLGNBQWMsZUFBYyxHQUN4Q0EsRUFBWSxTQUFTLGVBQWMsR0FJcEMsUUFBU0MsR0FBV0MsR0FDbkJDLEdBQVMsR0FDTkMsRUFBSUMsYUFBYUMsYUFBYUYsRUFBSUMsYUFDckNELEVBQUlDLFlBQWNFLFdBQVcsV0FDNUJILEVBQUlJLFFBQVVOLEVBQUdPLEtBQUssWUFDdEJDLElBQ0FmLEVBQUVnQixRQUFRQyxNQUFNLFFBQVFSLEVBQUlJLFVBQzNCSixFQUFJUyxXQUVQLFFBQVNDLEtBQ1JWLEVBQUlXLFlBQVlDLGFBQ2hCWixFQUFJYSxPQUFPQyxZQUNYdkIsRUFBRSxnQkFBZ0J3QixRQUFRZixFQUFJUyxXQUM5QmxCLEVBQUUsZ0JBQWdCeUIsT0FBT2hCLEVBQUlTLFdBQzdCbEIsRUFBRSxXQUFXeUIsT0FBT2hCLEVBQUlTLFdBRXpCLFFBQVNiLEdBQVlFLEVBQUdtQixFQUFJQyxHQUMzQixHQUFJQyxHQUNBQyxFQUFPLENBQ1JwQixHQUFJcUIsU0FDTkQsRUFBTyxFQUNQRixHQUFVLEdBRUxDLEVBQU8sR0FBSUcsSUFBR0MsT0FBT3pCLEdBQ25CMEIsT0FBUSxPQUNSQyxNQUFPLE9BQ1BDLFFBQVNULEVBQ1RVLFlBQ0VDLFNBQVdSLEVBQ1hTLFNBQVdYLEVBQ1hZLFlB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QUFXTixFQUFFeUUsU0FDMUN6RSxFQUFFLGdCQUFnQnlHLE1BQU0sV0FDcEJ6RyxFQUFFeUUsTUFBTVIsU0FBUyxPQUNuQmpFLEVBQUV5RSxNQUFNakIsWUFBWSxNQUNwQi9DLEVBQUlhLE9BQU9DLGNBR1h2QixFQUFFeUUsTUFBTWxCLFNBQVMsTUFDakI5QyxFQUFJYSxPQUFPRCxnQkFHYnJCLEVBQUUsYUFBYXlHLE1BQU0sV0FBV3RGLE1BQ2hDbkIsRUFBRSxlQUFleUcsTUFBTSxXQUFXekMsTUFDbENoRSxFQUFFLGNBQWMwRyxLQUFLeEMsR0FDckJsRSxFQUFFLFlBQVl5RyxNQUFNLFdBQ09qRyxFQUF2QlIsRUFBRXlFLE1BQU1SLFNBQVMsT0FBZSxHQUNyQixLQUVmakUsRUFBRWdCLFFBQVFtRCxPQUFPVSxHQUNqQm1CLE9BQU9XLGFBQWMsU0FBU3ZCLEdBQUdELEVBQWVDLElBQ2hEcEYsRUFBRWdHLFFBQVFZLE9BQU94RyxHQUNqQkosRUFBRWdHLFFBQVFhLEtBQUsxRyIsImZpbGUiOiJjb21tb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG5cdHZhciBvYmogPXtcclxuXHRcdHdycDogJCgnLndyYXBwZXInKSxcclxuXHRcdGZhZGVzcGVlZDogNTAwLFxyXG5cdFx0Y2Fud2hlZWw6IHRydWUsXHJcblx0XHRoYXNXYXRjaHZpZGVvOiBmYWxzZSxcclxuXHRcdHZpZGVvaGFzcmVhZHk6IDAsXHJcblx0XHR2aWRlb1c6ICQod2luZG93KS53aWR0aCgpLFxyXG5cdFx0dmlkZW9IOiAkKHdpbmRvdykuaGVpZ2h0KCksXHJcblx0XHR3YXJuaW5ndHh0OiAn6KuL5YWI5qyj6LOe5a6M5pmv6bue5b2x54mH77yM5Y2z5Y+v5b6A5LiL57m857qM54CP6Ka944CCJyxcclxuXHRcdG5vd3BhZ2U6IDFcclxuXHR9O1x0XHJcblxyXG5cdC8vSW5pdFxyXG5cdC8vIGNoZWNrbW9iaWxlKCk7XHJcblx0XHJcblxyXG5cdC8vQWRkTGlzdGVuZXJcclxuXHQkKCdib2R5JykuY2xpY2soZnVuY3Rpb24oKXtcclxuXHRcdGlmKG9iai5tb2JpbGUpe1xyXG4gIFx0XHRcdGlmKCEkKCcuc2Nyb2xsX2J0bicpLmhhc0NsYXNzKCdpbk1iJykpICQoJy5zY3JvbGxfYnRuJykuYWRkQ2xhc3MoJ2luTWInKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG4gIFx0XHR9XHJcblx0fSk7XHJcblx0JCgnLm1lbnVhJykuY2xpY2soZnVuY3Rpb24oKXttZW51YUNsaWNrKCQodGhpcykpO30pO1xyXG5cdCQoJy5wbGF5ZXJfY3RybCcpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcblx0XHRpZigkKHRoaXMpLmhhc0NsYXNzKCdvbicpKXtcclxuXHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdFx0b2JqLnBsYXllci5wbGF5VmlkZW8oKTtcclxuXHRcdH1cclxuXHRcdGVsc2V7XHJcblx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ29uJyk7XHJcblx0XHRcdG9iai5wbGF5ZXIucGF1c2VWaWRlbygpO1x0XHJcblx0XHR9XHJcblx0fSlcclxuXHQkKCcucGxheV9idG4nKS5jbGljayhmdW5jdGlvbigpe3N0YXJ0VmlkZW8oKTt9KTtcclxuXHQkKCcuc2Nyb2xsX2J0bicpLmNsaWNrKGZ1bmN0aW9uKCl7c2Nyb2xsX2J0bmNsaWNrKCk7fSk7XHJcblx0JCgnLnBhZ2UxIC5iZycpLmVhY2goYmFubmVyZmMpO1xyXG5cdCQoJy5tZW51YnRuJykuY2xpY2soZnVuY3Rpb24oKXtcclxuXHRcdGlmKCQodGhpcykuaGFzQ2xhc3MoJ29uJykpc2hvd01lbnUoZmFsc2UpO1xyXG5cdFx0ZWxzZSBzaG93TWVudSh0cnVlKTtcclxuXHR9KTtcclxuXHQkLmFkZHJlc3MuY2hhbmdlKGFkZHJDaGFuZ2UpO1xyXG5cdHdpbmRvdy5vbm1vdXNld2hlZWw9IGZ1bmN0aW9uKGUpe29ubW91c2V3aGVlbGZjKGUpO31cclxuXHQkKHdpbmRvdykucmVzaXplKGNoZWNrbW9iaWxlKTtcclxuXHQkKHdpbmRvdykubG9hZCh3aW5kb3dsb2FkKTtcclxuXHRmdW5jdGlvbiB3aW5kb3dsb2FkKCl7XHJcblx0XHRjaGVja21vYmlsZSgpO1xyXG5cdFx0Y3JlYXRlVmlkZW8oJ3BsYXllcl9sb29wJywnNzIydTlabWdWdEUnLHRydWUpO1xyXG5cdFx0Y3JlYXRlVmlkZW8oJ3BsYXllcicsJ01hQWo3N0J2QTJJJyxmYWxzZSk7XHRcdFxyXG5cdH1cclxuXHJcblx0Ly9FdmVudFxyXG5cdGZ1bmN0aW9uIG1lbnVhQ2xpY2soX28pe1xyXG5cdFx0c2hvd01lbnUoZmFsc2UpO1xyXG5cdFx0aWYob2JqLm1lbnVUaW1lb3V0KSBjbGVhclRpbWVvdXQob2JqLm1lbnVUaW1lb3V0KTtcclxuXHRcdG9iai5tZW51VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHRcdFx0b2JqLm5vd3BhZ2UgPSBfby5hdHRyKCdkYXRhLW51bScpO1xyXG5cdFx0XHRjaGVja25vd3BhZ2VzY3JvbGwoKTtcclxuXHRcdFx0JC5hZGRyZXNzLnZhbHVlKFwiL3BhZ2VcIitvYmoubm93cGFnZSk7XHJcblx0XHR9LG9iai5mYWRlc3BlZWQpO1x0XHRcclxuXHR9XHJcblx0ZnVuY3Rpb24gc3RhcnRWaWRlbygpe1x0XHRcclxuXHRcdG9iai5wbGF5ZXJfbG9vcC5wYXVzZVZpZGVvKCk7XHJcblx0XHRvYmoucGxheWVyLnBsYXlWaWRlbygpO1x0XHRcclxuXHRcdCQoJyNwbGF5ZXJfbG9vcCcpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHQkKCcucGxheWVyX2N0cmwnKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcblx0XHQkKCcjcGxheWVyJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdH1cclxuXHRmdW5jdGlvbiBjcmVhdGVWaWRlbyhfbyxfaWQsX2F1dG9wbGF5KXtcclxuXHRcdHZhciBfb2JqO1x0XHRcclxuXHRcdHZhciBfY29uID0gMDtcclxuXHRcdGlmKG9iai5tb2JpbGUpe1xyXG5cdFx0XHRfY29uID0gMTtcclxuXHRcdFx0X2F1dG9wbGF5PWZhbHNlO1xyXG5cdFx0fVxyXG4gICAgICAgIF9vYmogPSBuZXcgWVQuUGxheWVyKF9vLCB7XHJcbiAgICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcclxuICAgICAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgICB2aWRlb0lkOiBfaWQsXHJcbiAgICAgICAgICBwbGF5ZXJWYXJzOntcclxuICAgICAgICAgICAgJ2NvbnRyb2xzJzpfY29uLFxyXG4gICAgICAgICAgICAnYXV0b3BsYXknOl9hdXRvcGxheSxcclxuICAgICAgICAgICAgJ2VuYWJsZWpzYXBpJzonMCcsXHJcbiAgICAgICAgICAgICdoZCc6JzEnLFxyXG4gICAgICAgICAgICAncmVsJzonMCcsXHJcbiAgICAgICAgICAgICdzaG93aW5mbyc6JzAnLFxyXG4gICAgICAgICAgICAnbW9kZXN0YnJhbmRpbmcnOicxJyxcclxuICAgICAgICAgICAgJ2NjX2xvYWRfcG9saWN5JzonMScsXHJcbiAgICAgICAgICAgICd3bW9kZSc6J3RyYW5zcGFyZW50JyAgICAgIFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGV2ZW50czoge1xyXG5cdCAgICAgICAgJ29uUmVhZHknOiB2aWRlb1JlYWR5LFxyXG5cdCAgICAgICAgJ29uU3RhdGVDaGFuZ2UnOiBvblBsYXllclN0YXRlQ2hhbmdlXHJcblx0ICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmKF9vID09ICdwbGF5ZXJfbG9vcCcpICBvYmoucGxheWVyX2xvb3AgPSBfb2JqO1xyXG5cdFx0ZWxzZSBpZihfbyA9PSAncGxheWVyJykgb2JqLnBsYXllciA9IF9vYmo7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiB2aWRlb1JlYWR5KGV2ZW50KXtcclxuICAgIFx0b2JqLnZpZGVvaGFzcmVhZHkrPTE7XHJcbiAgICBcdGlmKG9iai52aWRlb2hhc3JlYWR5ID49Mil7XHJcbiAgICBcdFx0c2hvd01lbnUoZmFsc2UpO1xyXG4gICAgXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgIFx0XHRcdHNob3dMb2FkaW5nKGZhbHNlKTtcclxuICAgIFx0XHR9LG9iai5mYWRlc3BlZWQpOyAgICBcdFx0XHJcbiAgICBcdH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG9uUGxheWVyU3RhdGVDaGFuZ2UoZXZlbnQpe1xyXG4gICAgXHRpZihvYmoubW9iaWxlKXtcclxuICAgIFx0XHRpZihvYmoucGxheWVyLmdldFBsYXllclN0YXRlKCkgPT0xKXtcclxuICAgIFx0XHRcdCQoJy5wbGF5ZXJfY3RybCcpLmFkZENsYXNzKCdvbicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcbiAgICBcdFx0fWVsc2UgJCgnLnBsYXllcl9jdHJsJykucmVtb3ZlQ2xhc3MoJ29uJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG4gICAgXHR9XHJcbiAgICBcdGlmKGV2ZW50LmRhdGEgPT0gWVQuUGxheWVyU3RhdGUuRU5ERUQpe1xyXG4gICAgXHRcdGlmKGV2ZW50LnRhcmdldC5hLmlkID09ICdwbGF5ZXJfbG9vcCcpIG9iai5wbGF5ZXJfbG9vcC5wbGF5VmlkZW8oKTtcclxuICAgIFx0XHRlbHNlIGlmKGV2ZW50LnRhcmdldC5hLmlkID09ICdwbGF5ZXInKXtcclxuICAgIFx0XHRcdG9iai5oYXNXYXRjaHZpZGVvID0gdHJ1ZTtcclxuICAgIFx0XHRcdCQoJy5wbGF5ZXJfY3RybCcpLmFkZENsYXNzKCdvbicpO1xyXG4gICAgXHRcdFx0c2Nyb2xsX2J0bmNsaWNrKCk7XHJcbiAgICBcdFx0fSAgICBcdFx0XHJcbiAgICBcdH1cclxuICAgIFx0aWYob2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpID09MSl7XHJcbiAgICBcdFx0aWYoISQoJy5wbGF5X2J0bicpLmhhc0NsYXNzKCdvZmYnKSkgJCgnLnBsYXlfYnRuJykuYWRkQ2xhc3MoJ29mZicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7ICAgIFx0XHRcclxuICAgIFx0fVxyXG4gICAgXHRcclxuICAgIH1cclxuXHRmdW5jdGlvbiBzY3JvbGxfYnRuY2xpY2soKXtcclxuXHRcdG9iai5ub3dwYWdlKz0xO1xyXG5cdFx0Y2hlY2tub3dwYWdlc2Nyb2xsKCk7XHJcblx0XHQkLmFkZHJlc3MudmFsdWUoXCIvcGFnZVwiK29iai5ub3dwYWdlKTtcclxuXHR9XHRcclxuXHRmdW5jdGlvbiBiYW5uZXJmYygpe1xyXG5cdFx0dmFyIF9saSA9ICQodGhpcykuZmluZCgnbGknKSxcclxuXHRcdFx0X2xlbmd0aCA9IF9saS5sZW5ndGgsXHJcblx0XHRcdF9ub3cgPSAtMSxfcHJlID0gLTE7XHJcblxyXG5cdFx0Y2hhbmdlKCk7XHJcblx0XHRmdW5jdGlvbiBjaGFuZ2UoKXtcclxuXHRcdFx0X25vdys9MTtcclxuXHRcdFx0aWYoX25vdz5fbGVuZ3RoLTEpX25vdz0wO1xyXG5cdFx0XHRpZihfcHJlIT0tMSl7XHJcblx0XHRcdFx0X2xpLmVxKF9wcmUpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0X2xpLmVxKF9ub3cpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgX2xpLmVxKF9ub3cpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0X3ByZSA9IF9ub3c7XHJcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtjaGFuZ2UoKTt9LDUwMDApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRmdW5jdGlvbiBzaG93TWVudShfdCl7XHJcblx0XHRpZihfdCl7XHJcblx0XHRcdCQoJy5tZW51ZG9tJykuYWRkQ2xhc3MoJ29uJyk7XHJcblx0XHRcdCQoJy5tZW51JykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdCQoJy5tZW51ZG9tJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHRcdCQoJy5tZW51JykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdH1cclxuXHRmdW5jdGlvbiBhZGRyQ2hhbmdlKCl7XHJcbiAgICBcdHZhciB2YWx1ZSA9ICQuYWRkcmVzcy52YWx1ZSgpO1xyXG5cdFx0c3dpdGNoKHZhbHVlKSB7XHJcblx0XHRcdGNhc2UgJy8nOlxyXG5cdFx0XHRcdG9iai5ub3dwYWdlID0gMTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJy9wYWdlMSc6XHRcdFx0XHRcclxuXHRcdFx0XHRvYmoubm93cGFnZSA9IDE7XHJcblx0XHRcdGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTInOlxyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSAyO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnL3BhZ2UzJzpcclxuICAgICAgICAgICAgICAgIG9iai5ub3dwYWdlID0gMztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJy9wYWdlNCc6XHJcbiAgICAgICAgICAgICAgICBvYmoubm93cGFnZSA9IDQ7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTUnOlxyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSA1O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnL3BhZ2U2JzpcclxuICAgICAgICAgICAgICAgIG9iai5ub3dwYWdlID0gNjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJy9wYWdlNyc6XHJcbiAgICAgICAgICAgICAgICBvYmoubm93cGFnZSA9IDc7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgLy8gd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9cIjtcclxuICAgICAgICAgICAgICAgIG9iai5ub3dwYWdlID0gMTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcblx0XHR9XHJcblx0XHRjaGVja25vd3BhZ2UoKTtcclxuXHRcdCQoJy5wYWdlX2JveCcpLmF0dHIoJ2NsYXNzJywncGFnZV9ib3ggcGcnK29iai5ub3dwYWdlKTtcclxuXHRcdGlmKG9iai5tb2JpbGUpICQoJ2h0bWwsYm9keScpLmFuaW1hdGUoe3Njcm9sbFRvcDokKCcucGFnZScgKyBvYmoubm93cGFnZSkub2Zmc2V0KCkudG9wfSxvYmouZmFkZXNwZWVkKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG9ubW91c2V3aGVlbGZjKGUpe1xyXG4gICAgXHRpZighb2JqLm1vYmlsZSl7XHJcbiAgICBcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRpZihvYmouY2Fud2hlZWwpe1xyXG5cdFx0XHRcdG9iai5jYW53aGVlbCA9IGZhbHNlO1xyXG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtvYmouY2Fud2hlZWw9dHJ1ZTt9LG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRcdGlmKGUud2hlZWxEZWx0YT4wKSBvYmoubm93cGFnZS09MTtcclxuXHRcdFx0XHRlbHNlIG9iai5ub3dwYWdlKz0xO1xyXG5cdFx0XHRcdGNoZWNrbm93cGFnZXNjcm9sbCgpO1xyXG5cdFx0XHRcdCQuYWRkcmVzcy52YWx1ZShcIi9wYWdlXCIrb2JqLm5vd3BhZ2UpO1xyXG5cdFx0XHR9XHJcbiAgICBcdH1cclxuXHR9XHJcblx0ZnVuY3Rpb24gY2hlY2tub3dwYWdlc2Nyb2xsKCl7XHJcblx0XHRpZihvYmoubm93cGFnZTwxKSBvYmoubm93cGFnZT0xO1xyXG5cdFx0ZWxzZSBpZihvYmoubm93cGFnZSA+PSAkKCcucGFnZV9ib3ggLnBhZ2UnKS5sZW5ndGgpb2JqLm5vd3BhZ2UgPSAkKCcucGFnZV9ib3ggLnBhZ2UnKS5sZW5ndGg7XHJcblxyXG5cdFx0Ly9zY3JvbGxfYnRuXHJcblx0XHR2YXIgX2NhbnNob3cgPSB0cnVlO1xyXG5cdFx0aWYob2JqLm5vd3BhZ2UgPT0gJCgnLnBhZ2VfYm94IC5wYWdlJykubGVuZ3RoKSBfY2Fuc2hvdyA9IGZhbHNlO1xyXG5cdFx0ZWxzZXtcclxuXHRcdFx0Ly9oYXNXYXRjaHZpZGVvXHJcblx0XHRcdGlmKCFvYmouaGFzV2F0Y2h2aWRlbyl7XHJcblx0XHRcdFx0aWYoIW9iai5tb2JpbGUpe1xyXG5cdFx0XHRcdFx0aWYob2JqLm5vd3BhZ2U+PTMpe1xyXG5cdFx0XHRcdFx0XHRpZihvYmoubm93cGFnZSE9MykgYWxlcnQob2JqLndhcm5pbmd0eHQpO1xyXG5cdFx0XHRcdFx0XHRvYmoubm93cGFnZT0zO1xyXG5cdFx0XHRcdFx0XHRfY2Fuc2hvdz1mYWxzZTtcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGlmKF9jYW5zaG93KXtcclxuXHRcdFx0aWYoISQoJy5zY3JvbGxfYnRuJykuaGFzQ2xhc3MoJ29uJykpICQoJy5zY3JvbGxfYnRuJykuYWRkQ2xhc3MoJ29uJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0fWVsc2UgJCgnLnNjcm9sbF9idG4nKS5yZW1vdmVDbGFzcygnb24nKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdH1cclxuXHRmdW5jdGlvbiBjaGVja25vd3BhZ2UoKXtcclxuXHRcdC8vcGFnZUFuaVxyXG5cdFx0aWYob2JqLm5vd3BhZ2U9PTIpIG9iai5wYWdlMlRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JCgnLnBlcnNvbl9hbGwnKS5hZGRDbGFzcygnb24nKTt9LG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0ZWxzZXtcclxuXHRcdFx0Y2xlYXJUaW1lb3V0KG9iai5wYWdlMlRpbWVvdXQpO1xyXG5cdFx0XHQkKCcucGVyc29uX2FsbCcpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG5cdFx0fVxyXG5cdFx0aWYob2JqLm5vd3BhZ2U9PTUpIG9iai5wYWdlNVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JCgnLmljb25fYWxsJykuYWRkQ2xhc3MoJ29uJyk7fSxvYmouZmFkZXNwZWVkKTtcclxuXHRcdGVsc2V7XHJcblx0XHRcdGNsZWFyVGltZW91dChvYmoucGFnZTVUaW1lb3V0KTtcclxuXHRcdFx0JCgnLmljb25fYWxsJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly9jaGVja3ZpZGVvXHJcblx0XHRpZigkKCcucGxheV9idG4nKS5oYXNDbGFzcygnb2ZmJykpe1xyXG5cdFx0XHRpZihvYmoubm93cGFnZSE9Myl7XHJcblx0XHRcdFx0dHJ5e1xyXG5cdFx0XHRcdFx0aWYob2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpID09MSkgJCgnLnBsYXllcl9jdHJsJykudHJpZ2dlcihcImNsaWNrXCIpO1xyXG5cdFx0XHRcdH1jYXRjaChlcnIpe31cdFx0XHRcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0dHJ5e1xyXG5cdFx0XHRcdFx0aWYob2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpICE9NSAmJiBvYmoucGxheWVyLmdldFBsYXllclN0YXRlKCkgIT0xKSAkKCcucGxheWVyX2N0cmwnKS50cmlnZ2VyKFwiY2xpY2tcIik7XHJcblx0XHRcdFx0fWNhdGNoKGVycil7fVx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHR9XHRcdFxyXG5cdH1cclxuICBcdGZ1bmN0aW9uIHNob3dMb2FkaW5nKF90KXtcclxuICBcdFx0aWYoX3QpICQoJy5sb2FkaW5nJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG4gIFx0XHRlbHNlICQoJy5sb2FkaW5nJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuICBcdH0gIFx0XHJcbiAgXHRmdW5jdGlvbiBjaGVja21vYmlsZSgpe1xyXG4gIFx0XHRpZihkZXZpY2UubW9iaWxlKCkpIG9iai5tb2JpbGUgPSB0cnVlO1xyXG5cdFx0ZWxzZXtcclxuXHRcdFx0aWYoJCh3aW5kb3cpLndpZHRoKCk8PTEwMjQpIG9iai5tb2JpbGUgPSB0cnVlO1xyXG5cdFx0XHRlbHNlIG9iai5tb2JpbGUgPSBmYWxzZTtcdFx0XHJcblx0XHR9XHJcblx0XHQvL3ZpZGVvIHdpZHRoIGhlaWdodFxyXG5cdFx0aWYob2JqLm1vYmlsZSl7XHJcblx0XHRcdG9iai52aWRlb1cgPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykud2lkdGgoKTtcclxuXHRcdCAgICBvYmoudmlkZW9IID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLmhlaWdodCgpO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdHZhciBfdyA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS53aWR0aCgpIC8gJCgnLnBhZ2VfYm94IC5wYWdlMycpLmhlaWdodCgpO1xyXG5cdFx0XHR2YXIgX3YgPSA2NDAgLyAzNjA7XHJcblx0XHRcdGlmKF93Pl92KXtcclxuXHRcdCAgICAgICAgb2JqLnZpZGVvVyA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS53aWR0aCgpO1xyXG5cdFx0ICAgICAgICBvYmoudmlkZW9IID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLndpZHRoKCkgLyBfdjtcclxuXHRcdCAgICB9ZWxzZSBpZihfdzxfdil7XHJcblx0XHQgICAgXHRvYmoudmlkZW9IID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLmhlaWdodCgpO1xyXG5cdFx0ICAgIFx0b2JqLnZpZGVvVyA9IG9iai52aWRlb0ggKiBfdjtcclxuXHRcdCAgICB9ZWxzZSBpZih3aW5kb3dzaXplPT12aWRlb3NpemUpe1xyXG5cdFx0ICAgICAgICBvYmoudmlkZW9XID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLndpZHRoKCk7XHJcblx0XHQgICAgICAgIG9iai52aWRlb0ggPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykuaGVpZ2h0KCk7XHJcblx0XHQgICAgfVx0XHRcdFxyXG5cdFx0fVxyXG5cdFx0JCgnLnZpZGVvJykuY3NzKHsnd2lkdGgnOm9iai52aWRlb1csJ2hlaWdodCc6b2JqLnZpZGVvSH0pO1xyXG5cclxuXHRcdC8vcGFnZSBldmVudFxyXG5cdFx0aWYob2JqLm1vYmlsZSl7XHJcblx0XHRcdCQoJy5wYWdlX2JveCAucGFnZTEnKS5jc3MoJ2hlaWdodCcsJCh3aW5kb3cpLmhlaWdodCgpKTtcclxuXHRcdFx0JCgnLnBhZ2VfYm94IC5wYWdlMycpLmNzcygnaGVpZ2h0JywkKHdpbmRvdykuaGVpZ2h0KCkpO1xyXG5cdFx0XHR0cnl7XHJcblx0XHRcdFx0aWYob2JqLnBsYXllcl9sb29wLmdldFBsYXllclN0YXRlKCkgPT0xKSBvYmoucGxheWVyX2xvb3AucGF1c2VWaWRlbygpO1xyXG5cdFx0XHRcdGlmKG9iai5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSA9PTEpICQoJy5wbGF5ZXJfY3RybCcpLmFkZENsYXNzKCdvbicpO1xyXG5cdFx0XHRcdGVsc2UgJCgnLnBsYXllcl9jdHJsJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHRcdH1jYXRjaChlcnIpe31cdFx0XHRcclxuXHRcdFx0Ly8gJCgnaHRtbCxib2R5JykuYW5pbWF0ZSh7c2Nyb2xsVG9wOiQoJy5wYWdlJyArIG9iai5ub3dwYWdlKS5vZmZzZXQoKS50b3B9LG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdCQoJy5wYWdlX2JveCAucGFnZTEnKS5hdHRyKCdzdHlsZScsJycpO1xyXG5cdFx0XHQkKCcucGFnZV9ib3ggLnBhZ2UzJykuYXR0cignc3R5bGUnLCcnKTtcclxuXHRcdFx0dHJ5e1xyXG5cdFx0XHRcdGlmKCEkKCcucGxheV9idG4nKS5oYXNDbGFzcygnb2ZmJykpIG9iai5wbGF5ZXJfbG9vcC5wbGF5VmlkZW8oKTtcclxuXHRcdFx0XHRlbHNle1xyXG5cdFx0XHRcdFx0b2JqLnBsYXllcl9sb29wLnBhdXNlVmlkZW8oKTtcclxuXHRcdFx0XHRcdCQoJyNwbGF5ZXJfbG9vcCcpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0XHQkKCcucGxheV9idG4nKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZihvYmoucGxheWVyLmdldFBsYXllclN0YXRlKCkgPT0xKXtcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQkKCcjcGxheWVyX2xvb3AnKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRcdFx0JCgnLnBsYXllcl9jdHJsJykucmVtb3ZlQ2xhc3MoJ29uJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1x0XHRcdFx0XHRcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdGlmKCEkKCcucGxheV9idG4nKS5oYXNDbGFzcygnb2ZmJykpICQoJy5wbGF5ZXJfY3RybCcpLnJlbW92ZUNsYXNzKCdvbicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0XHRlbHNlICQoJy5wbGF5ZXJfY3RybCcpLmFkZENsYXNzKCdvbicpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1jYXRjaChlcnIpe31cdFx0XHRcclxuXHRcdFx0Y2hlY2tub3dwYWdlc2Nyb2xsKCk7XHJcblx0XHR9XHJcbiAgXHR9XHJcbn0pLy9yZWFkeSBlbmQgIFxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=

$(document).ready(function(){function e(){u(),t("player_loop",h.videoID_loop,!0),t("player",h.videoID_online,!1)}function a(e){s(!1),h.menuTimeout&&clearTimeout(h.menuTimeout),h.menuTimeout=setTimeout(function(){h.nowpage=e.attr("data-num"),g(),$.address.value("/page"+h.nowpage)},h.fadespeed)}function o(){h.player_loop.pauseVideo(),h.player.playVideo(),$("#player_loop").fadeOut(h.fadespeed),$(".player_ctrl").fadeIn(h.fadespeed),$("#player").fadeIn(h.fadespeed)}function t(e,a,o){var t,p=0;h.mobile&&(p=1,o=!1),t=new YT.Player(e,{height:"100%",width:"100%",videoId:a,playerVars:{controls:p,autoplay:o,enablejsapi:"0",hd:"1",rel:"0",showinfo:"0",modestbranding:"1",cc_load_policy:"1",wmode:"transparent"},events:{onReady:l,onStateChange:n}}),"player_loop"==e?h.player_loop=t:"player"==e&&(h.player=t)}function l(e){"player_loop"==e.target.a.id&&h.player_loop.mute(),h.videohasready+=1,h.videohasready>=2&&(s(!1),setTimeout(function(){f(!1)},h.fadespeed))}function n(e){h.mobile&&(1==h.player.getPlayerState()?$(".player_ctrl").addClass("on").fadeOut(h.fadespeed):$(".player_ctrl").removeClass("on").fadeIn(h.fadespeed)),e.data==YT.PlayerState.ENDED&&("player_loop"==e.target.a.id?h.player_loop.playVideo():"player"==e.target.a.id&&(h.hasWatchvideo=!0,$.cookie("hasWatch_kasiboan_video",!0),$(".player_ctrl").addClass("on"),h.nowpage=4,g(),$.address.value("/page"+h.nowpage))),1==h.player.getPlayerState()&&($(".play_btn").hasClass("off")||$(".play_btn").addClass("off").fadeOut(h.fadespeed))}function p(){h.nowpage+=1,g(),$.address.value("/page"+h.nowpage)}function d(){function e(){t+=1,t>o-1&&(t=0),l!=-1?(a.eq(l).fadeOut(h.fadespeed),a.eq(t).fadeIn(h.fadespeed)):a.eq(t).fadeIn(h.fadespeed),l=t,setTimeout(function(){e()},5e3)}var a=$(this).find("li"),o=a.length,t=-1,l=-1;e()}function s(e){e?($(".menudom").addClass("on"),$(".menu").fadeIn(h.fadespeed)):($(".menudom").removeClass("on"),$(".menu").fadeOut(h.fadespeed))}function i(){var e=$.address.value();switch(e){case"/":h.nowpage=1;break;case"/page1":h.nowpage=1;break;case"/page2":h.nowpage=2;break;case"/page3":h.nowpage=3;break;case"/page4":h.nowpage=4;break;case"/page5":h.nowpage=5;break;case"/page6":h.nowpage=6;break;case"/page7":h.nowpage=7;break;default:h.nowpage=1}c(),$(".page_box").attr("class","page_box pg"+h.nowpage),h.mobile&&$("html,body").animate({scrollTop:$(".page"+h.nowpage).offset().top},h.fadespeed)}function r(e){h.mobile||(e.preventDefault(),h.canwheel&&(h.canwheel=!1,setTimeout(function(){h.canwheel=!0},h.fadespeed),e.wheelDelta>0?h.nowpage-=1:h.nowpage+=1,g(),$.address.value("/page"+h.nowpage)))}function g(){h.nowpage<1?h.nowpage=1:h.nowpage>=$(".page_box .page").length&&(h.nowpage=$(".page_box .page").length);var e=!0;h.nowpage==$(".page_box .page").length?e=!1:h.hasWatchvideo||h.mobile||h.nowpage>=3&&(3!=h.nowpage&&alert(h.warningtxt),h.nowpage=3,e=!1),e?h.mobile||$(".scroll_btn").hasClass("on")||$(".scroll_btn").addClass("on").fadeIn(h.fadespeed):$(".scroll_btn").removeClass("on").fadeOut(h.fadespeed)}function c(){if(2==h.nowpage?h.page2Timeout=setTimeout(function(){$(".person_all").addClass("on")},h.fadespeed):(clearTimeout(h.page2Timeout),$(".person_all").removeClass("on")),5==h.nowpage?h.page5Timeout=setTimeout(function(){$(".icon_all").addClass("on")},h.fadespeed):(clearTimeout(h.page5Timeout),$(".icon_all").removeClass("on")),$(".play_btn").hasClass("off"))if(3!=h.nowpage)try{1==h.player.getPlayerState()&&$(".player_ctrl").trigger("click")}catch(e){}else try{5!=h.player.getPlayerState()&&1!=h.player.getPlayerState()&&$(".player_ctrl").trigger("click")}catch(e){}}function f(e){e?$(".loading").fadeIn(h.fadespeed):$(".loading").fadeOut(h.fadespeed)}function u(){if(device.mobile()?h.mobile=!0:$(window).width()<=1024?h.mobile=!0:h.mobile=!1,h.mobile){$(".page_box .page1").css("height",$(window).height()),$(".page_box .page3").css("height",$(window).height());try{1==h.player_loop.getPlayerState()&&h.player_loop.pauseVideo(),1==h.player.getPlayerState()?$(".player_ctrl").addClass("on"):$(".player_ctrl").removeClass("on")}catch(e){}}else{$(".page_box .page1").attr("style",""),$(".page_box .page3").attr("style","");try{$(".play_btn").hasClass("off")?(h.player_loop.pauseVideo(),$("#player_loop").fadeOut(h.fadespeed),$(".play_btn").fadeOut(h.fadespeed)):h.player_loop.playVideo(),1==h.player.getPlayerState()?($("#player_loop").fadeOut(h.fadespeed),$(".player_ctrl").removeClass("on").fadeIn(h.fadespeed)):$(".play_btn").hasClass("off")?$(".player_ctrl").addClass("on").fadeIn(h.fadespeed):$(".player_ctrl").removeClass("on").fadeOut(h.fadespeed)}catch(e){}g()}if(h.mobile)h.videoW=$(".page_box .page3").width(),h.videoH=$(".page_box .page3").height();else{var a=$(".page_box .page3").width()/$(".page_box .page3").height(),o=640/360;a>o?(h.videoW=$(".page_box .page3").width(),h.videoH=$(".page_box .page3").width()/o):a<o?(h.videoH=$(".page_box .page3").height(),h.videoW=h.videoH*o):a==o&&(h.videoW=$(".page_box .page3").width(),h.videoH=$(".page_box .page3").height())}$(".video").css({width:h.videoW,height:h.videoH})}var h={wrp:$(".wrapper"),fadespeed:500,canwheel:!0,hasWatchvideo:!1,videohasready:0,videoW:$(window).width(),videoH:$(window).height(),warningtxt:"請先欣賞完景點影片，即可往下繼續瀏覽。",videoID_loop:"722u9ZmgVtE",videoID_online:"eCiRnxgyLRk",nowpage:1};null!=$.cookie("hasWatch_kasiboan_video")&&(h.hasWatchvideo=!0),$(window).on("touchstart",function(){h.mobile&&($(".scroll_btn").hasClass("inMb")||$(".scroll_btn").addClass("inMb").fadeOut(h.fadespeed))}),$(".menua").click(function(){a($(this))}),$(".player_ctrl").click(function(){$(this).hasClass("on")?($(this).removeClass("on"),h.player.playVideo()):($(this).addClass("on"),h.player.pauseVideo())}),$(".play_btn").click(function(){o()}),$(".scroll_btn").click(function(){p()}),$(".page1 .bg").each(d),$(".menubtn").click(function(){s($(this).hasClass("on")?!1:!0)}),$.address.change(i),window.onmousewheel=function(e){r(e)},$(window).resize(u),$(window).load(e)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIndpbmRvd2xvYWQiLCJjaGVja21vYmlsZSIsImNyZWF0ZVZpZGVvIiwib2JqIiwidmlkZW9JRF9sb29wIiwidmlkZW9JRF9vbmxpbmUiLCJtZW51YUNsaWNrIiwiX28iLCJzaG93TWVudSIsIm1lbnVUaW1lb3V0IiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsIm5vd3BhZ2UiLCJhdHRyIiwiY2hlY2tub3dwYWdlc2Nyb2xsIiwiYWRkcmVzcyIsInZhbHVlIiwiZmFkZXNwZWVkIiwic3RhcnRWaWRlbyIsInBsYXllcl9sb29wIiwicGF1c2VWaWRlbyIsInBsYXllciIsInBsYXlWaWRlbyIsImZhZGVPdXQiLCJmYWRlSW4iLCJfaWQiLCJfYXV0b3BsYXkiLCJfb2JqIiwiX2NvbiIsIm1vYmlsZSIsIllUIiwiUGxheWVyIiwiaGVpZ2h0Iiwid2lkdGgiLCJ2aWRlb0lkIiwicGxheWVyVmFycyIsImNvbnRyb2xzIiwiYXV0b3BsYXkiLCJlbmFibGVqc2FwaSIsImhkIiwicmVsIiwic2hvd2luZm8iLCJtb2Rlc3RicmFuZGluZyIsImNjX2xvYWRfcG9saWN5Iiwid21vZGUiLCJldmVudHMiLCJvblJlYWR5IiwidmlkZW9SZWFkeSIsIm9uU3RhdGVDaGFuZ2UiLCJvblBsYXllclN0YXRlQ2hhbmdlIiwiZXZlbnQiLCJ0YXJnZXQiLCJhIiwiaWQiLCJtdXRlIiwidmlkZW9oYXNyZWFkeSIsInNob3dMb2FkaW5nIiwiZ2V0UGxheWVyU3RhdGUiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiZGF0YSIsIlBsYXllclN0YXRlIiwiRU5ERUQiLCJoYXNXYXRjaHZpZGVvIiwiY29va2llIiwiaGFzQ2xhc3MiLCJzY3JvbGxfYnRuY2xpY2siLCJiYW5uZXJmYyIsImNoYW5nZSIsIl9ub3ciLCJfbGVuZ3RoIiwiX3ByZSIsIl9saSIsImVxIiwidGhpcyIsImZpbmQiLCJsZW5ndGgiLCJfdCIsImFkZHJDaGFuZ2UiLCJjaGVja25vd3BhZ2UiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwidG9wIiwib25tb3VzZXdoZWVsZmMiLCJlIiwicHJldmVudERlZmF1bHQiLCJjYW53aGVlbCIsIndoZWVsRGVsdGEiLCJfY2Fuc2hvdyIsImFsZXJ0Iiwid2FybmluZ3R4dCIsInBhZ2UyVGltZW91dCIsInBhZ2U1VGltZW91dCIsInRyaWdnZXIiLCJlcnIiLCJkZXZpY2UiLCJ3aW5kb3ciLCJjc3MiLCJ2aWRlb1ciLCJ2aWRlb0giLCJfdyIsIl92Iiwid3JwIiwib24iLCJjbGljayIsImVhY2giLCJvbm1vdXNld2hlZWwiLCJyZXNpemUiLCJsb2FkIl0sIm1hcHBpbmdzIjoiQUFBQUEsRUFBRUMsVUFBVUMsTUFBTSxXQThDakIsUUFBU0MsS0FDUkMsSUFDQUMsRUFBWSxjQUFjQyxFQUFJQyxjQUFhLEdBQzNDRixFQUFZLFNBQVNDLEVBQUlFLGdCQUFlLEdBSXpDLFFBQVNDLEdBQVdDLEdBQ25CQyxHQUFTLEdBQ05MLEVBQUlNLGFBQWFDLGFBQWFQLEVBQUlNLGFBQ3JDTixFQUFJTSxZQUFjRSxXQUFXLFdBQzVCUixFQUFJUyxRQUFVTCxFQUFHTSxLQUFLLFlBQ3RCQyxJQUNBakIsRUFBRWtCLFFBQVFDLE1BQU0sUUFBUWIsRUFBSVMsVUFDM0JULEVBQUljLFdBRVAsUUFBU0MsS0FDUmYsRUFBSWdCLFlBQVlDLGFBQ2hCakIsRUFBSWtCLE9BQU9DLFlBQ1h6QixFQUFFLGdCQUFnQjBCLFFBQVFwQixFQUFJYyxXQUM5QnBCLEVBQUUsZ0JBQWdCMkIsT0FBT3JCLEVBQUljLFdBQzdCcEIsRUFBRSxXQUFXMkIsT0FBT3JCLEVBQUljLFdBRXpCLFFBQVNmLEdBQVlLLEVBQUdrQixFQUFJQyxHQUMzQixHQUFJQyxHQUNBQyxFQUFPLENBQ1J6QixHQUFJMEIsU0FDTkQsRUFBTyxFQUNQRixHQUFVLEdBRUxDLEVBQU8sR0FBSUcsSUFBR0MsT0FBT3hCLEdBQ25CeUIsT0FBUSxPQUNSQyxNQUFPLE9B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UixjQUFlLEVBQ2Y0QyxPQUFRdEcsRUFBRW9HLFFBQVFoRSxRQUNsQm1FLE9BQVF2RyxFQUFFb0csUUFBUWpFLFNBQ2xCMkQsV0FBWSxzQkFDWnZGLGFBQWEsY0FDYkMsZUFBZSxjQUNmTyxRQUFTLEVBRThCLE9BQXJDZixFQUFFbUUsT0FBTyw2QkFBa0M3RCxFQUFJNEQsZUFBZ0IsR0FJbEVsRSxFQUFFb0csUUFBUU8sR0FBRyxhQUFhLFdBQ3RCckcsRUFBSTBCLFNBQ0FoQyxFQUFFLGVBQWVvRSxTQUFTLFNBQVNwRSxFQUFFLGVBQWU2RCxTQUFTLFFBQVFuQyxRQUFRcEIsRUFBSWMsY0FHekZwQixFQUFFLFVBQVU0RyxNQUFNLFdBQVduRyxFQUFXVCxFQUFFNkUsU0FDMUM3RSxFQUFFLGdCQUFnQjRHLE1BQU0sV0FDcEI1RyxFQUFFNkUsTUFBTVQsU0FBUyxPQUNuQnBFLEVBQUU2RSxNQUFNZixZQUFZLE1BQ3BCeEQsRUFBSWtCLE9BQU9DLGNBR1h6QixFQUFFNkUsTUFBTWhCLFNBQVMsTUFDakJ2RCxFQUFJa0IsT0FBT0QsZ0JBR2J2QixFQUFFLGFBQWE0RyxNQUFNLFdBQVd2RixNQUNoQ3JCLEVBQUUsZUFBZTRHLE1BQU0sV0FBV3ZDLE1BQ2xDckUsRUFBRSxjQUFjNkcsS0FBS3ZDLEdBQ3JCdEUsRUFBRSxZQUFZNEcsTUFBTSxXQUNPakcsRUFBdkJYLEVBQUU2RSxNQUFNVCxTQUFTLE9BQWUsR0FDckIsS0FFZnBFLEVBQUVrQixRQUFRcUQsT0FBT1UsR0FDakJtQixPQUFPVSxhQUFjLFNBQVN0QixHQUFHRCxFQUFlQyxJQUNoRHhGLEVBQUVvRyxRQUFRVyxPQUFPM0csR0FDakJKLEVBQUVvRyxRQUFRWSxLQUFLN0ciLCJmaWxlIjoiY29tbW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcclxuXHQvL0luaXRcclxuXHR2YXIgb2JqID17XHJcblx0XHR3cnA6ICQoJy53cmFwcGVyJyksXHJcblx0XHRmYWRlc3BlZWQ6IDUwMCxcclxuXHRcdGNhbndoZWVsOiB0cnVlLFxyXG5cdFx0aGFzV2F0Y2h2aWRlbzogZmFsc2UsXHJcblx0XHR2aWRlb2hhc3JlYWR5OiAwLFxyXG5cdFx0dmlkZW9XOiAkKHdpbmRvdykud2lkdGgoKSxcclxuXHRcdHZpZGVvSDogJCh3aW5kb3cpLmhlaWdodCgpLFxyXG5cdFx0d2FybmluZ3R4dDogJ+iri+WFiOaso+iznuWujOaZr+m7nuW9seeJh++8jOWNs+WPr+W+gOS4i+e5vOe6jOeAj+imveOAgicsXHJcblx0XHR2aWRlb0lEX2xvb3A6JzcyMnU5Wm1nVnRFJyxcclxuXHRcdHZpZGVvSURfb25saW5lOidlQ2lSbnhneUxSaycsXHJcblx0XHRub3dwYWdlOiAxXHJcblx0fTtcclxuXHRpZigkLmNvb2tpZShcImhhc1dhdGNoX2thc2lib2FuX3ZpZGVvXCIpIT1udWxsKSBvYmouaGFzV2F0Y2h2aWRlbyA9IHRydWU7XHRcclxuXHRcclxuXHJcblx0Ly9BZGRMaXN0ZW5lclxyXG5cdCQod2luZG93KS5vbihcInRvdWNoc3RhcnRcIixmdW5jdGlvbigpe1xyXG5cdFx0aWYob2JqLm1vYmlsZSl7XHJcbiAgXHRcdFx0aWYoISQoJy5zY3JvbGxfYnRuJykuaGFzQ2xhc3MoJ2luTWInKSkgJCgnLnNjcm9sbF9idG4nKS5hZGRDbGFzcygnaW5NYicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcbiAgXHRcdH1cclxuXHR9KTtcclxuXHQkKCcubWVudWEnKS5jbGljayhmdW5jdGlvbigpe21lbnVhQ2xpY2soJCh0aGlzKSk7fSk7XHJcblx0JCgnLnBsYXllcl9jdHJsJykuY2xpY2soZnVuY3Rpb24oKXtcclxuXHRcdGlmKCQodGhpcykuaGFzQ2xhc3MoJ29uJykpe1xyXG5cdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG5cdFx0XHRvYmoucGxheWVyLnBsYXlWaWRlbygpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZXtcclxuXHRcdFx0JCh0aGlzKS5hZGRDbGFzcygnb24nKTtcclxuXHRcdFx0b2JqLnBsYXllci5wYXVzZVZpZGVvKCk7XHRcclxuXHRcdH1cclxuXHR9KVxyXG5cdCQoJy5wbGF5X2J0bicpLmNsaWNrKGZ1bmN0aW9uKCl7c3RhcnRWaWRlbygpO30pO1xyXG5cdCQoJy5zY3JvbGxfYnRuJykuY2xpY2soZnVuY3Rpb24oKXtzY3JvbGxfYnRuY2xpY2soKTt9KTtcclxuXHQkKCcucGFnZTEgLmJnJykuZWFjaChiYW5uZXJmYyk7XHJcblx0JCgnLm1lbnVidG4nKS5jbGljayhmdW5jdGlvbigpe1xyXG5cdFx0aWYoJCh0aGlzKS5oYXNDbGFzcygnb24nKSlzaG93TWVudShmYWxzZSk7XHJcblx0XHRlbHNlIHNob3dNZW51KHRydWUpO1xyXG5cdH0pO1xyXG5cdCQuYWRkcmVzcy5jaGFuZ2UoYWRkckNoYW5nZSk7XHJcblx0d2luZG93Lm9ubW91c2V3aGVlbD0gZnVuY3Rpb24oZSl7b25tb3VzZXdoZWVsZmMoZSk7fVxyXG5cdCQod2luZG93KS5yZXNpemUoY2hlY2ttb2JpbGUpO1xyXG5cdCQod2luZG93KS5sb2FkKHdpbmRvd2xvYWQpO1xyXG5cdGZ1bmN0aW9uIHdpbmRvd2xvYWQoKXtcclxuXHRcdGNoZWNrbW9iaWxlKCk7XHJcblx0XHRjcmVhdGVWaWRlbygncGxheWVyX2xvb3AnLG9iai52aWRlb0lEX2xvb3AsdHJ1ZSk7XHJcblx0XHRjcmVhdGVWaWRlbygncGxheWVyJyxvYmoudmlkZW9JRF9vbmxpbmUsZmFsc2UpO1x0XHRcclxuXHR9XHJcblxyXG5cdC8vRXZlbnRcclxuXHRmdW5jdGlvbiBtZW51YUNsaWNrKF9vKXtcclxuXHRcdHNob3dNZW51KGZhbHNlKTtcclxuXHRcdGlmKG9iai5tZW51VGltZW91dCkgY2xlYXJUaW1lb3V0KG9iai5tZW51VGltZW91dCk7XHJcblx0XHRvYmoubWVudVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0XHRcdG9iai5ub3dwYWdlID0gX28uYXR0cignZGF0YS1udW0nKTtcclxuXHRcdFx0Y2hlY2tub3dwYWdlc2Nyb2xsKCk7XHJcblx0XHRcdCQuYWRkcmVzcy52YWx1ZShcIi9wYWdlXCIrb2JqLm5vd3BhZ2UpO1xyXG5cdFx0fSxvYmouZmFkZXNwZWVkKTtcdFx0XHJcblx0fVxyXG5cdGZ1bmN0aW9uIHN0YXJ0VmlkZW8oKXtcdFx0XHJcblx0XHRvYmoucGxheWVyX2xvb3AucGF1c2VWaWRlbygpO1xyXG5cdFx0b2JqLnBsYXllci5wbGF5VmlkZW8oKTtcdFx0XHJcblx0XHQkKCcjcGxheWVyX2xvb3AnKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0JCgnLnBsYXllcl9jdHJsJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0JCgnI3BsYXllcicpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuXHR9XHJcblx0ZnVuY3Rpb24gY3JlYXRlVmlkZW8oX28sX2lkLF9hdXRvcGxheSl7XHJcblx0XHR2YXIgX29iajtcdFx0XHJcblx0XHR2YXIgX2NvbiA9IDA7XHJcblx0XHRpZihvYmoubW9iaWxlKXtcclxuXHRcdFx0X2NvbiA9IDE7XHJcblx0XHRcdF9hdXRvcGxheT1mYWxzZTtcclxuXHRcdH1cclxuICAgICAgICBfb2JqID0gbmV3IFlULlBsYXllcihfbywge1xyXG4gICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXHJcbiAgICAgICAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAgICAgICAgdmlkZW9JZDogX2lkLFxyXG4gICAgICAgICAgcGxheWVyVmFyczp7XHJcbiAgICAgICAgICAgICdjb250cm9scyc6X2NvbixcclxuICAgICAgICAgICAgJ2F1dG9wbGF5JzpfYXV0b3BsYXksXHJcbiAgICAgICAgICAgICdlbmFibGVqc2FwaSc6JzAnLFxyXG4gICAgICAgICAgICAnaGQnOicxJyxcclxuICAgICAgICAgICAgJ3JlbCc6JzAnLFxyXG4gICAgICAgICAgICAnc2hvd2luZm8nOicwJyxcclxuICAgICAgICAgICAgJ21vZGVzdGJyYW5kaW5nJzonMScsXHJcbiAgICAgICAgICAgICdjY19sb2FkX3BvbGljeSc6JzEnLFxyXG4gICAgICAgICAgICAnd21vZGUnOid0cmFuc3BhcmVudCcgICAgICBcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBldmVudHM6IHtcclxuXHQgICAgICAgICdvblJlYWR5JzogdmlkZW9SZWFkeSxcclxuXHQgICAgICAgICdvblN0YXRlQ2hhbmdlJzogb25QbGF5ZXJTdGF0ZUNoYW5nZVxyXG5cdCAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZihfbyA9PSAncGxheWVyX2xvb3AnKSAgb2JqLnBsYXllcl9sb29wID0gX29iajtcclxuXHRcdGVsc2UgaWYoX28gPT0gJ3BsYXllcicpIG9iai5wbGF5ZXIgPSBfb2JqO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdmlkZW9SZWFkeShldmVudCl7XHJcbiAgICBcdGlmKGV2ZW50LnRhcmdldC5hLmlkID09ICdwbGF5ZXJfbG9vcCcpIG9iai5wbGF5ZXJfbG9vcC5tdXRlKCk7XHJcbiAgICBcdG9iai52aWRlb2hhc3JlYWR5Kz0xO1xyXG4gICAgXHRpZihvYmoudmlkZW9oYXNyZWFkeSA+PTIpe1xyXG4gICAgXHRcdHNob3dNZW51KGZhbHNlKTtcclxuICAgIFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICBcdFx0XHRzaG93TG9hZGluZyhmYWxzZSk7XHJcbiAgICBcdFx0fSxvYmouZmFkZXNwZWVkKTsgICAgXHRcdFxyXG4gICAgXHR9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBvblBsYXllclN0YXRlQ2hhbmdlKGV2ZW50KXtcclxuICAgIFx0aWYob2JqLm1vYmlsZSl7XHJcbiAgICBcdFx0aWYob2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpID09MSl7XHJcbiAgICBcdFx0XHQkKCcucGxheWVyX2N0cmwnKS5hZGRDbGFzcygnb24nKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG4gICAgXHRcdH1lbHNlICQoJy5wbGF5ZXJfY3RybCcpLnJlbW92ZUNsYXNzKCdvbicpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuICAgIFx0fVxyXG4gICAgXHRpZihldmVudC5kYXRhID09IFlULlBsYXllclN0YXRlLkVOREVEKXtcclxuICAgIFx0XHRpZihldmVudC50YXJnZXQuYS5pZCA9PSAncGxheWVyX2xvb3AnKSBvYmoucGxheWVyX2xvb3AucGxheVZpZGVvKCk7XHJcbiAgICBcdFx0ZWxzZSBpZihldmVudC50YXJnZXQuYS5pZCA9PSAncGxheWVyJyl7XHJcbiAgICBcdFx0XHRvYmouaGFzV2F0Y2h2aWRlbyA9IHRydWU7XHJcbiAgICBcdFx0XHQkLmNvb2tpZShcImhhc1dhdGNoX2thc2lib2FuX3ZpZGVvXCIsdHJ1ZSk7XHJcbiAgICBcdFx0XHQkKCcucGxheWVyX2N0cmwnKS5hZGRDbGFzcygnb24nKTtcclxuICAgIFx0XHRcdG9iai5ub3dwYWdlID0gNDtcclxuICAgIFx0XHRcdGNoZWNrbm93cGFnZXNjcm9sbCgpO1xyXG5cdFx0XHRcdCQuYWRkcmVzcy52YWx1ZShcIi9wYWdlXCIrb2JqLm5vd3BhZ2UpO1xyXG4gICAgXHRcdH0gICAgXHRcdFxyXG4gICAgXHR9XHJcbiAgICBcdGlmKG9iai5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSA9PTEpe1xyXG4gICAgXHRcdGlmKCEkKCcucGxheV9idG4nKS5oYXNDbGFzcygnb2ZmJykpICQoJy5wbGF5X2J0bicpLmFkZENsYXNzKCdvZmYnKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpOyAgICBcdFx0XHJcbiAgICBcdH1cclxuICAgIH1cclxuXHRmdW5jdGlvbiBzY3JvbGxfYnRuY2xpY2soKXtcclxuXHRcdG9iai5ub3dwYWdlKz0xO1xyXG5cdFx0Y2hlY2tub3dwYWdlc2Nyb2xsKCk7XHJcblx0XHQkLmFkZHJlc3MudmFsdWUoXCIvcGFnZVwiK29iai5ub3dwYWdlKTtcclxuXHR9XHRcclxuXHRmdW5jdGlvbiBiYW5uZXJmYygpe1xyXG5cdFx0dmFyIF9saSA9ICQodGhpcykuZmluZCgnbGknKSxcclxuXHRcdFx0X2xlbmd0aCA9IF9saS5sZW5ndGgsXHJcblx0XHRcdF9ub3cgPSAtMSxfcHJlID0gLTE7XHJcblxyXG5cdFx0Y2hhbmdlKCk7XHJcblx0XHRmdW5jdGlvbiBjaGFuZ2UoKXtcclxuXHRcdFx0X25vdys9MTtcclxuXHRcdFx0aWYoX25vdz5fbGVuZ3RoLTEpX25vdz0wO1xyXG5cdFx0XHRpZihfcHJlIT0tMSl7XHJcblx0XHRcdFx0X2xpLmVxKF9wcmUpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0X2xpLmVxKF9ub3cpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgX2xpLmVxKF9ub3cpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0X3ByZSA9IF9ub3c7XHJcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtjaGFuZ2UoKTt9LDUwMDApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRmdW5jdGlvbiBzaG93TWVudShfdCl7XHJcblx0XHRpZihfdCl7XHJcblx0XHRcdCQoJy5tZW51ZG9tJykuYWRkQ2xhc3MoJ29uJyk7XHJcblx0XHRcdCQoJy5tZW51JykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdCQoJy5tZW51ZG9tJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHRcdCQoJy5tZW51JykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdH1cclxuXHRmdW5jdGlvbiBhZGRyQ2hhbmdlKCl7XHJcbiAgICBcdHZhciB2YWx1ZSA9ICQuYWRkcmVzcy52YWx1ZSgpO1xyXG5cdFx0c3dpdGNoKHZhbHVlKSB7XHJcblx0XHRcdGNhc2UgJy8nOlxyXG5cdFx0XHRcdG9iai5ub3dwYWdlID0gMTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJy9wYWdlMSc6XHRcdFx0XHRcclxuXHRcdFx0XHRvYmoubm93cGFnZSA9IDE7XHJcblx0XHRcdGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTInOlxyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSAyO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnL3BhZ2UzJzpcclxuICAgICAgICAgICAgICAgIG9iai5ub3dwYWdlID0gMztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJy9wYWdlNCc6XHJcbiAgICAgICAgICAgICAgICBvYmoubm93cGFnZSA9IDQ7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTUnOlxyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSA1O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnL3BhZ2U2JzpcclxuICAgICAgICAgICAgICAgIG9iai5ub3dwYWdlID0gNjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJy9wYWdlNyc6XHJcbiAgICAgICAgICAgICAgICBvYmoubm93cGFnZSA9IDc7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSAxO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHRcdH1cclxuXHRcdGNoZWNrbm93cGFnZSgpO1xyXG5cdFx0JCgnLnBhZ2VfYm94JykuYXR0cignY2xhc3MnLCdwYWdlX2JveCBwZycrb2JqLm5vd3BhZ2UpO1xyXG5cdFx0aWYob2JqLm1vYmlsZSkgJCgnaHRtbCxib2R5JykuYW5pbWF0ZSh7c2Nyb2xsVG9wOiQoJy5wYWdlJyArIG9iai5ub3dwYWdlKS5vZmZzZXQoKS50b3B9LG9iai5mYWRlc3BlZWQpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gb25tb3VzZXdoZWVsZmMoZSl7XHJcbiAgICBcdGlmKCFvYmoubW9iaWxlKXtcclxuICAgIFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGlmKG9iai5jYW53aGVlbCl7XHJcblx0XHRcdFx0b2JqLmNhbndoZWVsID0gZmFsc2U7XHJcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe29iai5jYW53aGVlbD10cnVlO30sb2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0aWYoZS53aGVlbERlbHRhPjApIG9iai5ub3dwYWdlLT0xO1xyXG5cdFx0XHRcdGVsc2Ugb2JqLm5vd3BhZ2UrPTE7XHJcblx0XHRcdFx0Y2hlY2tub3dwYWdlc2Nyb2xsKCk7XHJcblx0XHRcdFx0JC5hZGRyZXNzLnZhbHVlKFwiL3BhZ2VcIitvYmoubm93cGFnZSk7XHJcblx0XHRcdH1cclxuICAgIFx0fVxyXG5cdH1cclxuXHRmdW5jdGlvbiBjaGVja25vd3BhZ2VzY3JvbGwoKXtcclxuXHRcdGlmKG9iai5ub3dwYWdlPDEpIG9iai5ub3dwYWdlPTE7XHJcblx0XHRlbHNlIGlmKG9iai5ub3dwYWdlID49ICQoJy5wYWdlX2JveCAucGFnZScpLmxlbmd0aClvYmoubm93cGFnZSA9ICQoJy5wYWdlX2JveCAucGFnZScpLmxlbmd0aDtcclxuXHJcblx0XHQvL3Njcm9sbF9idG5cclxuXHRcdHZhciBfY2Fuc2hvdyA9IHRydWU7XHJcblx0XHRpZihvYmoubm93cGFnZSA9PSAkKCcucGFnZV9ib3ggLnBhZ2UnKS5sZW5ndGgpIF9jYW5zaG93ID0gZmFsc2U7XHJcblx0XHRlbHNle1xyXG5cdFx0XHQvL2hhc1dhdGNodmlkZW9cclxuXHRcdFx0aWYoIW9iai5oYXNXYXRjaHZpZGVvKXtcclxuXHRcdFx0XHRpZighb2JqLm1vYmlsZSl7XHJcblx0XHRcdFx0XHRpZihvYmoubm93cGFnZT49Myl7XHJcblx0XHRcdFx0XHRcdGlmKG9iai5ub3dwYWdlIT0zKSBhbGVydChvYmoud2FybmluZ3R4dCk7XHJcblx0XHRcdFx0XHRcdG9iai5ub3dwYWdlPTM7XHJcblx0XHRcdFx0XHRcdF9jYW5zaG93PWZhbHNlO1x0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0aWYoX2NhbnNob3cpe1xyXG5cdFx0XHRpZighb2JqLm1vYmlsZSl7XHJcblx0XHRcdFx0aWYoISQoJy5zY3JvbGxfYnRuJykuaGFzQ2xhc3MoJ29uJykpICQoJy5zY3JvbGxfYnRuJykuYWRkQ2xhc3MoJ29uJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHR9XHJcblx0XHR9ZWxzZSAkKCcuc2Nyb2xsX2J0bicpLnJlbW92ZUNsYXNzKCdvbicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0fVxyXG5cdGZ1bmN0aW9uIGNoZWNrbm93cGFnZSgpe1xyXG5cdFx0Ly9wYWdlQW5pXHJcblx0XHRpZihvYmoubm93cGFnZT09Mikgb2JqLnBhZ2UyVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXskKCcucGVyc29uX2FsbCcpLmFkZENsYXNzKCdvbicpO30sb2JqLmZhZGVzcGVlZCk7XHJcblx0XHRlbHNle1xyXG5cdFx0XHRjbGVhclRpbWVvdXQob2JqLnBhZ2UyVGltZW91dCk7XHJcblx0XHRcdCQoJy5wZXJzb25fYWxsJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHR9XHJcblx0XHRpZihvYmoubm93cGFnZT09NSkgb2JqLnBhZ2U1VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXskKCcuaWNvbl9hbGwnKS5hZGRDbGFzcygnb24nKTt9LG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0ZWxzZXtcclxuXHRcdFx0Y2xlYXJUaW1lb3V0KG9iai5wYWdlNVRpbWVvdXQpO1xyXG5cdFx0XHQkKCcuaWNvbl9hbGwnKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdH1cclxuXHJcblx0XHQvL2NoZWNrdmlkZW9cclxuXHRcdGlmKCQoJy5wbGF5X2J0bicpLmhhc0NsYXNzKCdvZmYnKSl7XHJcblx0XHRcdGlmKG9iai5ub3dwYWdlIT0zKXtcclxuXHRcdFx0XHR0cnl7XHJcblx0XHRcdFx0XHRpZihvYmoucGxheWVyLmdldFBsYXllclN0YXRlKCkgPT0xKSAkKCcucGxheWVyX2N0cmwnKS50cmlnZ2VyKFwiY2xpY2tcIik7XHJcblx0XHRcdFx0fWNhdGNoKGVycil7fVx0XHRcdFxyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHR0cnl7XHJcblx0XHRcdFx0XHRpZihvYmoucGxheWVyLmdldFBsYXllclN0YXRlKCkgIT01ICYmIG9iai5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSAhPTEpICQoJy5wbGF5ZXJfY3RybCcpLnRyaWdnZXIoXCJjbGlja1wiKTtcclxuXHRcdFx0XHR9Y2F0Y2goZXJyKXt9XHRcdFx0XHJcblx0XHRcdH1cclxuXHRcdH1cdFx0XHJcblx0fVxyXG4gIFx0ZnVuY3Rpb24gc2hvd0xvYWRpbmcoX3Qpe1xyXG4gIFx0XHRpZihfdCkgJCgnLmxvYWRpbmcnKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcbiAgXHRcdGVsc2UgJCgnLmxvYWRpbmcnKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG4gIFx0fSAgXHRcclxuICBcdGZ1bmN0aW9uIGNoZWNrbW9iaWxlKCl7XHJcbiAgXHRcdGlmKGRldmljZS5tb2JpbGUoKSkgb2JqLm1vYmlsZSA9IHRydWU7XHJcblx0XHRlbHNle1xyXG5cdFx0XHRpZigkKHdpbmRvdykud2lkdGgoKTw9MTAyNCkgb2JqLm1vYmlsZSA9IHRydWU7XHJcblx0XHRcdGVsc2Ugb2JqLm1vYmlsZSA9IGZhbHNlO1x0XHRcclxuXHRcdH1cdFx0XHJcblxyXG5cdFx0Ly9wYWdlIGV2ZW50XHJcblx0XHRpZihvYmoubW9iaWxlKXtcclxuXHRcdFx0JCgnLnBhZ2VfYm94IC5wYWdlMScpLmNzcygnaGVpZ2h0JywkKHdpbmRvdykuaGVpZ2h0KCkpO1xyXG5cdFx0XHQkKCcucGFnZV9ib3ggLnBhZ2UzJykuY3NzKCdoZWlnaHQnLCQod2luZG93KS5oZWlnaHQoKSk7XHJcblx0XHRcdHRyeXtcclxuXHRcdFx0XHRpZihvYmoucGxheWVyX2xvb3AuZ2V0UGxheWVyU3RhdGUoKSA9PTEpIG9iai5wbGF5ZXJfbG9vcC5wYXVzZVZpZGVvKCk7XHJcblx0XHRcdFx0aWYob2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpID09MSkgJCgnLnBsYXllcl9jdHJsJykuYWRkQ2xhc3MoJ29uJyk7XHJcblx0XHRcdFx0ZWxzZSAkKCcucGxheWVyX2N0cmwnKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdFx0fWNhdGNoKGVycil7fVxyXG5cdFx0fWVsc2V7XHJcblx0XHRcdCQoJy5wYWdlX2JveCAucGFnZTEnKS5hdHRyKCdzdHlsZScsJycpO1xyXG5cdFx0XHQkKCcucGFnZV9ib3ggLnBhZ2UzJykuYXR0cignc3R5bGUnLCcnKTtcclxuXHRcdFx0dHJ5e1xyXG5cdFx0XHRcdGlmKCEkKCcucGxheV9idG4nKS5oYXNDbGFzcygnb2ZmJykpIG9iai5wbGF5ZXJfbG9vcC5wbGF5VmlkZW8oKTtcclxuXHRcdFx0XHRlbHNle1xyXG5cdFx0XHRcdFx0b2JqLnBsYXllcl9sb29wLnBhdXNlVmlkZW8oKTtcclxuXHRcdFx0XHRcdCQoJyNwbGF5ZXJfbG9vcCcpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0XHQkKCcucGxheV9idG4nKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZihvYmoucGxheWVyLmdldFBsYXllclN0YXRlKCkgPT0xKXtcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQkKCcjcGxheWVyX2xvb3AnKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRcdFx0JCgnLnBsYXllcl9jdHJsJykucmVtb3ZlQ2xhc3MoJ29uJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1x0XHRcdFx0XHRcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdGlmKCEkKCcucGxheV9idG4nKS5oYXNDbGFzcygnb2ZmJykpICQoJy5wbGF5ZXJfY3RybCcpLnJlbW92ZUNsYXNzKCdvbicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0XHRlbHNlICQoJy5wbGF5ZXJfY3RybCcpLmFkZENsYXNzKCdvbicpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1jYXRjaChlcnIpe31cdFx0XHRcclxuXHRcdFx0Y2hlY2tub3dwYWdlc2Nyb2xsKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly92aWRlbyB3aWR0aCBoZWlnaHRcclxuXHRcdGlmKG9iai5tb2JpbGUpe1xyXG5cdFx0XHRvYmoudmlkZW9XID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLndpZHRoKCk7XHJcblx0XHQgICAgb2JqLnZpZGVvSCA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS5oZWlnaHQoKTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHR2YXIgX3cgPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykud2lkdGgoKSAvICQoJy5wYWdlX2JveCAucGFnZTMnKS5oZWlnaHQoKTtcclxuXHRcdFx0dmFyIF92ID0gNjQwIC8gMzYwO1xyXG5cdFx0XHRpZihfdz5fdil7XHJcblx0XHQgICAgICAgIG9iai52aWRlb1cgPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykud2lkdGgoKTtcclxuXHRcdCAgICAgICAgb2JqLnZpZGVvSCA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS53aWR0aCgpIC8gX3Y7XHJcblx0XHQgICAgfWVsc2UgaWYoX3c8X3Ype1xyXG5cdFx0ICAgIFx0b2JqLnZpZGVvSCA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS5oZWlnaHQoKTtcclxuXHRcdCAgICBcdG9iai52aWRlb1cgPSBvYmoudmlkZW9IICogX3Y7XHJcblx0XHQgICAgfWVsc2UgaWYoX3c9PV92KXtcclxuXHRcdCAgICAgICAgb2JqLnZpZGVvVyA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS53aWR0aCgpO1xyXG5cdFx0ICAgICAgICBvYmoudmlkZW9IID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLmhlaWdodCgpO1xyXG5cdFx0ICAgIH1cdFx0XHRcclxuXHRcdH1cclxuXHRcdCQoJy52aWRlbycpLmNzcyh7J3dpZHRoJzpvYmoudmlkZW9XLCdoZWlnaHQnOm9iai52aWRlb0h9KTtcclxuICBcdH1cclxufSkvL3JlYWR5IGVuZCAgXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==

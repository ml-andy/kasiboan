$(document).ready(function(){function e(){y(),t("player_loop","722u9ZmgVtE",!0),t("player","MaAj77BvA2I",!1)}function a(e){s(!1),h.menuTimeout&&clearTimeout(h.menuTimeout),h.menuTimeout=setTimeout(function(){h.nowpage=e.attr("data-num"),g(),$.address.value("/page"+h.nowpage)},h.fadespeed)}function o(){h.player_loop.pauseVideo(),h.player.playVideo(),$("#player_loop").fadeOut(h.fadespeed),$(".player_ctrl").fadeIn(h.fadespeed),$("#player").fadeIn(h.fadespeed)}function t(e,a,o){var t,p=0;h.mobile&&(p=1,o=!1),t=new YT.Player(e,{height:"100%",width:"100%",videoId:a,playerVars:{controls:p,autoplay:o,enablejsapi:"0",hd:"1",rel:"0",showinfo:"0",modestbranding:"1",cc_load_policy:"1",wmode:"transparent"},events:{onReady:l,onStateChange:n}}),"player_loop"==e?h.player_loop=t:"player"==e&&(h.player=t)}function l(e){h.videohasready+=1,h.videohasready>=2&&(s(!1),setTimeout(function(){f(!1)},h.fadespeed))}function n(e){h.mobile&&(1==h.player.getPlayerState()?$(".player_ctrl").addClass("on").fadeOut(h.fadespeed):$(".player_ctrl").removeClass("on").fadeIn(h.fadespeed)),e.data==YT.PlayerState.ENDED&&("player_loop"==e.target.a.id?h.player_loop.playVideo():"player"==e.target.a.id&&(h.hasWatchvideo=!0,$(".player_ctrl").addClass("on"),p())),1==h.player.getPlayerState()&&($(".play_btn").hasClass("off")||$(".play_btn").addClass("off").fadeOut(h.fadespeed))}function p(){h.nowpage+=1,g(),$.address.value("/page"+h.nowpage)}function d(){function e(){t+=1,t>o-1&&(t=0),l!=-1?(a.eq(l).fadeOut(h.fadespeed),a.eq(t).fadeIn(h.fadespeed)):a.eq(t).fadeIn(h.fadespeed),l=t,setTimeout(function(){e()},5e3)}var a=$(this).find("li"),o=a.length,t=-1,l=-1;e()}function s(e){e?($(".menudom").addClass("on"),$(".menu").fadeIn(h.fadespeed)):($(".menudom").removeClass("on"),$(".menu").fadeOut(h.fadespeed))}function i(){var e=$.address.value();switch(e){case"/":h.nowpage=1;break;case"/page1":h.nowpage=1;break;case"/page2":h.nowpage=2;break;case"/page3":h.nowpage=3;break;case"/page4":h.nowpage=4;break;case"/page5":h.nowpage=5;break;case"/page6":h.nowpage=6;break;case"/page7":h.nowpage=7;break;default:h.nowpage=1}c(),$(".page_box").attr("class","page_box pg"+h.nowpage),h.mobile&&$("html,body").animate({scrollTop:$(".page"+h.nowpage).offset().top},h.fadespeed)}function r(e){h.mobile||(e.preventDefault(),h.canwheel&&(h.canwheel=!1,setTimeout(function(){h.canwheel=!0},h.fadespeed),e.wheelDelta>0?h.nowpage-=1:h.nowpage+=1,g(),$.address.value("/page"+h.nowpage)))}function g(){h.nowpage<1?h.nowpage=1:h.nowpage>=$(".page_box .page").length&&(h.nowpage=$(".page_box .page").length);var e=!0;h.nowpage==$(".page_box .page").length?e=!1:h.hasWatchvideo||h.mobile||h.nowpage>=3&&(3!=h.nowpage&&alert(h.warningtxt),h.nowpage=3,e=!1),e?$(".scroll_btn").hasClass("on")||$(".scroll_btn").addClass("on").fadeIn(h.fadespeed):$(".scroll_btn").removeClass("on").fadeOut(h.fadespeed)}function c(){if(2==h.nowpage?h.page2Timeout=setTimeout(function(){$(".person_all").addClass("on")},h.fadespeed):(clearTimeout(h.page2Timeout),$(".person_all").removeClass("on")),5==h.nowpage?h.page5Timeout=setTimeout(function(){$(".icon_all").addClass("on")},h.fadespeed):(clearTimeout(h.page5Timeout),$(".icon_all").removeClass("on")),$(".play_btn").hasClass("off"))if(3!=h.nowpage)try{1==h.player.getPlayerState()&&$(".player_ctrl").trigger("click")}catch(e){}else try{5!=h.player.getPlayerState()&&1!=h.player.getPlayerState()&&$(".player_ctrl").trigger("click")}catch(e){}}function f(e){e?$(".loading").fadeIn(h.fadespeed):$(".loading").fadeOut(h.fadespeed)}function u(){h.mobile&&($(".scroll_btn").hasClass("inMb")||$(".scroll_btn").addClass("inMb").fadeOut(h.fadespeed))}function y(){if(device.mobile()?h.mobile=!0:$(window).width()<=1024?h.mobile=!0:h.mobile=!1,h.mobile)h.videoW=$(".page_box .page3").width(),h.videoH=$(".page_box .page3").height();else{var e=$(".page_box .page3").width()/$(".page_box .page3").height(),a=640/360;e>a?(h.videoW=$(".page_box .page3").width(),h.videoH=$(".page_box .page3").width()/a):e<a?(h.videoH=$(".page_box .page3").height(),h.videoW=h.videoH*a):windowsize==videosize&&(h.videoW=$(".page_box .page3").width(),h.videoH=$(".page_box .page3").height())}if($(".video").css({width:h.videoW,height:h.videoH}),h.mobile){$(".page_box .page1").css("height",$(window).height()),$(".page_box .page3").css("height",$(window).height());try{1==h.player_loop.getPlayerState()&&h.player_loop.pauseVideo(),1==h.player.getPlayerState()?$(".player_ctrl").addClass("on"):$(".player_ctrl").removeClass("on")}catch(o){}}else{$(".page_box .page1").attr("style",""),$(".page_box .page3").attr("style","");try{$(".play_btn").hasClass("off")?(h.player_loop.pauseVideo(),$("#player_loop").fadeOut(h.fadespeed),$(".play_btn").fadeOut(h.fadespeed)):h.player_loop.playVideo(),1==h.player.getPlayerState()?($("#player_loop").fadeOut(h.fadespeed),$(".player_ctrl").removeClass("on").fadeIn(h.fadespeed)):$(".play_btn").hasClass("off")?$(".player_ctrl").addClass("on").fadeIn(h.fadespeed):$(".player_ctrl").removeClass("on").fadeOut(h.fadespeed)}catch(o){}g()}}var h={wrp:$(".wrapper"),fadespeed:500,canwheel:!0,hasWatchvideo:!1,videohasready:0,videoW:$(window).width(),videoH:$(window).height(),warningtxt:"請先欣賞完景點影片，即可往下繼續瀏覽。",nowpage:1};$(".menua").click(function(){a($(this))}),$(".player_ctrl").click(function(){$(this).hasClass("on")?($(this).removeClass("on"),h.player.playVideo()):($(this).addClass("on"),h.player.pauseVideo())}),$(".play_btn").click(function(){o()}),$(".scroll_btn").click(function(){p()}),$(".page1 .bg").each(d),$(".menubtn").click(function(){s($(this).hasClass("on")?!1:!0)}),$.address.change(i),window.onscroll=u,window.onmousewheel=function(e){r(e)},$(window).resize(y),$(window).load(e)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIndpbmRvd2xvYWQiLCJjaGVja21vYmlsZSIsImNyZWF0ZVZpZGVvIiwibWVudWFDbGljayIsIl9vIiwic2hvd01lbnUiLCJvYmoiLCJtZW51VGltZW91dCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJub3dwYWdlIiwiYXR0ciIsImNoZWNrbm93cGFnZXNjcm9sbCIsImFkZHJlc3MiLCJ2YWx1ZSIsImZhZGVzcGVlZCIsInN0YXJ0VmlkZW8iLCJwbGF5ZXJfbG9vcCIsInBhdXNlVmlkZW8iLCJwbGF5ZXIiLCJwbGF5VmlkZW8iLCJmYWRlT3V0IiwiZmFkZUluIiwiX2lkIiwiX2F1dG9wbGF5IiwiX29iaiIsIl9jb24iLCJtb2JpbGUiLCJZVCIsIlBsYXllciIsImhlaWdodCIsIndpZHRoIiwidmlkZW9JZCIsInBsYXllclZhcnMiLCJjb250cm9scyIsImF1dG9wbGF5IiwiZW5hYmxlanNhcGkiLCJoZCIsInJlbCIsInNob3dpbmZvIiwibW9kZXN0YnJhbmRpbmciLCJjY19sb2FkX3BvbGljeSIsIndtb2RlIiwiZXZlbnRzIiwib25SZWFkeSIsInZpZGVvUmVhZHkiLCJvblN0YXRlQ2hhbmdlIiwib25QbGF5ZXJTdGF0ZUNoYW5nZSIsImV2ZW50IiwidmlkZW9oYXNyZWFkeSIsInNob3dMb2FkaW5nIiwiZ2V0UGxheWVyU3RhdGUiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiZGF0YSIsIlBsYXllclN0YXRlIiwiRU5ERUQiLCJ0YXJnZXQiLCJhIiwiaWQiLCJoYXNXYXRjaHZpZGVvIiwic2Nyb2xsX2J0bmNsaWNrIiwiaGFzQ2xhc3MiLCJiYW5uZXJmYyIsImNoYW5nZSIsIl9ub3ciLCJfbGVuZ3RoIiwiX3ByZSIsIl9saSIsImVxIiwidGhpcyIsImZpbmQiLCJsZW5ndGgiLCJfdCIsImFkZHJDaGFuZ2UiLCJjaGVja25vd3BhZ2UiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwidG9wIiwib25tb3VzZXdoZWVsZmMiLCJlIiwicHJldmVudERlZmF1bHQiLCJjYW53aGVlbCIsIndoZWVsRGVsdGEiLCJfY2Fuc2hvdyIsImFsZXJ0Iiwid2FybmluZ3R4dCIsInBhZ2UyVGltZW91dCIsInBhZ2U1VGltZW91dCIsInRyaWdnZXIiLCJlcnIiLCJ3aW5kb3dPbnNjcm9sbCIsImRldmljZSIsIndpbmRvdyIsInZpZGVvVyIsInZpZGVvSCIsIl93IiwiX3YiLCJ3aW5kb3dzaXplIiwidmlkZW9zaXplIiwiY3NzIiwid3JwIiwiY2xpY2siLCJlYWNoIiwib25zY3JvbGwiLCJvbm1vdXNld2hlZWwiLCJyZXNpemUiLCJsb2FkIl0sIm1hcHBpbmdzIjoiQUFBQUEsRUFBRUMsVUFBVUMsTUFBTSxXQXlDakIsUUFBU0MsS0FDUkMsSUFDQUMsRUFBWSxjQUFjLGVBQWMsR0FDeENBLEVBQVksU0FBUyxlQUFjLEdBSXBDLFFBQVNDLEdBQVdDLEdBQ25CQyxHQUFTLEdBQ05DLEVBQUlDLGFBQWFDLGFBQWFGLEVBQUlDLGFBQ3JDRCxFQUFJQyxZQUFjRSxXQUFXLFdBQzVCSCxFQUFJSSxRQUFVTixFQUFHTyxLQUFLLFlBQ3RCQyxJQUNBZixFQUFFZ0IsUUFBUUMsTUFBTSxRQUFRUixFQUFJSSxVQUMzQkosRUFBSVMsV0FFUCxRQUFTQyxLQUNSVixFQUFJVyxZQUFZQyxhQUNoQlosRUFBSWEsT0FBT0MsWUFDWHZCLEVBQUUsZ0JBQWdCd0IsUUFBUWYsRUFBSVMsV0FDOUJsQixFQUFFLGdCQUFnQnlCLE9BQU9oQixFQUFJUyxXQUM3QmxCLEVBQUUsV0FBV3lCLE9BQU9oQixFQUFJUyxXQUV6QixRQUFTYixHQUFZRSxFQUFHbUIsRUFBSUMsR0FDM0IsR0FBSUMsR0FDQUMsRUFBTyxDQUNScEIsR0FBSXFCLFNBQ05ELEVBQU8sRUFDUEYsR0FBVSxHQUVMQyxFQUFPLEdBQUlHLElBQUdDLE9BQU96QixHQUNuQjBCLE9BQVEsT0FDUkMsTUFBTyxPQUNQQyxRQUFTVCxFQUNUVSxZQUNF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MEcsTUFBTSxXQUFXcEcsRUFBV04sRUFBRXlFLFNBQzFDekUsRUFBRSxnQkFBZ0IwRyxNQUFNLFdBQ3BCMUcsRUFBRXlFLE1BQU1SLFNBQVMsT0FDbkJqRSxFQUFFeUUsTUFBTWpCLFlBQVksTUFDcEIvQyxFQUFJYSxPQUFPQyxjQUdYdkIsRUFBRXlFLE1BQU1sQixTQUFTLE1BQ2pCOUMsRUFBSWEsT0FBT0QsZ0JBR2JyQixFQUFFLGFBQWEwRyxNQUFNLFdBQVd2RixNQUNoQ25CLEVBQUUsZUFBZTBHLE1BQU0sV0FBVzFDLE1BQ2xDaEUsRUFBRSxjQUFjMkcsS0FBS3pDLEdBQ3JCbEUsRUFBRSxZQUFZMEcsTUFBTSxXQUNPbEcsRUFBdkJSLEVBQUV5RSxNQUFNUixTQUFTLE9BQWUsR0FDckIsS0FFZmpFLEVBQUVnQixRQUFRbUQsT0FBT1UsR0FDakJvQixPQUFPVyxTQUFXYixFQUNsQkUsT0FBT1ksYUFBYyxTQUFTekIsR0FBR0QsRUFBZUMsSUFDaERwRixFQUFFaUcsUUFBUWEsT0FBTzFHLEdBQ2pCSixFQUFFaUcsUUFBUWMsS0FBSzVHIiwiZmlsZSI6ImNvbW1vbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcblx0dmFyIG9iaiA9e1xyXG5cdFx0d3JwOiAkKCcud3JhcHBlcicpLFxyXG5cdFx0ZmFkZXNwZWVkOiA1MDAsXHJcblx0XHRjYW53aGVlbDogdHJ1ZSxcclxuXHRcdGhhc1dhdGNodmlkZW86IGZhbHNlLFxyXG5cdFx0dmlkZW9oYXNyZWFkeTogMCxcclxuXHRcdHZpZGVvVzogJCh3aW5kb3cpLndpZHRoKCksXHJcblx0XHR2aWRlb0g6ICQod2luZG93KS5oZWlnaHQoKSxcclxuXHRcdHdhcm5pbmd0eHQ6ICfoq4vlhYjmrKPos57lrozmma/pu57lvbHniYfvvIzljbPlj6/lvoDkuIvnubznuozngI/opr3jgIInLFxyXG5cdFx0bm93cGFnZTogMVxyXG5cdH07XHRcclxuXHJcblx0Ly9Jbml0XHJcblx0Ly8gY2hlY2ttb2JpbGUoKTtcclxuXHRcclxuXHJcblx0Ly9BZGRMaXN0ZW5lclxyXG5cdCQoJy5tZW51YScpLmNsaWNrKGZ1bmN0aW9uKCl7bWVudWFDbGljaygkKHRoaXMpKTt9KTtcclxuXHQkKCcucGxheWVyX2N0cmwnKS5jbGljayhmdW5jdGlvbigpe1xyXG5cdFx0aWYoJCh0aGlzKS5oYXNDbGFzcygnb24nKSl7XHJcblx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHRcdG9iai5wbGF5ZXIucGxheVZpZGVvKCk7XHJcblx0XHR9XHJcblx0XHRlbHNle1xyXG5cdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdvbicpO1xyXG5cdFx0XHRvYmoucGxheWVyLnBhdXNlVmlkZW8oKTtcdFxyXG5cdFx0fVxyXG5cdH0pXHJcblx0JCgnLnBsYXlfYnRuJykuY2xpY2soZnVuY3Rpb24oKXtzdGFydFZpZGVvKCk7fSk7XHJcblx0JCgnLnNjcm9sbF9idG4nKS5jbGljayhmdW5jdGlvbigpe3Njcm9sbF9idG5jbGljaygpO30pO1xyXG5cdCQoJy5wYWdlMSAuYmcnKS5lYWNoKGJhbm5lcmZjKTtcclxuXHQkKCcubWVudWJ0bicpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcblx0XHRpZigkKHRoaXMpLmhhc0NsYXNzKCdvbicpKXNob3dNZW51KGZhbHNlKTtcclxuXHRcdGVsc2Ugc2hvd01lbnUodHJ1ZSk7XHJcblx0fSk7XHJcblx0JC5hZGRyZXNzLmNoYW5nZShhZGRyQ2hhbmdlKTtcclxuXHR3aW5kb3cub25zY3JvbGwgPSB3aW5kb3dPbnNjcm9sbDtcclxuXHR3aW5kb3cub25tb3VzZXdoZWVsPSBmdW5jdGlvbihlKXtvbm1vdXNld2hlZWxmYyhlKTt9XHJcblx0JCh3aW5kb3cpLnJlc2l6ZShjaGVja21vYmlsZSk7XHJcblx0JCh3aW5kb3cpLmxvYWQod2luZG93bG9hZCk7XHJcblx0ZnVuY3Rpb24gd2luZG93bG9hZCgpe1xyXG5cdFx0Y2hlY2ttb2JpbGUoKTtcclxuXHRcdGNyZWF0ZVZpZGVvKCdwbGF5ZXJfbG9vcCcsJzcyMnU5Wm1nVnRFJyx0cnVlKTtcclxuXHRcdGNyZWF0ZVZpZGVvKCdwbGF5ZXInLCdNYUFqNzdCdkEySScsZmFsc2UpO1x0XHRcclxuXHR9XHJcblxyXG5cdC8vRXZlbnRcclxuXHRmdW5jdGlvbiBtZW51YUNsaWNrKF9vKXtcclxuXHRcdHNob3dNZW51KGZhbHNlKTtcclxuXHRcdGlmKG9iai5tZW51VGltZW91dCkgY2xlYXJUaW1lb3V0KG9iai5tZW51VGltZW91dCk7XHJcblx0XHRvYmoubWVudVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0XHRcdG9iai5ub3dwYWdlID0gX28uYXR0cignZGF0YS1udW0nKTtcclxuXHRcdFx0Y2hlY2tub3dwYWdlc2Nyb2xsKCk7XHJcblx0XHRcdCQuYWRkcmVzcy52YWx1ZShcIi9wYWdlXCIrb2JqLm5vd3BhZ2UpO1xyXG5cdFx0fSxvYmouZmFkZXNwZWVkKTtcdFx0XHJcblx0fVxyXG5cdGZ1bmN0aW9uIHN0YXJ0VmlkZW8oKXtcdFx0XHJcblx0XHRvYmoucGxheWVyX2xvb3AucGF1c2VWaWRlbygpO1xyXG5cdFx0b2JqLnBsYXllci5wbGF5VmlkZW8oKTtcdFx0XHJcblx0XHQkKCcjcGxheWVyX2xvb3AnKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0JCgnLnBsYXllcl9jdHJsJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0JCgnI3BsYXllcicpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuXHR9XHJcblx0ZnVuY3Rpb24gY3JlYXRlVmlkZW8oX28sX2lkLF9hdXRvcGxheSl7XHJcblx0XHR2YXIgX29iajtcdFx0XHJcblx0XHR2YXIgX2NvbiA9IDA7XHJcblx0XHRpZihvYmoubW9iaWxlKXtcclxuXHRcdFx0X2NvbiA9IDE7XHJcblx0XHRcdF9hdXRvcGxheT1mYWxzZTtcclxuXHRcdH1cclxuICAgICAgICBfb2JqID0gbmV3IFlULlBsYXllcihfbywge1xyXG4gICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXHJcbiAgICAgICAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAgICAgICAgdmlkZW9JZDogX2lkLFxyXG4gICAgICAgICAgcGxheWVyVmFyczp7XHJcbiAgICAgICAgICAgICdjb250cm9scyc6X2NvbixcclxuICAgICAgICAgICAgJ2F1dG9wbGF5JzpfYXV0b3BsYXksXHJcbiAgICAgICAgICAgICdlbmFibGVqc2FwaSc6JzAnLFxyXG4gICAgICAgICAgICAnaGQnOicxJyxcclxuICAgICAgICAgICAgJ3JlbCc6JzAnLFxyXG4gICAgICAgICAgICAnc2hvd2luZm8nOicwJyxcclxuICAgICAgICAgICAgJ21vZGVzdGJyYW5kaW5nJzonMScsXHJcbiAgICAgICAgICAgICdjY19sb2FkX3BvbGljeSc6JzEnLFxyXG4gICAgICAgICAgICAnd21vZGUnOid0cmFuc3BhcmVudCcgICAgICBcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBldmVudHM6IHtcclxuXHQgICAgICAgICdvblJlYWR5JzogdmlkZW9SZWFkeSxcclxuXHQgICAgICAgICdvblN0YXRlQ2hhbmdlJzogb25QbGF5ZXJTdGF0ZUNoYW5nZVxyXG5cdCAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZihfbyA9PSAncGxheWVyX2xvb3AnKSAgb2JqLnBsYXllcl9sb29wID0gX29iajtcclxuXHRcdGVsc2UgaWYoX28gPT0gJ3BsYXllcicpIG9iai5wbGF5ZXIgPSBfb2JqO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdmlkZW9SZWFkeShldmVudCl7XHJcbiAgICBcdG9iai52aWRlb2hhc3JlYWR5Kz0xO1xyXG4gICAgXHRpZihvYmoudmlkZW9oYXNyZWFkeSA+PTIpe1xyXG4gICAgXHRcdHNob3dNZW51KGZhbHNlKTtcclxuICAgIFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICBcdFx0XHRzaG93TG9hZGluZyhmYWxzZSk7XHJcbiAgICBcdFx0fSxvYmouZmFkZXNwZWVkKTsgICAgXHRcdFxyXG4gICAgXHR9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBvblBsYXllclN0YXRlQ2hhbmdlKGV2ZW50KXtcclxuICAgIFx0aWYob2JqLm1vYmlsZSl7XHJcbiAgICBcdFx0aWYob2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpID09MSl7XHJcbiAgICBcdFx0XHQkKCcucGxheWVyX2N0cmwnKS5hZGRDbGFzcygnb24nKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG4gICAgXHRcdH1lbHNlICQoJy5wbGF5ZXJfY3RybCcpLnJlbW92ZUNsYXNzKCdvbicpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuICAgIFx0fVxyXG4gICAgXHRpZihldmVudC5kYXRhID09IFlULlBsYXllclN0YXRlLkVOREVEKXtcclxuICAgIFx0XHRpZihldmVudC50YXJnZXQuYS5pZCA9PSAncGxheWVyX2xvb3AnKSBvYmoucGxheWVyX2xvb3AucGxheVZpZGVvKCk7XHJcbiAgICBcdFx0ZWxzZSBpZihldmVudC50YXJnZXQuYS5pZCA9PSAncGxheWVyJyl7XHJcbiAgICBcdFx0XHRvYmouaGFzV2F0Y2h2aWRlbyA9IHRydWU7XHJcbiAgICBcdFx0XHQkKCcucGxheWVyX2N0cmwnKS5hZGRDbGFzcygnb24nKTtcclxuICAgIFx0XHRcdHNjcm9sbF9idG5jbGljaygpO1xyXG4gICAgXHRcdH0gICAgXHRcdFxyXG4gICAgXHR9XHJcbiAgICBcdGlmKG9iai5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSA9PTEpe1xyXG4gICAgXHRcdGlmKCEkKCcucGxheV9idG4nKS5oYXNDbGFzcygnb2ZmJykpICQoJy5wbGF5X2J0bicpLmFkZENsYXNzKCdvZmYnKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpOyAgICBcdFx0XHJcbiAgICBcdH1cclxuICAgIFx0XHJcbiAgICB9XHJcblx0ZnVuY3Rpb24gc2Nyb2xsX2J0bmNsaWNrKCl7XHJcblx0XHRvYmoubm93cGFnZSs9MTtcclxuXHRcdGNoZWNrbm93cGFnZXNjcm9sbCgpO1xyXG5cdFx0JC5hZGRyZXNzLnZhbHVlKFwiL3BhZ2VcIitvYmoubm93cGFnZSk7XHJcblx0fVx0XHJcblx0ZnVuY3Rpb24gYmFubmVyZmMoKXtcclxuXHRcdHZhciBfbGkgPSAkKHRoaXMpLmZpbmQoJ2xpJyksXHJcblx0XHRcdF9sZW5ndGggPSBfbGkubGVuZ3RoLFxyXG5cdFx0XHRfbm93ID0gLTEsX3ByZSA9IC0xO1xyXG5cclxuXHRcdGNoYW5nZSgpO1xyXG5cdFx0ZnVuY3Rpb24gY2hhbmdlKCl7XHJcblx0XHRcdF9ub3crPTE7XHJcblx0XHRcdGlmKF9ub3c+X2xlbmd0aC0xKV9ub3c9MDtcclxuXHRcdFx0aWYoX3ByZSE9LTEpe1xyXG5cdFx0XHRcdF9saS5lcShfcHJlKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRcdF9saS5lcShfbm93KS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHRcdFx0XHRcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIF9saS5lcShfbm93KS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdF9wcmUgPSBfbm93O1xyXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Y2hhbmdlKCk7fSw1MDAwKTtcclxuXHRcdH1cclxuXHR9XHJcblx0ZnVuY3Rpb24gc2hvd01lbnUoX3Qpe1xyXG5cdFx0aWYoX3Qpe1xyXG5cdFx0XHQkKCcubWVudWRvbScpLmFkZENsYXNzKCdvbicpO1xyXG5cdFx0XHQkKCcubWVudScpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHQkKCcubWVudWRvbScpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG5cdFx0XHQkKCcubWVudScpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHR9XHJcblx0ZnVuY3Rpb24gYWRkckNoYW5nZSgpe1xyXG4gICAgXHR2YXIgdmFsdWUgPSAkLmFkZHJlc3MudmFsdWUoKTtcclxuXHRcdHN3aXRjaCh2YWx1ZSkge1xyXG5cdFx0XHRjYXNlICcvJzpcclxuXHRcdFx0XHRvYmoubm93cGFnZSA9IDE7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICcvcGFnZTEnOlx0XHRcdFx0XHJcblx0XHRcdFx0b2JqLm5vd3BhZ2UgPSAxO1xyXG5cdFx0XHRicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnL3BhZ2UyJzpcclxuICAgICAgICAgICAgICAgIG9iai5ub3dwYWdlID0gMjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJy9wYWdlMyc6XHJcbiAgICAgICAgICAgICAgICBvYmoubm93cGFnZSA9IDM7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTQnOlxyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSA0O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnL3BhZ2U1JzpcclxuICAgICAgICAgICAgICAgIG9iai5ub3dwYWdlID0gNTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJy9wYWdlNic6XHJcbiAgICAgICAgICAgICAgICBvYmoubm93cGFnZSA9IDY7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTcnOlxyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSA3O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIC8vIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIvXCI7XHJcbiAgICAgICAgICAgICAgICBvYmoubm93cGFnZSA9IDE7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cdFx0fVxyXG5cdFx0Y2hlY2tub3dwYWdlKCk7XHJcblx0XHQkKCcucGFnZV9ib3gnKS5hdHRyKCdjbGFzcycsJ3BhZ2VfYm94IHBnJytvYmoubm93cGFnZSk7XHJcblx0XHRpZihvYmoubW9iaWxlKSAkKCdodG1sLGJvZHknKS5hbmltYXRlKHtzY3JvbGxUb3A6JCgnLnBhZ2UnICsgb2JqLm5vd3BhZ2UpLm9mZnNldCgpLnRvcH0sb2JqLmZhZGVzcGVlZCk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBvbm1vdXNld2hlZWxmYyhlKXtcclxuICAgIFx0aWYoIW9iai5tb2JpbGUpe1xyXG4gICAgXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0aWYob2JqLmNhbndoZWVsKXtcclxuXHRcdFx0XHRvYmouY2Fud2hlZWwgPSBmYWxzZTtcclxuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7b2JqLmNhbndoZWVsPXRydWU7fSxvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0XHRpZihlLndoZWVsRGVsdGE+MCkgb2JqLm5vd3BhZ2UtPTE7XHJcblx0XHRcdFx0ZWxzZSBvYmoubm93cGFnZSs9MTtcclxuXHRcdFx0XHRjaGVja25vd3BhZ2VzY3JvbGwoKTtcclxuXHRcdFx0XHQkLmFkZHJlc3MudmFsdWUoXCIvcGFnZVwiK29iai5ub3dwYWdlKTtcclxuXHRcdFx0fVxyXG4gICAgXHR9XHJcblx0fVxyXG5cdGZ1bmN0aW9uIGNoZWNrbm93cGFnZXNjcm9sbCgpe1xyXG5cdFx0aWYob2JqLm5vd3BhZ2U8MSkgb2JqLm5vd3BhZ2U9MTtcclxuXHRcdGVsc2UgaWYob2JqLm5vd3BhZ2UgPj0gJCgnLnBhZ2VfYm94IC5wYWdlJykubGVuZ3RoKW9iai5ub3dwYWdlID0gJCgnLnBhZ2VfYm94IC5wYWdlJykubGVuZ3RoO1xyXG5cclxuXHRcdC8vc2Nyb2xsX2J0blxyXG5cdFx0dmFyIF9jYW5zaG93ID0gdHJ1ZTtcclxuXHRcdGlmKG9iai5ub3dwYWdlID09ICQoJy5wYWdlX2JveCAucGFnZScpLmxlbmd0aCkgX2NhbnNob3cgPSBmYWxzZTtcclxuXHRcdGVsc2V7XHJcblx0XHRcdC8vaGFzV2F0Y2h2aWRlb1xyXG5cdFx0XHRpZighb2JqLmhhc1dhdGNodmlkZW8pe1xyXG5cdFx0XHRcdGlmKCFvYmoubW9iaWxlKXtcclxuXHRcdFx0XHRcdGlmKG9iai5ub3dwYWdlPj0zKXtcclxuXHRcdFx0XHRcdFx0aWYob2JqLm5vd3BhZ2UhPTMpIGFsZXJ0KG9iai53YXJuaW5ndHh0KTtcclxuXHRcdFx0XHRcdFx0b2JqLm5vd3BhZ2U9MztcclxuXHRcdFx0XHRcdFx0X2NhbnNob3c9ZmFsc2U7XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRpZihfY2Fuc2hvdyl7XHJcblx0XHRcdGlmKCEkKCcuc2Nyb2xsX2J0bicpLmhhc0NsYXNzKCdvbicpKSAkKCcuc2Nyb2xsX2J0bicpLmFkZENsYXNzKCdvbicpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuXHRcdH1lbHNlICQoJy5zY3JvbGxfYnRuJykucmVtb3ZlQ2xhc3MoJ29uJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuXHR9XHJcblx0ZnVuY3Rpb24gY2hlY2tub3dwYWdlKCl7XHJcblx0XHQvL3BhZ2VBbmlcclxuXHRcdGlmKG9iai5ub3dwYWdlPT0yKSBvYmoucGFnZTJUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpeyQoJy5wZXJzb25fYWxsJykuYWRkQ2xhc3MoJ29uJyk7fSxvYmouZmFkZXNwZWVkKTtcclxuXHRcdGVsc2V7XHJcblx0XHRcdGNsZWFyVGltZW91dChvYmoucGFnZTJUaW1lb3V0KTtcclxuXHRcdFx0JCgnLnBlcnNvbl9hbGwnKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdH1cclxuXHRcdGlmKG9iai5ub3dwYWdlPT01KSBvYmoucGFnZTVUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpeyQoJy5pY29uX2FsbCcpLmFkZENsYXNzKCdvbicpO30sb2JqLmZhZGVzcGVlZCk7XHJcblx0XHRlbHNle1xyXG5cdFx0XHRjbGVhclRpbWVvdXQob2JqLnBhZ2U1VGltZW91dCk7XHJcblx0XHRcdCQoJy5pY29uX2FsbCcpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vY2hlY2t2aWRlb1xyXG5cdFx0aWYoJCgnLnBsYXlfYnRuJykuaGFzQ2xhc3MoJ29mZicpKXtcclxuXHRcdFx0aWYob2JqLm5vd3BhZ2UhPTMpe1xyXG5cdFx0XHRcdHRyeXtcclxuXHRcdFx0XHRcdGlmKG9iai5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSA9PTEpICQoJy5wbGF5ZXJfY3RybCcpLnRyaWdnZXIoXCJjbGlja1wiKTtcclxuXHRcdFx0XHR9Y2F0Y2goZXJyKXt9XHRcdFx0XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdHRyeXtcclxuXHRcdFx0XHRcdGlmKG9iai5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSAhPTUgJiYgb2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpICE9MSkgJCgnLnBsYXllcl9jdHJsJykudHJpZ2dlcihcImNsaWNrXCIpO1xyXG5cdFx0XHRcdH1jYXRjaChlcnIpe31cdFx0XHRcclxuXHRcdFx0fVxyXG5cdFx0fVx0XHRcclxuXHR9XHJcbiAgXHRmdW5jdGlvbiBzaG93TG9hZGluZyhfdCl7XHJcbiAgXHRcdGlmKF90KSAkKCcubG9hZGluZycpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuICBcdFx0ZWxzZSAkKCcubG9hZGluZycpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcbiAgXHR9XHJcbiAgXHRmdW5jdGlvbiB3aW5kb3dPbnNjcm9sbCgpe1xyXG4gIFx0XHRpZihvYmoubW9iaWxlKXtcclxuICBcdFx0XHRpZighJCgnLnNjcm9sbF9idG4nKS5oYXNDbGFzcygnaW5NYicpKSAkKCcuc2Nyb2xsX2J0bicpLmFkZENsYXNzKCdpbk1iJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTsgIFx0XHRcdFxyXG4gIFx0XHR9XHJcbiAgXHR9XHJcbiAgXHRmdW5jdGlvbiBjaGVja21vYmlsZSgpe1xyXG4gIFx0XHRpZihkZXZpY2UubW9iaWxlKCkpIG9iai5tb2JpbGUgPSB0cnVlO1xyXG5cdFx0ZWxzZXtcclxuXHRcdFx0aWYoJCh3aW5kb3cpLndpZHRoKCk8PTEwMjQpIG9iai5tb2JpbGUgPSB0cnVlO1xyXG5cdFx0XHRlbHNlIG9iai5tb2JpbGUgPSBmYWxzZTtcdFx0XHJcblx0XHR9XHJcblx0XHQvL3ZpZGVvIHdpZHRoIGhlaWdodFxyXG5cdFx0aWYob2JqLm1vYmlsZSl7XHJcblx0XHRcdG9iai52aWRlb1cgPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykud2lkdGgoKTtcclxuXHRcdCAgICBvYmoudmlkZW9IID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLmhlaWdodCgpO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdHZhciBfdyA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS53aWR0aCgpIC8gJCgnLnBhZ2VfYm94IC5wYWdlMycpLmhlaWdodCgpO1xyXG5cdFx0XHR2YXIgX3YgPSA2NDAgLyAzNjA7XHJcblx0XHRcdGlmKF93Pl92KXtcclxuXHRcdCAgICAgICAgb2JqLnZpZGVvVyA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS53aWR0aCgpO1xyXG5cdFx0ICAgICAgICBvYmoudmlkZW9IID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLndpZHRoKCkgLyBfdjtcclxuXHRcdCAgICB9ZWxzZSBpZihfdzxfdil7XHJcblx0XHQgICAgXHRvYmoudmlkZW9IID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLmhlaWdodCgpO1xyXG5cdFx0ICAgIFx0b2JqLnZpZGVvVyA9IG9iai52aWRlb0ggKiBfdjtcclxuXHRcdCAgICB9ZWxzZSBpZih3aW5kb3dzaXplPT12aWRlb3NpemUpe1xyXG5cdFx0ICAgICAgICBvYmoudmlkZW9XID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLndpZHRoKCk7XHJcblx0XHQgICAgICAgIG9iai52aWRlb0ggPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykuaGVpZ2h0KCk7XHJcblx0XHQgICAgfVx0XHRcdFxyXG5cdFx0fVxyXG5cdFx0JCgnLnZpZGVvJykuY3NzKHsnd2lkdGgnOm9iai52aWRlb1csJ2hlaWdodCc6b2JqLnZpZGVvSH0pO1xyXG5cclxuXHRcdC8vcGFnZSBldmVudFxyXG5cdFx0aWYob2JqLm1vYmlsZSl7XHJcblx0XHRcdCQoJy5wYWdlX2JveCAucGFnZTEnKS5jc3MoJ2hlaWdodCcsJCh3aW5kb3cpLmhlaWdodCgpKTtcclxuXHRcdFx0JCgnLnBhZ2VfYm94IC5wYWdlMycpLmNzcygnaGVpZ2h0JywkKHdpbmRvdykuaGVpZ2h0KCkpO1xyXG5cdFx0XHR0cnl7XHJcblx0XHRcdFx0aWYob2JqLnBsYXllcl9sb29wLmdldFBsYXllclN0YXRlKCkgPT0xKSBvYmoucGxheWVyX2xvb3AucGF1c2VWaWRlbygpO1xyXG5cdFx0XHRcdGlmKG9iai5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSA9PTEpICQoJy5wbGF5ZXJfY3RybCcpLmFkZENsYXNzKCdvbicpO1xyXG5cdFx0XHRcdGVsc2UgJCgnLnBsYXllcl9jdHJsJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHRcdH1jYXRjaChlcnIpe31cdFx0XHRcclxuXHRcdFx0Ly8gJCgnaHRtbCxib2R5JykuYW5pbWF0ZSh7c2Nyb2xsVG9wOiQoJy5wYWdlJyArIG9iai5ub3dwYWdlKS5vZmZzZXQoKS50b3B9LG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdCQoJy5wYWdlX2JveCAucGFnZTEnKS5hdHRyKCdzdHlsZScsJycpO1xyXG5cdFx0XHQkKCcucGFnZV9ib3ggLnBhZ2UzJykuYXR0cignc3R5bGUnLCcnKTtcclxuXHRcdFx0dHJ5e1xyXG5cdFx0XHRcdGlmKCEkKCcucGxheV9idG4nKS5oYXNDbGFzcygnb2ZmJykpIG9iai5wbGF5ZXJfbG9vcC5wbGF5VmlkZW8oKTtcclxuXHRcdFx0XHRlbHNle1xyXG5cdFx0XHRcdFx0b2JqLnBsYXllcl9sb29wLnBhdXNlVmlkZW8oKTtcclxuXHRcdFx0XHRcdCQoJyNwbGF5ZXJfbG9vcCcpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0XHQkKCcucGxheV9idG4nKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZihvYmoucGxheWVyLmdldFBsYXllclN0YXRlKCkgPT0xKXtcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQkKCcjcGxheWVyX2xvb3AnKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRcdFx0JCgnLnBsYXllcl9jdHJsJykucmVtb3ZlQ2xhc3MoJ29uJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1x0XHRcdFx0XHRcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdGlmKCEkKCcucGxheV9idG4nKS5oYXNDbGFzcygnb2ZmJykpICQoJy5wbGF5ZXJfY3RybCcpLnJlbW92ZUNsYXNzKCdvbicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0XHRlbHNlICQoJy5wbGF5ZXJfY3RybCcpLmFkZENsYXNzKCdvbicpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1jYXRjaChlcnIpe31cdFx0XHRcclxuXHRcdFx0Y2hlY2tub3dwYWdlc2Nyb2xsKCk7XHJcblx0XHR9XHJcbiAgXHR9XHJcbn0pLy9yZWFkeSBlbmQgIFxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=

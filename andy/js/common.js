$(document).ready(function(){function e(){f(),h.mobile&&(p(!1),setTimeout(function(){g(!1)},h.fadespeed)),t("player_loop",h.videoID_loop,!0),t("player",h.videoID_online,!1)}function a(e){p(!1),$(".scroll_btn").hasClass("inMb")||$(".scroll_btn").addClass("inMb").fadeOut(h.fadespeed),h.menuTimeout&&clearTimeout(h.menuTimeout),h.menuTimeout=setTimeout(function(){h.nowpage=e.attr("data-num"),r(),$.address.value("/page"+h.nowpage)},h.fadespeed)}function o(){h.hasWatchvideo=!0,$.cookie("hasWatch_kasiboan_video",!0),h.player_loop.pauseVideo(),h.player.playVideo(),$("#player_loop").fadeOut(h.fadespeed),$(".player_ctrl").fadeIn(h.fadespeed),$("#player").fadeIn(h.fadespeed)}function t(e,a,o){var t,d=0;h.mobile&&(d=1,o=!1),t=new YT.Player(e,{height:"100%",width:"100%",videoId:a,playerVars:{controls:d,autoplay:o,enablejsapi:"0",hd:"1",rel:"0",showinfo:"0",modestbranding:"1",cc_load_policy:"1",wmode:"transparent"},events:{onReady:l,onStateChange:n}}),"player_loop"==e?h.player_loop=t:"player"==e&&(h.player=t)}function l(e){"player_loop"==e.target.a.id&&h.player_loop.mute(),h.videohasready+=1,h.videohasready>=2&&(p(!1),setTimeout(function(){g(!1)},h.fadespeed))}function n(e){h.mobile&&(1==h.player.getPlayerState()?$(".player_ctrl").addClass("on").fadeOut(h.fadespeed):$(".player_ctrl").removeClass("on").fadeIn(h.fadespeed)),e.data==YT.PlayerState.ENDED&&("player_loop"==e.target.a.id?h.player_loop.playVideo():"player"==e.target.a.id&&($(".player_ctrl").addClass("on"),h.nowpage=4,r(),$.address.value("/page"+h.nowpage))),1==h.player.getPlayerState()&&(h.hasWatchvideo=!0,$.cookie("hasWatch_kasiboan_video",!0),$(".menubtn").fadeIn(h.fadespeed),h.mobile&&$(".pgm").fadeIn(),$(".play_btn").hasClass("off")||$(".play_btn").addClass("off").fadeOut(h.fadespeed))}function d(){function e(){t+=1,t>o-1&&(t=0),l!=-1?(a.eq(l).fadeOut(h.fadespeed),a.eq(t).fadeIn(h.fadespeed)):a.eq(t).fadeIn(h.fadespeed),l=t,setTimeout(function(){e()},5e3)}var a=$(this).find("li"),o=a.length,t=-1,l=-1;e()}function p(e){e?($(".menudom").addClass("on"),$(".menu").fadeIn(h.fadespeed)):($(".menudom").removeClass("on"),$(".menu").fadeOut(h.fadespeed))}function i(){var e=$.address.value();switch(e){case"/":h.nowpage=1;break;case"/page1":h.nowpage=1;break;case"/page2":h.nowpage=2;break;case"/page3":h.nowpage=3;break;case"/page4":h.nowpage=4;break;case"/page5":h.nowpage=5;break;case"/page6":h.nowpage=6;break;case"/page7":h.nowpage=7;break;default:h.nowpage=1}c(),$(".page_box").attr("class","page_box pg"+h.nowpage),h.mobile&&$("html,body").animate({scrollTop:$(".page"+h.nowpage).offset().top},h.fadespeed)}function s(e){$(".scroll_btn").hasClass("inMb")||$(".scroll_btn").addClass("inMb").fadeOut(h.fadespeed),h.mobile?console.log("cccc"):(e.preventDefault(),console.log("aaa"),h.canwheel&&(h.canwheel=!1,console.log("bbb"),clearTimeout(h.canwheeltimeout),h.canwheeltimeout=setTimeout(function(){h.canwheel=!0},2e3),e.wheelDelta>0?h.nowpage-=1:h.nowpage+=1,r(),$.address.value("/page"+h.nowpage)))}function r(){h.nowpage<1?h.nowpage=1:h.nowpage>=$(".page_box .page").length&&(h.nowpage=$(".page_box .page").length),h.hasWatchvideo||h.mobile||h.nowpage>=3&&(3!=h.nowpage&&alert(h.warningtxt),h.nowpage=3)}function c(){if(2==h.nowpage?h.page2Timeout=setTimeout(function(){$(".person_all").addClass("on")},h.fadespeed):(clearTimeout(h.page2Timeout),$(".person_all").removeClass("on")),5==h.nowpage?h.page5Timeout=setTimeout(function(){$(".icon_all").addClass("on")},h.fadespeed):(clearTimeout(h.page5Timeout),$(".icon_all").removeClass("on")),$(".play_btn").hasClass("off"))if(3!=h.nowpage)try{1==h.player.getPlayerState()&&$(".player_ctrl").trigger("click")}catch(e){}else try{5!=h.player.getPlayerState()&&1!=h.player.getPlayerState()&&$(".player_ctrl").trigger("click")}catch(e){}}function g(e){e?$(".loading").fadeIn(h.fadespeed):$(".loading").fadeOut(h.fadespeed)}function f(){if(device.mobile()?h.mobile=!0:$(window).width()<=1024?h.mobile=!0:h.mobile=!1,h.mobile){$(".page_box .page1").css("height",$(window).height()),$(".page_box .page3").css("height",$(window).height());try{1==h.player_loop.getPlayerState()&&h.player_loop.pauseVideo(),1==h.player.getPlayerState()?$(".player_ctrl").addClass("on"):$(".player_ctrl").removeClass("on")}catch(e){}}else{$(".page_box .page1").attr("style",""),$(".page_box .page3").attr("style","");try{$(".play_btn").hasClass("off")?(h.player_loop.pauseVideo(),$("#player_loop").fadeOut(h.fadespeed),$(".play_btn").fadeOut(h.fadespeed)):h.player_loop.playVideo(),1==h.player.getPlayerState()?($("#player_loop").fadeOut(h.fadespeed),$(".player_ctrl").removeClass("on").fadeIn(h.fadespeed)):$(".play_btn").hasClass("off")?$(".player_ctrl").addClass("on").fadeIn(h.fadespeed):$(".player_ctrl").removeClass("on").fadeOut(h.fadespeed)}catch(e){}r()}if(h.mobile)h.videoW=$(".page_box .page3").width(),h.videoH=$(".page_box .page3").height();else{var a=$(".page_box .page3").width()/$(".page_box .page3").height(),o=640/360;a>o?(h.videoW=$(".page_box .page3").width(),h.videoH=$(".page_box .page3").width()/o):a<o?(h.videoH=$(".page_box .page3").height(),h.videoW=h.videoH*o):a==o&&(h.videoW=$(".page_box .page3").width(),h.videoH=$(".page_box .page3").height())}$(".video").css({width:h.videoW,height:h.videoH})}var h={wrp:$(".wrapper"),fadespeed:500,canwheel:!0,hasWatchvideo:!1,videohasready:0,videoW:$(window).width(),videoH:$(window).height(),warningtxt:"請先欣賞完景點影片，即可往下繼續瀏覽。",videoID_loop:"722u9ZmgVtE",videoID_online:"eCiRnxgyLRk",nowpage:1};device.mobile()?h.mobile=!0:$(window).width()<=1024?h.mobile=!0:h.mobile=!1,null!=$.cookie("hasWatch_kasiboan_video")&&(h.hasWatchvideo=$.cookie("hasWatch_kasiboan_video"),"true"==h.hasWatchvideo&&($(".menubtn").fadeIn(h.fadespeed),h.mobile&&$(".pgm").fadeIn())),$(window).on("touchstart",function(){console.log("touchstart"),h.mobile&&($(".scroll_btn").hasClass("inMb")||$(".scroll_btn").addClass("inMb").fadeOut(h.fadespeed))}),$(".menua").click(function(){a($(this))}),$(".player_ctrl").click(function(){$(this).hasClass("on")?($(this).removeClass("on"),h.player.playVideo()):($(this).addClass("on"),h.player.pauseVideo())}),$(".play_btn").click(function(){o()}),$(".page1 .bg").each(d),$(".menubtn").click(function(){p($(this).hasClass("on")?!1:!0)}),$.address.change(i),window.onmousewheel=function(e){s(e)},$(window).resize(f),$(window).load(e)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIndpbmRvd2xvYWQiLCJjaGVja21vYmlsZSIsIm9iaiIsIm1vYmlsZSIsInNob3dNZW51Iiwic2V0VGltZW91dCIsInNob3dMb2FkaW5nIiwiZmFkZXNwZWVkIiwiY3JlYXRlVmlkZW8iLCJ2aWRlb0lEX2xvb3AiLCJ2aWRlb0lEX29ubGluZSIsIm1lbnVhQ2xpY2siLCJfbyIsImhhc0NsYXNzIiwiYWRkQ2xhc3MiLCJmYWRlT3V0IiwibWVudVRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJub3dwYWdlIiwiYXR0ciIsImNoZWNrbm93cGFnZXNjcm9sbCIsImFkZHJlc3MiLCJ2YWx1ZSIsInN0YXJ0VmlkZW8iLCJoYXNXYXRjaHZpZGVvIiwiY29va2llIiwicGxheWVyX2xvb3AiLCJwYXVzZVZpZGVvIiwicGxheWVyIiwicGxheVZpZGVvIiwiZmFkZUluIiwiX2lkIiwiX2F1dG9wbGF5IiwiX29iaiIsIl9jb24iLCJZVCIsIlBsYXllciIsImhlaWdodCIsIndpZHRoIiwidmlkZW9JZCIsInBsYXllclZhcnMiLCJjb250cm9scyIsImF1dG9wbGF5IiwiZW5hYmxlanNhcGkiLCJoZCIsInJlbCIsInNob3dpbmZvIiwibW9kZXN0YnJhbmRpbmciLCJjY19sb2FkX3BvbGljeSIsIndtb2RlIiwiZXZlbnRzIiwib25SZWFkeSIsInZpZGVvUmVhZHkiLCJvblN0YXRlQ2hhbmdlIiwib25QbGF5ZXJTdGF0ZUNoYW5nZSIsImV2ZW50IiwidGFyZ2V0IiwiYSIsImlkIiwibXV0ZSIsInZpZGVvaGFzcmVhZHkiLCJnZXRQbGF5ZXJTdGF0ZSIsInJlbW92ZUNsYXNzIiwiZGF0YSIsIlBsYXllclN0YXRlIiwiRU5ERUQiLCJiYW5uZXJmYyIsImNoYW5nZSIsIl9ub3ciLCJfbGVuZ3RoIiwiX3ByZSIsIl9saSIsImVxIiwidGhpcyIsImZpbmQiLCJsZW5ndGgiLCJfdCIsImFkZHJDaGFuZ2UiLCJjaGVja25vd3BhZ2UiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwidG9wIiwib25tb3VzZXdoZWVsZmMiLCJlIiwiY29uc29sZSIsImxvZyIsInByZXZlbnREZWZhdWx0IiwiY2Fud2hlZWwiLCJjYW53aGVlbHRpbWVvdXQiLCJ3aGVlbERlbHRhIiwiYWxlcnQiLCJ3YXJuaW5ndHh0IiwicGFnZTJUaW1lb3V0IiwicGFnZTVUaW1lb3V0IiwidHJpZ2dlciIsImVyciIsImRldmljZSIsIndpbmRvdyIsImNzcyIsInZpZGVvVyIsInZpZGVvSCIsIl93IiwiX3YiLCJ3cnAiLCJvbiIsImNsaWNrIiwiZWFjaCIsIm9ubW91c2V3aGVlbCIsInJlc2l6ZSIsImxvYWQiXSwibWFwcGluZ3MiOiJBQUFBQSxFQUFFQyxVQUFVQyxNQUFNLFdBeURqQixRQUFTQyxLQUNSQyxJQUNHQyxFQUFJQyxTQUNOQyxHQUFTLEdBQ05DLFdBQVcsV0FBV0MsR0FBWSxJQUFTSixFQUFJSyxZQUVuREMsRUFBWSxjQUFjTixFQUFJTyxjQUFhLEdBQzNDRCxFQUFZLFNBQVNOLEVBQUlRLGdCQUFlLEdBSXpDLFFBQVNDLEdBQVdDLEdBQ25CUixHQUFTLEdBQ0xQLEVBQUUsZUFBZWdCLFNBQVMsU0FBU2hCLEVBQUUsZUFBZWlCLFNBQVMsUUFBUUMsUUFBUWIsRUFBSUssV0FDbEZMLEVBQUljLGFBQWFDLGFBQWFmLEVBQUljLGFBQ3JDZCxFQUFJYyxZQUFjWCxXQUFXLFdBQzVCSCxFQUFJZ0IsUUFBVU4sRUFBR08sS0FBSyxZQUN0QkMsSUFDQXZCLEVBQUV3QixRQUFRQyxNQUFNLFFBQVFwQixFQUFJZ0IsVUFDM0JoQixFQUFJSyxXQUVQLFFBQVNnQixLQUNSckIsRUFBSXNCLGVBQWdCLEVBQ2pCM0IsRUFBRTRCLE9BQU8sMkJBQTBCLEdBQ3RDdkIsRUFBSXdCLFlBQVlDLGFBQ2hCekIsRUFBSTBCLE9BQU9DLFlBQ1hoQyxFQUFFLGdCQUFnQmtCLFFBQVFiLEVBQUlLLFdBQzlCVixFQUFFLGdCQUFnQmlDLE9BQU81QixFQUFJ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UyxPQUFlLEdBQ3JCLEtBRWZoQixFQUFFd0IsUUFBUThDLE9BQU9VLEdBQ2pCcUIsT0FBT1UsYUFBYyxTQUFTeEIsR0FBR0QsRUFBZUMsSUFDaER2RixFQUFFcUcsUUFBUVcsT0FBTzVHLEdBQ2pCSixFQUFFcUcsUUFBUVksS0FBSzlHIiwiZmlsZSI6ImNvbW1vbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcblx0Ly9Jbml0XHJcblx0dmFyIG9iaiA9e1xyXG5cdFx0d3JwOiAkKCcud3JhcHBlcicpLFxyXG5cdFx0ZmFkZXNwZWVkOiA1MDAsXHJcblx0XHRjYW53aGVlbDogdHJ1ZSxcclxuXHRcdGhhc1dhdGNodmlkZW86IGZhbHNlLFxyXG5cdFx0dmlkZW9oYXNyZWFkeTogMCxcclxuXHRcdHZpZGVvVzogJCh3aW5kb3cpLndpZHRoKCksXHJcblx0XHR2aWRlb0g6ICQod2luZG93KS5oZWlnaHQoKSxcclxuXHRcdHdhcm5pbmd0eHQ6ICfoq4vlhYjmrKPos57lrozmma/pu57lvbHniYfvvIzljbPlj6/lvoDkuIvnubznuozngI/opr3jgIInLFxyXG5cdFx0dmlkZW9JRF9sb29wOic3MjJ1OVptZ1Z0RScsXHJcblx0XHR2aWRlb0lEX29ubGluZTonZUNpUm54Z3lMUmsnLFxyXG5cdFx0bm93cGFnZTogMVxyXG5cdH07XHJcblx0aWYoZGV2aWNlLm1vYmlsZSgpKSBvYmoubW9iaWxlID0gdHJ1ZTtcclxuXHRlbHNle1xyXG5cdFx0aWYoJCh3aW5kb3cpLndpZHRoKCk8PTEwMjQpIG9iai5tb2JpbGUgPSB0cnVlO1xyXG5cdFx0ZWxzZSBvYmoubW9iaWxlID0gZmFsc2U7XHRcdFxyXG5cdH1cclxuXHRpZigkLmNvb2tpZShcImhhc1dhdGNoX2thc2lib2FuX3ZpZGVvXCIpIT1udWxsKXtcclxuXHRcdG9iai5oYXNXYXRjaHZpZGVvPSQuY29va2llKFwiaGFzV2F0Y2hfa2FzaWJvYW5fdmlkZW9cIik7XHJcblx0XHRpZihvYmouaGFzV2F0Y2h2aWRlbz09J3RydWUnKXtcclxuXHRcdFx0JCgnLm1lbnVidG4nKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdGlmKG9iai5tb2JpbGUpICQoJy5wZ20nKS5mYWRlSW4oKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vQWRkTGlzdGVuZXJcclxuXHQkKHdpbmRvdykub24oXCJ0b3VjaHN0YXJ0XCIsZnVuY3Rpb24oKXtcclxuXHRcdGNvbnNvbGUubG9nKCd0b3VjaHN0YXJ0Jyk7XHJcblx0XHRpZihvYmoubW9iaWxlKXtcclxuICBcdFx0XHRpZighJCgnLnNjcm9sbF9idG4nKS5oYXNDbGFzcygnaW5NYicpKSAkKCcuc2Nyb2xsX2J0bicpLmFkZENsYXNzKCdpbk1iJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuICBcdFx0fVxyXG5cdH0pO1xyXG5cdCQoJy5tZW51YScpLmNsaWNrKGZ1bmN0aW9uKCl7bWVudWFDbGljaygkKHRoaXMpKTt9KTtcclxuXHQkKCcucGxheWVyX2N0cmwnKS5jbGljayhmdW5jdGlvbigpe1xyXG5cdFx0aWYoJCh0aGlzKS5oYXNDbGFzcygnb24nKSl7XHJcblx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHRcdG9iai5wbGF5ZXIucGxheVZpZGVvKCk7XHJcblx0XHR9XHJcblx0XHRlbHNle1xyXG5cdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdvbicpO1xyXG5cdFx0XHRvYmoucGxheWVyLnBhdXNlVmlkZW8oKTtcdFxyXG5cdFx0fVxyXG5cdH0pXHJcblx0JCgnLnBsYXlfYnRuJykuY2xpY2soZnVuY3Rpb24oKXtzdGFydFZpZGVvKCk7fSk7XHJcblx0Ly8gJCgnLnNjcm9sbF9idG4nKS5jbGljayhmdW5jdGlvbigpe3Njcm9sbF9idG5jbGljaygpO30pO1xyXG5cdCQoJy5wYWdlMSAuYmcnKS5lYWNoKGJhbm5lcmZjKTtcclxuXHQkKCcubWVudWJ0bicpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcblx0XHRpZigkKHRoaXMpLmhhc0NsYXNzKCdvbicpKXNob3dNZW51KGZhbHNlKTtcclxuXHRcdGVsc2Ugc2hvd01lbnUodHJ1ZSk7XHJcblx0fSk7XHJcblx0JC5hZGRyZXNzLmNoYW5nZShhZGRyQ2hhbmdlKTtcclxuXHR3aW5kb3cub25tb3VzZXdoZWVsPSBmdW5jdGlvbihlKXtvbm1vdXNld2hlZWxmYyhlKTt9XHJcblx0JCh3aW5kb3cpLnJlc2l6ZShjaGVja21vYmlsZSk7XHJcblx0JCh3aW5kb3cpLmxvYWQod2luZG93bG9hZCk7XHJcblx0ZnVuY3Rpb24gd2luZG93bG9hZCgpe1xyXG5cdFx0Y2hlY2ttb2JpbGUoKTtcclxuXHRcdGlmKG9iai5tb2JpbGUpe1xyXG5cdFx0XHRzaG93TWVudShmYWxzZSk7XHJcbiAgICBcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe3Nob3dMb2FkaW5nKGZhbHNlKTt9LG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0fVxyXG5cdFx0Y3JlYXRlVmlkZW8oJ3BsYXllcl9sb29wJyxvYmoudmlkZW9JRF9sb29wLHRydWUpO1xyXG5cdFx0Y3JlYXRlVmlkZW8oJ3BsYXllcicsb2JqLnZpZGVvSURfb25saW5lLGZhbHNlKTtcclxuXHR9XHJcblxyXG5cdC8vRXZlbnRcclxuXHRmdW5jdGlvbiBtZW51YUNsaWNrKF9vKXtcclxuXHRcdHNob3dNZW51KGZhbHNlKTtcclxuXHRcdGlmKCEkKCcuc2Nyb2xsX2J0bicpLmhhc0NsYXNzKCdpbk1iJykpICQoJy5zY3JvbGxfYnRuJykuYWRkQ2xhc3MoJ2luTWInKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0aWYob2JqLm1lbnVUaW1lb3V0KSBjbGVhclRpbWVvdXQob2JqLm1lbnVUaW1lb3V0KTtcclxuXHRcdG9iai5tZW51VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHRcdFx0b2JqLm5vd3BhZ2UgPSBfby5hdHRyKCdkYXRhLW51bScpO1xyXG5cdFx0XHRjaGVja25vd3BhZ2VzY3JvbGwoKTtcclxuXHRcdFx0JC5hZGRyZXNzLnZhbHVlKFwiL3BhZ2VcIitvYmoubm93cGFnZSk7XHJcblx0XHR9LG9iai5mYWRlc3BlZWQpO1x0XHRcclxuXHR9XHJcblx0ZnVuY3Rpb24gc3RhcnRWaWRlbygpe1x0XHRcclxuXHRcdG9iai5oYXNXYXRjaHZpZGVvID0gdHJ1ZTtcclxuICAgIFx0JC5jb29raWUoXCJoYXNXYXRjaF9rYXNpYm9hbl92aWRlb1wiLHRydWUpO1xyXG5cdFx0b2JqLnBsYXllcl9sb29wLnBhdXNlVmlkZW8oKTtcclxuXHRcdG9iai5wbGF5ZXIucGxheVZpZGVvKCk7XHRcdFxyXG5cdFx0JCgnI3BsYXllcl9sb29wJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuXHRcdCQoJy5wbGF5ZXJfY3RybCcpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuXHRcdCQoJyNwbGF5ZXInKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcblx0fVxyXG5cdGZ1bmN0aW9uIGNyZWF0ZVZpZGVvKF9vLF9pZCxfYXV0b3BsYXkpe1xyXG5cdFx0dmFyIF9vYmo7XHRcdFxyXG5cdFx0dmFyIF9jb24gPSAwO1xyXG5cdFx0aWYob2JqLm1vYmlsZSl7XHJcblx0XHRcdF9jb24gPSAxO1xyXG5cdFx0XHRfYXV0b3BsYXk9ZmFsc2U7XHJcblx0XHR9XHJcbiAgICAgICAgX29iaiA9IG5ldyBZVC5QbGF5ZXIoX28sIHtcclxuICAgICAgICAgIGhlaWdodDogJzEwMCUnLFxyXG4gICAgICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgICAgIHZpZGVvSWQ6IF9pZCxcclxuICAgICAgICAgIHBsYXllclZhcnM6e1xyXG4gICAgICAgICAgICAnY29udHJvbHMnOl9jb24sXHJcbiAgICAgICAgICAgICdhdXRvcGxheSc6X2F1dG9wbGF5LFxyXG4gICAgICAgICAgICAnZW5hYmxlanNhcGknOicwJyxcclxuICAgICAgICAgICAgJ2hkJzonMScsXHJcbiAgICAgICAgICAgICdyZWwnOicwJyxcclxuICAgICAgICAgICAgJ3Nob3dpbmZvJzonMCcsXHJcbiAgICAgICAgICAgICdtb2Rlc3RicmFuZGluZyc6JzEnLFxyXG4gICAgICAgICAgICAnY2NfbG9hZF9wb2xpY3knOicxJyxcclxuICAgICAgICAgICAgJ3dtb2RlJzondHJhbnNwYXJlbnQnICAgICAgXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZXZlbnRzOiB7XHJcblx0ICAgICAgICAnb25SZWFkeSc6IHZpZGVvUmVhZHksXHJcblx0ICAgICAgICAnb25TdGF0ZUNoYW5nZSc6IG9uUGxheWVyU3RhdGVDaGFuZ2VcclxuXHQgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYoX28gPT0gJ3BsYXllcl9sb29wJykgIG9iai5wbGF5ZXJfbG9vcCA9IF9vYmo7XHJcblx0XHRlbHNlIGlmKF9vID09ICdwbGF5ZXInKSBvYmoucGxheWVyID0gX29iajtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHZpZGVvUmVhZHkoZXZlbnQpe1xyXG4gICAgXHRpZihldmVudC50YXJnZXQuYS5pZCA9PSAncGxheWVyX2xvb3AnKSBvYmoucGxheWVyX2xvb3AubXV0ZSgpO1xyXG4gICAgXHRvYmoudmlkZW9oYXNyZWFkeSs9MTtcclxuICAgIFx0aWYob2JqLnZpZGVvaGFzcmVhZHkgPj0yKXtcclxuICAgIFx0XHRzaG93TWVudShmYWxzZSk7XHJcbiAgICBcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgXHRcdFx0c2hvd0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgXHRcdH0sb2JqLmZhZGVzcGVlZCk7ICAgIFx0XHRcclxuICAgIFx0fVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gb25QbGF5ZXJTdGF0ZUNoYW5nZShldmVudCl7XHJcbiAgICBcdGlmKG9iai5tb2JpbGUpe1xyXG4gICAgXHRcdGlmKG9iai5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSA9PTEpe1xyXG4gICAgXHRcdFx0JCgnLnBsYXllcl9jdHJsJykuYWRkQ2xhc3MoJ29uJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuICAgIFx0XHR9ZWxzZSAkKCcucGxheWVyX2N0cmwnKS5yZW1vdmVDbGFzcygnb24nKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcbiAgICBcdH1cclxuICAgIFx0aWYoZXZlbnQuZGF0YSA9PSBZVC5QbGF5ZXJTdGF0ZS5FTkRFRCl7XHJcbiAgICBcdFx0aWYoZXZlbnQudGFyZ2V0LmEuaWQgPT0gJ3BsYXllcl9sb29wJykgb2JqLnBsYXllcl9sb29wLnBsYXlWaWRlbygpO1xyXG4gICAgXHRcdGVsc2UgaWYoZXZlbnQudGFyZ2V0LmEuaWQgPT0gJ3BsYXllcicpe1xyXG4gICAgXHRcdFx0Ly8gb2JqLmhhc1dhdGNodmlkZW8gPSB0cnVlO1xyXG4gICAgXHRcdFx0Ly8gJC5jb29raWUoXCJoYXNXYXRjaF9rYXNpYm9hbl92aWRlb1wiLHRydWUpO1xyXG4gICAgXHRcdFx0Ly8gJCgnLm1lbnVidG4nKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcbiAgICBcdFx0XHQvLyBpZihvYmoubW9iaWxlKSAkKCcucGdtJykuZmFkZUluKCk7XHJcbiAgICBcdFx0XHQkKCcucGxheWVyX2N0cmwnKS5hZGRDbGFzcygnb24nKTtcclxuICAgIFx0XHRcdG9iai5ub3dwYWdlID0gNDtcclxuICAgIFx0XHRcdGNoZWNrbm93cGFnZXNjcm9sbCgpO1xyXG5cdFx0XHRcdCQuYWRkcmVzcy52YWx1ZShcIi9wYWdlXCIrb2JqLm5vd3BhZ2UpO1xyXG4gICAgXHRcdH0gICAgXHRcdFxyXG4gICAgXHR9XHJcbiAgICBcdGlmKG9iai5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSA9PTEpe1xyXG4gICAgXHRcdG9iai5oYXNXYXRjaHZpZGVvID0gdHJ1ZTtcclxuXHRcdFx0JC5jb29raWUoXCJoYXNXYXRjaF9rYXNpYm9hbl92aWRlb1wiLHRydWUpO1xyXG5cdFx0XHQkKCcubWVudWJ0bicpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0aWYob2JqLm1vYmlsZSkgJCgnLnBnbScpLmZhZGVJbigpO1xyXG4gICAgXHRcdGlmKCEkKCcucGxheV9idG4nKS5oYXNDbGFzcygnb2ZmJykpICQoJy5wbGF5X2J0bicpLmFkZENsYXNzKCdvZmYnKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpOyAgICBcdFx0XHJcbiAgICBcdH1cclxuICAgIH1cclxuXHRmdW5jdGlvbiBzY3JvbGxfYnRuY2xpY2soKXtcclxuXHRcdG9iai5ub3dwYWdlKz0xO1xyXG5cdFx0Y2hlY2tub3dwYWdlc2Nyb2xsKCk7XHJcblx0XHQkLmFkZHJlc3MudmFsdWUoXCIvcGFnZVwiK29iai5ub3dwYWdlKTtcclxuXHR9XHRcclxuXHRmdW5jdGlvbiBiYW5uZXJmYygpe1xyXG5cdFx0dmFyIF9saSA9ICQodGhpcykuZmluZCgnbGknKSxcclxuXHRcdFx0X2xlbmd0aCA9IF9saS5sZW5ndGgsXHJcblx0XHRcdF9ub3cgPSAtMSxfcHJlID0gLTE7XHJcblxyXG5cdFx0Y2hhbmdlKCk7XHJcblx0XHRmdW5jdGlvbiBjaGFuZ2UoKXtcclxuXHRcdFx0X25vdys9MTtcclxuXHRcdFx0aWYoX25vdz5fbGVuZ3RoLTEpX25vdz0wO1xyXG5cdFx0XHRpZihfcHJlIT0tMSl7XHJcblx0XHRcdFx0X2xpLmVxKF9wcmUpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0X2xpLmVxKF9ub3cpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgX2xpLmVxKF9ub3cpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0X3ByZSA9IF9ub3c7XHJcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtjaGFuZ2UoKTt9LDUwMDApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRmdW5jdGlvbiBzaG93TWVudShfdCl7XHJcblx0XHRpZihfdCl7XHJcblx0XHRcdCQoJy5tZW51ZG9tJykuYWRkQ2xhc3MoJ29uJyk7XHJcblx0XHRcdCQoJy5tZW51JykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdCQoJy5tZW51ZG9tJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHRcdCQoJy5tZW51JykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdH1cclxuXHRmdW5jdGlvbiBhZGRyQ2hhbmdlKCl7XHJcbiAgICBcdHZhciB2YWx1ZSA9ICQuYWRkcmVzcy52YWx1ZSgpO1xyXG5cdFx0c3dpdGNoKHZhbHVlKSB7XHJcblx0XHRcdGNhc2UgJy8nOlxyXG5cdFx0XHRcdG9iai5ub3dwYWdlID0gMTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJy9wYWdlMSc6XHRcdFx0XHRcclxuXHRcdFx0XHRvYmoubm93cGFnZSA9IDE7XHJcblx0XHRcdGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTInOlxyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSAyO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnL3BhZ2UzJzpcclxuICAgICAgICAgICAgICAgIG9iai5ub3dwYWdlID0gMztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJy9wYWdlNCc6XHJcbiAgICAgICAgICAgICAgICBvYmoubm93cGFnZSA9IDQ7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTUnOlxyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSA1O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnL3BhZ2U2JzpcclxuICAgICAgICAgICAgICAgIG9iai5ub3dwYWdlID0gNjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJy9wYWdlNyc6XHJcbiAgICAgICAgICAgICAgICBvYmoubm93cGFnZSA9IDc7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSAxO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHRcdH1cclxuXHRcdGNoZWNrbm93cGFnZSgpO1xyXG5cdFx0JCgnLnBhZ2VfYm94JykuYXR0cignY2xhc3MnLCdwYWdlX2JveCBwZycrb2JqLm5vd3BhZ2UpO1xyXG5cdFx0aWYob2JqLm1vYmlsZSkgJCgnaHRtbCxib2R5JykuYW5pbWF0ZSh7c2Nyb2xsVG9wOiQoJy5wYWdlJyArIG9iai5ub3dwYWdlKS5vZmZzZXQoKS50b3B9LG9iai5mYWRlc3BlZWQpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gb25tb3VzZXdoZWVsZmMoZSl7XHJcbiAgICBcdGlmKCEkKCcuc2Nyb2xsX2J0bicpLmhhc0NsYXNzKCdpbk1iJykpICQoJy5zY3JvbGxfYnRuJykuYWRkQ2xhc3MoJ2luTWInKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG4gICAgXHRpZighb2JqLm1vYmlsZSl7XHJcbiAgICBcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgXHRcdGNvbnNvbGUubG9nKCdhYWEnKTtcclxuXHRcdFx0aWYob2JqLmNhbndoZWVsKXtcclxuXHRcdFx0XHRvYmouY2Fud2hlZWwgPSBmYWxzZTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnYmJiJyk7XHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KG9iai5jYW53aGVlbHRpbWVvdXQpO1xyXG5cdFx0XHRcdG9iai5jYW53aGVlbHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7b2JqLmNhbndoZWVsPXRydWU7fSwyMDAwKTtcclxuXHRcdFx0XHRpZihlLndoZWVsRGVsdGE+MCkgb2JqLm5vd3BhZ2UtPTE7XHJcblx0XHRcdFx0ZWxzZSBvYmoubm93cGFnZSs9MTtcclxuXHRcdFx0XHRjaGVja25vd3BhZ2VzY3JvbGwoKTtcclxuXHRcdFx0XHQkLmFkZHJlc3MudmFsdWUoXCIvcGFnZVwiK29iai5ub3dwYWdlKTtcclxuXHRcdFx0fVxyXG4gICAgXHR9ZWxzZXtcclxuICAgIFx0XHRjb25zb2xlLmxvZygnY2NjYycpO1xyXG4gICAgXHR9XHJcblx0fVxyXG5cdGZ1bmN0aW9uIGNoZWNrbm93cGFnZXNjcm9sbCgpe1xyXG5cdFx0aWYob2JqLm5vd3BhZ2U8MSkgb2JqLm5vd3BhZ2U9MTtcclxuXHRcdGVsc2UgaWYob2JqLm5vd3BhZ2UgPj0gJCgnLnBhZ2VfYm94IC5wYWdlJykubGVuZ3RoKW9iai5ub3dwYWdlID0gJCgnLnBhZ2VfYm94IC5wYWdlJykubGVuZ3RoO1xyXG5cdFx0Ly9oYXNXYXRjaHZpZGVvXHJcblx0XHRpZighb2JqLmhhc1dhdGNodmlkZW8pe1xyXG5cdFx0XHRpZighb2JqLm1vYmlsZSl7XHJcblx0XHRcdFx0aWYob2JqLm5vd3BhZ2U+PTMpe1xyXG5cdFx0XHRcdFx0aWYob2JqLm5vd3BhZ2UhPTMpIGFsZXJ0KG9iai53YXJuaW5ndHh0KTtcclxuXHRcdFx0XHRcdG9iai5ub3dwYWdlPTM7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdGZ1bmN0aW9uIGNoZWNrbm93cGFnZSgpe1xyXG5cdFx0Ly9wYWdlQW5pXHJcblx0XHRpZihvYmoubm93cGFnZT09Mikgb2JqLnBhZ2UyVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXskKCcucGVyc29uX2FsbCcpLmFkZENsYXNzKCdvbicpO30sb2JqLmZhZGVzcGVlZCk7XHJcblx0XHRlbHNle1xyXG5cdFx0XHRjbGVhclRpbWVvdXQob2JqLnBhZ2UyVGltZW91dCk7XHJcblx0XHRcdCQoJy5wZXJzb25fYWxsJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHR9XHJcblx0XHRpZihvYmoubm93cGFnZT09NSkgb2JqLnBhZ2U1VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXskKCcuaWNvbl9hbGwnKS5hZGRDbGFzcygnb24nKTt9LG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0ZWxzZXtcclxuXHRcdFx0Y2xlYXJUaW1lb3V0KG9iai5wYWdlNVRpbWVvdXQpO1xyXG5cdFx0XHQkKCcuaWNvbl9hbGwnKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdH1cclxuXHJcblx0XHQvL2NoZWNrdmlkZW9cclxuXHRcdGlmKCQoJy5wbGF5X2J0bicpLmhhc0NsYXNzKCdvZmYnKSl7XHJcblx0XHRcdGlmKG9iai5ub3dwYWdlIT0zKXtcclxuXHRcdFx0XHR0cnl7XHJcblx0XHRcdFx0XHRpZihvYmoucGxheWVyLmdldFBsYXllclN0YXRlKCkgPT0xKSAkKCcucGxheWVyX2N0cmwnKS50cmlnZ2VyKFwiY2xpY2tcIik7XHJcblx0XHRcdFx0fWNhdGNoKGVycil7fVx0XHRcdFxyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHR0cnl7XHJcblx0XHRcdFx0XHRpZihvYmoucGxheWVyLmdldFBsYXllclN0YXRlKCkgIT01ICYmIG9iai5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSAhPTEpICQoJy5wbGF5ZXJfY3RybCcpLnRyaWdnZXIoXCJjbGlja1wiKTtcclxuXHRcdFx0XHR9Y2F0Y2goZXJyKXt9XHRcdFx0XHJcblx0XHRcdH1cclxuXHRcdH1cdFx0XHJcblx0fVxyXG4gIFx0ZnVuY3Rpb24gc2hvd0xvYWRpbmcoX3Qpe1xyXG4gIFx0XHRpZihfdCkgJCgnLmxvYWRpbmcnKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcbiAgXHRcdGVsc2UgJCgnLmxvYWRpbmcnKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG4gIFx0fSAgXHRcclxuICBcdGZ1bmN0aW9uIGNoZWNrbW9iaWxlKCl7XHJcbiAgXHRcdGlmKGRldmljZS5tb2JpbGUoKSkgb2JqLm1vYmlsZSA9IHRydWU7XHJcblx0XHRlbHNle1xyXG5cdFx0XHRpZigkKHdpbmRvdykud2lkdGgoKTw9MTAyNCkgb2JqLm1vYmlsZSA9IHRydWU7XHJcblx0XHRcdGVsc2Ugb2JqLm1vYmlsZSA9IGZhbHNlO1x0XHRcclxuXHRcdH1cdFx0XHJcblxyXG5cdFx0Ly9wYWdlIGV2ZW50XHJcblx0XHRpZihvYmoubW9iaWxlKXtcclxuXHRcdFx0JCgnLnBhZ2VfYm94IC5wYWdlMScpLmNzcygnaGVpZ2h0JywkKHdpbmRvdykuaGVpZ2h0KCkpO1xyXG5cdFx0XHQkKCcucGFnZV9ib3ggLnBhZ2UzJykuY3NzKCdoZWlnaHQnLCQod2luZG93KS5oZWlnaHQoKSk7XHJcblx0XHRcdHRyeXtcclxuXHRcdFx0XHRpZihvYmoucGxheWVyX2xvb3AuZ2V0UGxheWVyU3RhdGUoKSA9PTEpIG9iai5wbGF5ZXJfbG9vcC5wYXVzZVZpZGVvKCk7XHJcblx0XHRcdFx0aWYob2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpID09MSkgJCgnLnBsYXllcl9jdHJsJykuYWRkQ2xhc3MoJ29uJyk7XHJcblx0XHRcdFx0ZWxzZSAkKCcucGxheWVyX2N0cmwnKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdFx0fWNhdGNoKGVycil7fVxyXG5cdFx0fWVsc2V7XHJcblx0XHRcdCQoJy5wYWdlX2JveCAucGFnZTEnKS5hdHRyKCdzdHlsZScsJycpO1xyXG5cdFx0XHQkKCcucGFnZV9ib3ggLnBhZ2UzJykuYXR0cignc3R5bGUnLCcnKTtcclxuXHRcdFx0dHJ5e1xyXG5cdFx0XHRcdGlmKCEkKCcucGxheV9idG4nKS5oYXNDbGFzcygnb2ZmJykpIG9iai5wbGF5ZXJfbG9vcC5wbGF5VmlkZW8oKTtcclxuXHRcdFx0XHRlbHNle1xyXG5cdFx0XHRcdFx0b2JqLnBsYXllcl9sb29wLnBhdXNlVmlkZW8oKTtcclxuXHRcdFx0XHRcdCQoJyNwbGF5ZXJfbG9vcCcpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0XHQkKCcucGxheV9idG4nKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZihvYmoucGxheWVyLmdldFBsYXllclN0YXRlKCkgPT0xKXtcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQkKCcjcGxheWVyX2xvb3AnKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRcdFx0JCgnLnBsYXllcl9jdHJsJykucmVtb3ZlQ2xhc3MoJ29uJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1x0XHRcdFx0XHRcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdGlmKCEkKCcucGxheV9idG4nKS5oYXNDbGFzcygnb2ZmJykpICQoJy5wbGF5ZXJfY3RybCcpLnJlbW92ZUNsYXNzKCdvbicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0XHRlbHNlICQoJy5wbGF5ZXJfY3RybCcpLmFkZENsYXNzKCdvbicpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1jYXRjaChlcnIpe31cdFx0XHRcclxuXHRcdFx0Y2hlY2tub3dwYWdlc2Nyb2xsKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly92aWRlbyB3aWR0aCBoZWlnaHRcclxuXHRcdGlmKG9iai5tb2JpbGUpe1xyXG5cdFx0XHRvYmoudmlkZW9XID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLndpZHRoKCk7XHJcblx0XHQgICAgb2JqLnZpZGVvSCA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS5oZWlnaHQoKTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHR2YXIgX3cgPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykud2lkdGgoKSAvICQoJy5wYWdlX2JveCAucGFnZTMnKS5oZWlnaHQoKTtcclxuXHRcdFx0dmFyIF92ID0gNjQwIC8gMzYwO1xyXG5cdFx0XHRpZihfdz5fdil7XHJcblx0XHQgICAgICAgIG9iai52aWRlb1cgPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykud2lkdGgoKTtcclxuXHRcdCAgICAgICAgb2JqLnZpZGVvSCA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS53aWR0aCgpIC8gX3Y7XHJcblx0XHQgICAgfWVsc2UgaWYoX3c8X3Ype1xyXG5cdFx0ICAgIFx0b2JqLnZpZGVvSCA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS5oZWlnaHQoKTtcclxuXHRcdCAgICBcdG9iai52aWRlb1cgPSBvYmoudmlkZW9IICogX3Y7XHJcblx0XHQgICAgfWVsc2UgaWYoX3c9PV92KXtcclxuXHRcdCAgICAgICAgb2JqLnZpZGVvVyA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS53aWR0aCgpO1xyXG5cdFx0ICAgICAgICBvYmoudmlkZW9IID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLmhlaWdodCgpO1xyXG5cdFx0ICAgIH1cdFx0XHRcclxuXHRcdH1cclxuXHRcdCQoJy52aWRlbycpLmNzcyh7J3dpZHRoJzpvYmoudmlkZW9XLCdoZWlnaHQnOm9iai52aWRlb0h9KTtcclxuICBcdH1cclxufSkvL3JlYWR5IGVuZCAgXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==

$(document).ready(function(){function e(){u(),t("player_loop",y.videoID_loop,!0),t("player",y.videoID_online,!1)}function a(e){s(!1),y.menuTimeout&&clearTimeout(y.menuTimeout),y.menuTimeout=setTimeout(function(){y.nowpage=e.attr("data-num"),g(),$.address.value("/page"+y.nowpage)},y.fadespeed)}function o(){y.player_loop.pauseVideo(),y.player.playVideo(),$("#player_loop").fadeOut(y.fadespeed),$(".player_ctrl").fadeIn(y.fadespeed),$("#player").fadeIn(y.fadespeed)}function t(e,a,o){var t,p=0;y.mobile&&(p=1,o=!1),t=new YT.Player(e,{height:"100%",width:"100%",videoId:a,playerVars:{controls:p,autoplay:o,enablejsapi:"0",hd:"1",rel:"0",showinfo:"0",modestbranding:"1",cc_load_policy:"1",wmode:"transparent"},events:{onReady:l,onStateChange:n}}),"player_loop"==e?y.player_loop=t:"player"==e&&(y.player=t)}function l(e){"player_loop"==e.target.a.id&&y.player_loop.mute(),y.videohasready+=1,y.videohasready>=2&&(s(!1),setTimeout(function(){f(!1)},y.fadespeed))}function n(e){y.mobile&&(1==y.player.getPlayerState()?$(".player_ctrl").addClass("on").fadeOut(y.fadespeed):$(".player_ctrl").removeClass("on").fadeIn(y.fadespeed)),e.data==YT.PlayerState.ENDED&&("player_loop"==e.target.a.id?y.player_loop.playVideo():"player"==e.target.a.id&&(y.hasWatchvideo=!0,$(".player_ctrl").addClass("on"),y.nowpage=4,g(),$.address.value("/page"+y.nowpage))),1==y.player.getPlayerState()&&($(".play_btn").hasClass("off")||$(".play_btn").addClass("off").fadeOut(y.fadespeed))}function p(){y.nowpage+=1,g(),$.address.value("/page"+y.nowpage)}function d(){function e(){t+=1,t>o-1&&(t=0),l!=-1?(a.eq(l).fadeOut(y.fadespeed),a.eq(t).fadeIn(y.fadespeed)):a.eq(t).fadeIn(y.fadespeed),l=t,setTimeout(function(){e()},5e3)}var a=$(this).find("li"),o=a.length,t=-1,l=-1;e()}function s(e){e?($(".menudom").addClass("on"),$(".menu").fadeIn(y.fadespeed)):($(".menudom").removeClass("on"),$(".menu").fadeOut(y.fadespeed))}function i(){var e=$.address.value();switch(e){case"/":y.nowpage=1;break;case"/page1":y.nowpage=1;break;case"/page2":y.nowpage=2;break;case"/page3":y.nowpage=3;break;case"/page4":y.nowpage=4;break;case"/page5":y.nowpage=5;break;case"/page6":y.nowpage=6;break;case"/page7":y.nowpage=7;break;default:y.nowpage=1}c(),$(".page_box").attr("class","page_box pg"+y.nowpage),y.mobile&&$("html,body").animate({scrollTop:$(".page"+y.nowpage).offset().top},y.fadespeed)}function r(e){y.mobile||(e.preventDefault(),y.canwheel&&(y.canwheel=!1,setTimeout(function(){y.canwheel=!0},y.fadespeed),e.wheelDelta>0?y.nowpage-=1:y.nowpage+=1,g(),$.address.value("/page"+y.nowpage)))}function g(){y.nowpage<1?y.nowpage=1:y.nowpage>=$(".page_box .page").length&&(y.nowpage=$(".page_box .page").length);var e=!0;y.nowpage==$(".page_box .page").length?e=!1:y.hasWatchvideo||y.mobile||y.nowpage>=3&&(3!=y.nowpage&&alert(y.warningtxt),y.nowpage=3,e=!1),e?$(".scroll_btn").hasClass("on")||$(".scroll_btn").addClass("on").fadeIn(y.fadespeed):$(".scroll_btn").removeClass("on").fadeOut(y.fadespeed)}function c(){if(2==y.nowpage?y.page2Timeout=setTimeout(function(){$(".person_all").addClass("on")},y.fadespeed):(clearTimeout(y.page2Timeout),$(".person_all").removeClass("on")),5==y.nowpage?y.page5Timeout=setTimeout(function(){$(".icon_all").addClass("on")},y.fadespeed):(clearTimeout(y.page5Timeout),$(".icon_all").removeClass("on")),$(".play_btn").hasClass("off"))if(3!=y.nowpage)try{1==y.player.getPlayerState()&&$(".player_ctrl").trigger("click")}catch(e){}else try{5!=y.player.getPlayerState()&&1!=y.player.getPlayerState()&&$(".player_ctrl").trigger("click")}catch(e){}}function f(e){e?$(".loading").fadeIn(y.fadespeed):$(".loading").fadeOut(y.fadespeed)}function u(){if(device.mobile()?y.mobile=!0:$(window).width()<=1024?y.mobile=!0:y.mobile=!1,y.mobile){$(".page_box .page1").css("height",$(window).height()),$(".page_box .page3").css("height",$(window).height());try{1==y.player_loop.getPlayerState()&&y.player_loop.pauseVideo(),1==y.player.getPlayerState()?$(".player_ctrl").addClass("on"):$(".player_ctrl").removeClass("on")}catch(e){}}else{$(".page_box .page1").attr("style",""),$(".page_box .page3").attr("style","");try{$(".play_btn").hasClass("off")?(y.player_loop.pauseVideo(),$("#player_loop").fadeOut(y.fadespeed),$(".play_btn").fadeOut(y.fadespeed)):y.player_loop.playVideo(),1==y.player.getPlayerState()?($("#player_loop").fadeOut(y.fadespeed),$(".player_ctrl").removeClass("on").fadeIn(y.fadespeed)):$(".play_btn").hasClass("off")?$(".player_ctrl").addClass("on").fadeIn(y.fadespeed):$(".player_ctrl").removeClass("on").fadeOut(y.fadespeed)}catch(e){}g()}if(y.mobile)y.videoW=$(".page_box .page3").width(),y.videoH=$(".page_box .page3").height();else{var a=$(".page_box .page3").width()/$(".page_box .page3").height(),o=640/360;a>o?(y.videoW=$(".page_box .page3").width(),y.videoH=$(".page_box .page3").width()/o):a<o?(y.videoH=$(".page_box .page3").height(),y.videoW=y.videoH*o):a==o&&(y.videoW=$(".page_box .page3").width(),y.videoH=$(".page_box .page3").height())}$(".video").css({width:y.videoW,height:y.videoH})}var y={wrp:$(".wrapper"),fadespeed:500,canwheel:!0,hasWatchvideo:!1,videohasready:0,videoW:$(window).width(),videoH:$(window).height(),warningtxt:"請先欣賞完景點影片，即可往下繼續瀏覽。",videoID_loop:"722u9ZmgVtE",videoID_online:"eCiRnxgyLRk",nowpage:1};$(window).on("touchstart",function(){y.mobile&&($(".scroll_btn").hasClass("inMb")||$(".scroll_btn").addClass("inMb").fadeOut(y.fadespeed))}),$(".menua").click(function(){a($(this))}),$(".player_ctrl").click(function(){$(this).hasClass("on")?($(this).removeClass("on"),y.player.playVideo()):($(this).addClass("on"),y.player.pauseVideo())}),$(".play_btn").click(function(){o()}),$(".scroll_btn").click(function(){p()}),$(".page1 .bg").each(d),$(".menubtn").click(function(){s($(this).hasClass("on")?!1:!0)}),$.address.change(i),window.onmousewheel=function(e){r(e)},$(window).resize(u),$(window).load(e)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIndpbmRvd2xvYWQiLCJjaGVja21vYmlsZSIsImNyZWF0ZVZpZGVvIiwib2JqIiwidmlkZW9JRF9sb29wIiwidmlkZW9JRF9vbmxpbmUiLCJtZW51YUNsaWNrIiwiX28iLCJzaG93TWVudSIsIm1lbnVUaW1lb3V0IiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsIm5vd3BhZ2UiLCJhdHRyIiwiY2hlY2tub3dwYWdlc2Nyb2xsIiwiYWRkcmVzcyIsInZhbHVlIiwiZmFkZXNwZWVkIiwic3RhcnRWaWRlbyIsInBsYXllcl9sb29wIiwicGF1c2VWaWRlbyIsInBsYXllciIsInBsYXlWaWRlbyIsImZhZGVPdXQiLCJmYWRlSW4iLCJfaWQiLCJfYXV0b3BsYXkiLCJfb2JqIiwiX2NvbiIsIm1vYmlsZSIsIllUIiwiUGxheWVyIiwiaGVpZ2h0Iiwid2lkdGgiLCJ2aWRlb0lkIiwicGxheWVyVmFycyIsImNvbnRyb2xzIiwiYXV0b3BsYXkiLCJlbmFibGVqc2FwaSIsImhkIiwicmVsIiwic2hvd2luZm8iLCJtb2Rlc3RicmFuZGluZyIsImNjX2xvYWRfcG9saWN5Iiwid21vZGUiLCJldmVudHMiLCJvblJlYWR5IiwidmlkZW9SZWFkeSIsIm9uU3RhdGVDaGFuZ2UiLCJvblBsYXllclN0YXRlQ2hhbmdlIiwiZXZlbnQiLCJ0YXJnZXQiLCJhIiwiaWQiLCJtdXRlIiwidmlkZW9oYXNyZWFkeSIsInNob3dMb2FkaW5nIiwiZ2V0UGxheWVyU3RhdGUiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiZGF0YSIsIlBsYXllclN0YXRlIiwiRU5ERUQiLCJoYXNXYXRjaHZpZGVvIiwiaGFzQ2xhc3MiLCJzY3JvbGxfYnRuY2xpY2siLCJiYW5uZXJmYyIsImNoYW5nZSIsIl9ub3ciLCJfbGVuZ3RoIiwiX3ByZSIsIl9saSIsImVxIiwidGhpcyIsImZpbmQiLCJsZW5ndGgiLCJfdCIsImFkZHJDaGFuZ2UiLCJjaGVja25vd3BhZ2UiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwidG9wIiwib25tb3VzZXdoZWVsZmMiLCJlIiwicHJldmVudERlZmF1bHQiLCJjYW53aGVlbCIsIndoZWVsRGVsdGEiLCJfY2Fuc2hvdyIsImFsZXJ0Iiwid2FybmluZ3R4dCIsInBhZ2UyVGltZW91dCIsInBhZ2U1VGltZW91dCIsInRyaWdnZXIiLCJlcnIiLCJkZXZpY2UiLCJ3aW5kb3ciLCJjc3MiLCJ2aWRlb1ciLCJ2aWRlb0giLCJfdyIsIl92Iiwid3JwIiwib24iLCJjbGljayIsImVhY2giLCJvbm1vdXNld2hlZWwiLCJyZXNpemUiLCJsb2FkIl0sIm1hcHBpbmdzIjoiQUFBQUEsRUFBRUMsVUFBVUMsTUFBTSxXQTZDakIsUUFBU0MsS0FDUkMsSUFDQUMsRUFBWSxjQUFjQyxFQUFJQyxjQUFhLEdBQzNDRixFQUFZLFNBQVNDLEVBQUlFLGdCQUFlLEdBSXpDLFFBQVNDLEdBQVdDLEdBQ25CQyxHQUFTLEdBQ05MLEVBQUlNLGFBQWFDLGFBQWFQLEVBQUlNLGFBQ3JDTixFQUFJTSxZQUFjRSxXQUFXLFdBQzVCUixFQUFJUyxRQUFVTCxFQUFHTSxLQUFLLFlBQ3RCQyxJQUNBakIsRUFBRWtCLFFBQVFDLE1BQU0sUUFBUWIsRUFBSVMsVUFDM0JULEVBQUljLFdBRVAsUUFBU0MsS0FDUmYsRUFBSWdCLFlBQVlDLGFBQ2hCakIsRUFBSWtCLE9BQU9DLFlBQ1h6QixFQUFFLGdCQUFnQjBCLFFBQVFwQixFQUFJYyxXQUM5QnBCLEVBQUUsZ0JBQWdCMkIsT0FBT3JCLEVBQUljLFdBQzdCcEIsRUFBRSxXQUFXMkIsT0FBT3JCLEVBQUljLFdBRXpCLFFBQVNmLEdBQVlLLEVBQUdrQixFQUFJQyxHQUMzQixHQUFJQyxHQUNBQyxFQUFPLENBQ1J6QixHQUFJMEIsU0FDTkQsRUFBTyxFQUNQRixHQUFVLEdBRUxDLEVBQU8sR0FBSUcsSUFBR0MsT0FBT3hCLEdBQ25CeUIsT0FBUSxPQUNSQyxNQUFPLE9BQ1BDLFFBQVNU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RUFBRW1HLFFBQVFoRSxTQUNsQjBELFdBQVksc0JBQ1p0RixhQUFhLGNBQ2JDLGVBQWUsY0FDZk8sUUFBUyxFQUtWZixHQUFFbUcsUUFBUU8sR0FBRyxhQUFhLFdBQ3RCcEcsRUFBSTBCLFNBQ0FoQyxFQUFFLGVBQWVtRSxTQUFTLFNBQVNuRSxFQUFFLGVBQWU2RCxTQUFTLFFBQVFuQyxRQUFRcEIsRUFBSWMsY0FHekZwQixFQUFFLFVBQVUyRyxNQUFNLFdBQVdsRyxFQUFXVCxFQUFFNEUsU0FDMUM1RSxFQUFFLGdCQUFnQjJHLE1BQU0sV0FDcEIzRyxFQUFFNEUsTUFBTVQsU0FBUyxPQUNuQm5FLEVBQUU0RSxNQUFNZCxZQUFZLE1BQ3BCeEQsRUFBSWtCLE9BQU9DLGNBR1h6QixFQUFFNEUsTUFBTWYsU0FBUyxNQUNqQnZELEVBQUlrQixPQUFPRCxnQkFHYnZCLEVBQUUsYUFBYTJHLE1BQU0sV0FBV3RGLE1BQ2hDckIsRUFBRSxlQUFlMkcsTUFBTSxXQUFXdkMsTUFDbENwRSxFQUFFLGNBQWM0RyxLQUFLdkMsR0FDckJyRSxFQUFFLFlBQVkyRyxNQUFNLFdBQ09oRyxFQUF2QlgsRUFBRTRFLE1BQU1ULFNBQVMsT0FBZSxHQUNyQixLQUVmbkUsRUFBRWtCLFFBQVFvRCxPQUFPVSxHQUNqQm1CLE9BQU9VLGFBQWMsU0FBU3RCLEdBQUdELEVBQWVDLElBQ2hEdkYsRUFBRW1HLFFBQVFXLE9BQU8xRyxHQUNqQkosRUFBRW1HLFFBQVFZLEtBQUs1RyIsImZpbGUiOiJjb21tb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG5cdC8vSW5pdFxyXG5cdHZhciBvYmogPXtcclxuXHRcdHdycDogJCgnLndyYXBwZXInKSxcclxuXHRcdGZhZGVzcGVlZDogNTAwLFxyXG5cdFx0Y2Fud2hlZWw6IHRydWUsXHJcblx0XHRoYXNXYXRjaHZpZGVvOiBmYWxzZSxcclxuXHRcdHZpZGVvaGFzcmVhZHk6IDAsXHJcblx0XHR2aWRlb1c6ICQod2luZG93KS53aWR0aCgpLFxyXG5cdFx0dmlkZW9IOiAkKHdpbmRvdykuaGVpZ2h0KCksXHJcblx0XHR3YXJuaW5ndHh0OiAn6KuL5YWI5qyj6LOe5a6M5pmv6bue5b2x54mH77yM5Y2z5Y+v5b6A5LiL57m857qM54CP6Ka944CCJyxcclxuXHRcdHZpZGVvSURfbG9vcDonNzIydTlabWdWdEUnLFxyXG5cdFx0dmlkZW9JRF9vbmxpbmU6J2VDaVJueGd5TFJrJyxcclxuXHRcdG5vd3BhZ2U6IDFcclxuXHR9O1xyXG5cdFxyXG5cclxuXHQvL0FkZExpc3RlbmVyXHJcblx0JCh3aW5kb3cpLm9uKFwidG91Y2hzdGFydFwiLGZ1bmN0aW9uKCl7XHJcblx0XHRpZihvYmoubW9iaWxlKXtcclxuICBcdFx0XHRpZighJCgnLnNjcm9sbF9idG4nKS5oYXNDbGFzcygnaW5NYicpKSAkKCcuc2Nyb2xsX2J0bicpLmFkZENsYXNzKCdpbk1iJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuICBcdFx0fVxyXG5cdH0pO1xyXG5cdCQoJy5tZW51YScpLmNsaWNrKGZ1bmN0aW9uKCl7bWVudWFDbGljaygkKHRoaXMpKTt9KTtcclxuXHQkKCcucGxheWVyX2N0cmwnKS5jbGljayhmdW5jdGlvbigpe1xyXG5cdFx0aWYoJCh0aGlzKS5oYXNDbGFzcygnb24nKSl7XHJcblx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHRcdG9iai5wbGF5ZXIucGxheVZpZGVvKCk7XHJcblx0XHR9XHJcblx0XHRlbHNle1xyXG5cdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdvbicpO1xyXG5cdFx0XHRvYmoucGxheWVyLnBhdXNlVmlkZW8oKTtcdFxyXG5cdFx0fVxyXG5cdH0pXHJcblx0JCgnLnBsYXlfYnRuJykuY2xpY2soZnVuY3Rpb24oKXtzdGFydFZpZGVvKCk7fSk7XHJcblx0JCgnLnNjcm9sbF9idG4nKS5jbGljayhmdW5jdGlvbigpe3Njcm9sbF9idG5jbGljaygpO30pO1xyXG5cdCQoJy5wYWdlMSAuYmcnKS5lYWNoKGJhbm5lcmZjKTtcclxuXHQkKCcubWVudWJ0bicpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcblx0XHRpZigkKHRoaXMpLmhhc0NsYXNzKCdvbicpKXNob3dNZW51KGZhbHNlKTtcclxuXHRcdGVsc2Ugc2hvd01lbnUodHJ1ZSk7XHJcblx0fSk7XHJcblx0JC5hZGRyZXNzLmNoYW5nZShhZGRyQ2hhbmdlKTtcclxuXHR3aW5kb3cub25tb3VzZXdoZWVsPSBmdW5jdGlvbihlKXtvbm1vdXNld2hlZWxmYyhlKTt9XHJcblx0JCh3aW5kb3cpLnJlc2l6ZShjaGVja21vYmlsZSk7XHJcblx0JCh3aW5kb3cpLmxvYWQod2luZG93bG9hZCk7XHJcblx0ZnVuY3Rpb24gd2luZG93bG9hZCgpe1xyXG5cdFx0Y2hlY2ttb2JpbGUoKTtcclxuXHRcdGNyZWF0ZVZpZGVvKCdwbGF5ZXJfbG9vcCcsb2JqLnZpZGVvSURfbG9vcCx0cnVlKTtcclxuXHRcdGNyZWF0ZVZpZGVvKCdwbGF5ZXInLG9iai52aWRlb0lEX29ubGluZSxmYWxzZSk7XHRcdFxyXG5cdH1cclxuXHJcblx0Ly9FdmVudFxyXG5cdGZ1bmN0aW9uIG1lbnVhQ2xpY2soX28pe1xyXG5cdFx0c2hvd01lbnUoZmFsc2UpO1xyXG5cdFx0aWYob2JqLm1lbnVUaW1lb3V0KSBjbGVhclRpbWVvdXQob2JqLm1lbnVUaW1lb3V0KTtcclxuXHRcdG9iai5tZW51VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHRcdFx0b2JqLm5vd3BhZ2UgPSBfby5hdHRyKCdkYXRhLW51bScpO1xyXG5cdFx0XHRjaGVja25vd3BhZ2VzY3JvbGwoKTtcclxuXHRcdFx0JC5hZGRyZXNzLnZhbHVlKFwiL3BhZ2VcIitvYmoubm93cGFnZSk7XHJcblx0XHR9LG9iai5mYWRlc3BlZWQpO1x0XHRcclxuXHR9XHJcblx0ZnVuY3Rpb24gc3RhcnRWaWRlbygpe1x0XHRcclxuXHRcdG9iai5wbGF5ZXJfbG9vcC5wYXVzZVZpZGVvKCk7XHJcblx0XHRvYmoucGxheWVyLnBsYXlWaWRlbygpO1x0XHRcclxuXHRcdCQoJyNwbGF5ZXJfbG9vcCcpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHQkKCcucGxheWVyX2N0cmwnKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcblx0XHQkKCcjcGxheWVyJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdH1cclxuXHRmdW5jdGlvbiBjcmVhdGVWaWRlbyhfbyxfaWQsX2F1dG9wbGF5KXtcclxuXHRcdHZhciBfb2JqO1x0XHRcclxuXHRcdHZhciBfY29uID0gMDtcclxuXHRcdGlmKG9iai5tb2JpbGUpe1xyXG5cdFx0XHRfY29uID0gMTtcclxuXHRcdFx0X2F1dG9wbGF5PWZhbHNlO1xyXG5cdFx0fVxyXG4gICAgICAgIF9vYmogPSBuZXcgWVQuUGxheWVyKF9vLCB7XHJcbiAgICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcclxuICAgICAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgICB2aWRlb0lkOiBfaWQsXHJcbiAgICAgICAgICBwbGF5ZXJWYXJzOntcclxuICAgICAgICAgICAgJ2NvbnRyb2xzJzpfY29uLFxyXG4gICAgICAgICAgICAnYXV0b3BsYXknOl9hdXRvcGxheSxcclxuICAgICAgICAgICAgJ2VuYWJsZWpzYXBpJzonMCcsXHJcbiAgICAgICAgICAgICdoZCc6JzEnLFxyXG4gICAgICAgICAgICAncmVsJzonMCcsXHJcbiAgICAgICAgICAgICdzaG93aW5mbyc6JzAnLFxyXG4gICAgICAgICAgICAnbW9kZXN0YnJhbmRpbmcnOicxJyxcclxuICAgICAgICAgICAgJ2NjX2xvYWRfcG9saWN5JzonMScsXHJcbiAgICAgICAgICAgICd3bW9kZSc6J3RyYW5zcGFyZW50JyAgICAgIFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGV2ZW50czoge1xyXG5cdCAgICAgICAgJ29uUmVhZHknOiB2aWRlb1JlYWR5LFxyXG5cdCAgICAgICAgJ29uU3RhdGVDaGFuZ2UnOiBvblBsYXllclN0YXRlQ2hhbmdlXHJcblx0ICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmKF9vID09ICdwbGF5ZXJfbG9vcCcpICBvYmoucGxheWVyX2xvb3AgPSBfb2JqO1xyXG5cdFx0ZWxzZSBpZihfbyA9PSAncGxheWVyJykgb2JqLnBsYXllciA9IF9vYmo7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiB2aWRlb1JlYWR5KGV2ZW50KXtcclxuICAgIFx0aWYoZXZlbnQudGFyZ2V0LmEuaWQgPT0gJ3BsYXllcl9sb29wJykgb2JqLnBsYXllcl9sb29wLm11dGUoKTtcclxuICAgIFx0b2JqLnZpZGVvaGFzcmVhZHkrPTE7XHJcbiAgICBcdGlmKG9iai52aWRlb2hhc3JlYWR5ID49Mil7XHJcbiAgICBcdFx0c2hvd01lbnUoZmFsc2UpO1xyXG4gICAgXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgIFx0XHRcdHNob3dMb2FkaW5nKGZhbHNlKTtcclxuICAgIFx0XHR9LG9iai5mYWRlc3BlZWQpOyAgICBcdFx0XHJcbiAgICBcdH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG9uUGxheWVyU3RhdGVDaGFuZ2UoZXZlbnQpe1xyXG4gICAgXHRpZihvYmoubW9iaWxlKXtcclxuICAgIFx0XHRpZihvYmoucGxheWVyLmdldFBsYXllclN0YXRlKCkgPT0xKXtcclxuICAgIFx0XHRcdCQoJy5wbGF5ZXJfY3RybCcpLmFkZENsYXNzKCdvbicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcbiAgICBcdFx0fWVsc2UgJCgnLnBsYXllcl9jdHJsJykucmVtb3ZlQ2xhc3MoJ29uJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG4gICAgXHR9XHJcbiAgICBcdGlmKGV2ZW50LmRhdGEgPT0gWVQuUGxheWVyU3RhdGUuRU5ERUQpe1xyXG4gICAgXHRcdGlmKGV2ZW50LnRhcmdldC5hLmlkID09ICdwbGF5ZXJfbG9vcCcpIG9iai5wbGF5ZXJfbG9vcC5wbGF5VmlkZW8oKTtcclxuICAgIFx0XHRlbHNlIGlmKGV2ZW50LnRhcmdldC5hLmlkID09ICdwbGF5ZXInKXtcclxuICAgIFx0XHRcdG9iai5oYXNXYXRjaHZpZGVvID0gdHJ1ZTtcclxuICAgIFx0XHRcdCQoJy5wbGF5ZXJfY3RybCcpLmFkZENsYXNzKCdvbicpO1xyXG4gICAgXHRcdFx0b2JqLm5vd3BhZ2UgPSA0O1xyXG4gICAgXHRcdFx0Y2hlY2tub3dwYWdlc2Nyb2xsKCk7XHJcblx0XHRcdFx0JC5hZGRyZXNzLnZhbHVlKFwiL3BhZ2VcIitvYmoubm93cGFnZSk7XHJcbiAgICBcdFx0fSAgICBcdFx0XHJcbiAgICBcdH1cclxuICAgIFx0aWYob2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpID09MSl7XHJcbiAgICBcdFx0aWYoISQoJy5wbGF5X2J0bicpLmhhc0NsYXNzKCdvZmYnKSkgJCgnLnBsYXlfYnRuJykuYWRkQ2xhc3MoJ29mZicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7ICAgIFx0XHRcclxuICAgIFx0fVxyXG4gICAgfVxyXG5cdGZ1bmN0aW9uIHNjcm9sbF9idG5jbGljaygpe1xyXG5cdFx0b2JqLm5vd3BhZ2UrPTE7XHJcblx0XHRjaGVja25vd3BhZ2VzY3JvbGwoKTtcclxuXHRcdCQuYWRkcmVzcy52YWx1ZShcIi9wYWdlXCIrb2JqLm5vd3BhZ2UpO1xyXG5cdH1cdFxyXG5cdGZ1bmN0aW9uIGJhbm5lcmZjKCl7XHJcblx0XHR2YXIgX2xpID0gJCh0aGlzKS5maW5kKCdsaScpLFxyXG5cdFx0XHRfbGVuZ3RoID0gX2xpLmxlbmd0aCxcclxuXHRcdFx0X25vdyA9IC0xLF9wcmUgPSAtMTtcclxuXHJcblx0XHRjaGFuZ2UoKTtcclxuXHRcdGZ1bmN0aW9uIGNoYW5nZSgpe1xyXG5cdFx0XHRfbm93Kz0xO1xyXG5cdFx0XHRpZihfbm93Pl9sZW5ndGgtMSlfbm93PTA7XHJcblx0XHRcdGlmKF9wcmUhPS0xKXtcclxuXHRcdFx0XHRfbGkuZXEoX3ByZSkuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0XHRfbGkuZXEoX25vdykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1x0XHRcdFx0XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBfbGkuZXEoX25vdykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRfcHJlID0gX25vdztcclxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe2NoYW5nZSgpO30sNTAwMCk7XHJcblx0XHR9XHJcblx0fVxyXG5cdGZ1bmN0aW9uIHNob3dNZW51KF90KXtcclxuXHRcdGlmKF90KXtcclxuXHRcdFx0JCgnLm1lbnVkb20nKS5hZGRDbGFzcygnb24nKTtcclxuXHRcdFx0JCgnLm1lbnUnKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0JCgnLm1lbnVkb20nKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdFx0JCgnLm1lbnUnKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0fVxyXG5cdGZ1bmN0aW9uIGFkZHJDaGFuZ2UoKXtcclxuICAgIFx0dmFyIHZhbHVlID0gJC5hZGRyZXNzLnZhbHVlKCk7XHJcblx0XHRzd2l0Y2godmFsdWUpIHtcclxuXHRcdFx0Y2FzZSAnLyc6XHJcblx0XHRcdFx0b2JqLm5vd3BhZ2UgPSAxO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnL3BhZ2UxJzpcdFx0XHRcdFxyXG5cdFx0XHRcdG9iai5ub3dwYWdlID0gMTtcclxuXHRcdFx0YnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJy9wYWdlMic6XHJcbiAgICAgICAgICAgICAgICBvYmoubm93cGFnZSA9IDI7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTMnOlxyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSAzO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnL3BhZ2U0JzpcclxuICAgICAgICAgICAgICAgIG9iai5ub3dwYWdlID0gNDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJy9wYWdlNSc6XHJcbiAgICAgICAgICAgICAgICBvYmoubm93cGFnZSA9IDU7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTYnOlxyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSA2O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnL3BhZ2U3JzpcclxuICAgICAgICAgICAgICAgIG9iai5ub3dwYWdlID0gNztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAvLyB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiL1wiO1xyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSAxO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHRcdH1cclxuXHRcdGNoZWNrbm93cGFnZSgpO1xyXG5cdFx0JCgnLnBhZ2VfYm94JykuYXR0cignY2xhc3MnLCdwYWdlX2JveCBwZycrb2JqLm5vd3BhZ2UpO1xyXG5cdFx0aWYob2JqLm1vYmlsZSkgJCgnaHRtbCxib2R5JykuYW5pbWF0ZSh7c2Nyb2xsVG9wOiQoJy5wYWdlJyArIG9iai5ub3dwYWdlKS5vZmZzZXQoKS50b3B9LG9iai5mYWRlc3BlZWQpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gb25tb3VzZXdoZWVsZmMoZSl7XHJcbiAgICBcdGlmKCFvYmoubW9iaWxlKXtcclxuICAgIFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGlmKG9iai5jYW53aGVlbCl7XHJcblx0XHRcdFx0b2JqLmNhbndoZWVsID0gZmFsc2U7XHJcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe29iai5jYW53aGVlbD10cnVlO30sb2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0aWYoZS53aGVlbERlbHRhPjApIG9iai5ub3dwYWdlLT0xO1xyXG5cdFx0XHRcdGVsc2Ugb2JqLm5vd3BhZ2UrPTE7XHJcblx0XHRcdFx0Y2hlY2tub3dwYWdlc2Nyb2xsKCk7XHJcblx0XHRcdFx0JC5hZGRyZXNzLnZhbHVlKFwiL3BhZ2VcIitvYmoubm93cGFnZSk7XHJcblx0XHRcdH1cclxuICAgIFx0fVxyXG5cdH1cclxuXHRmdW5jdGlvbiBjaGVja25vd3BhZ2VzY3JvbGwoKXtcclxuXHRcdGlmKG9iai5ub3dwYWdlPDEpIG9iai5ub3dwYWdlPTE7XHJcblx0XHRlbHNlIGlmKG9iai5ub3dwYWdlID49ICQoJy5wYWdlX2JveCAucGFnZScpLmxlbmd0aClvYmoubm93cGFnZSA9ICQoJy5wYWdlX2JveCAucGFnZScpLmxlbmd0aDtcclxuXHJcblx0XHQvL3Njcm9sbF9idG5cclxuXHRcdHZhciBfY2Fuc2hvdyA9IHRydWU7XHJcblx0XHRpZihvYmoubm93cGFnZSA9PSAkKCcucGFnZV9ib3ggLnBhZ2UnKS5sZW5ndGgpIF9jYW5zaG93ID0gZmFsc2U7XHJcblx0XHRlbHNle1xyXG5cdFx0XHQvL2hhc1dhdGNodmlkZW9cclxuXHRcdFx0aWYoIW9iai5oYXNXYXRjaHZpZGVvKXtcclxuXHRcdFx0XHRpZighb2JqLm1vYmlsZSl7XHJcblx0XHRcdFx0XHRpZihvYmoubm93cGFnZT49Myl7XHJcblx0XHRcdFx0XHRcdGlmKG9iai5ub3dwYWdlIT0zKSBhbGVydChvYmoud2FybmluZ3R4dCk7XHJcblx0XHRcdFx0XHRcdG9iai5ub3dwYWdlPTM7XHJcblx0XHRcdFx0XHRcdF9jYW5zaG93PWZhbHNlO1x0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0aWYoX2NhbnNob3cpe1xyXG5cdFx0XHRpZighJCgnLnNjcm9sbF9idG4nKS5oYXNDbGFzcygnb24nKSkgJCgnLnNjcm9sbF9idG4nKS5hZGRDbGFzcygnb24nKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcblx0XHR9ZWxzZSAkKCcuc2Nyb2xsX2J0bicpLnJlbW92ZUNsYXNzKCdvbicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0fVxyXG5cdGZ1bmN0aW9uIGNoZWNrbm93cGFnZSgpe1xyXG5cdFx0Ly9wYWdlQW5pXHJcblx0XHRpZihvYmoubm93cGFnZT09Mikgb2JqLnBhZ2UyVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXskKCcucGVyc29uX2FsbCcpLmFkZENsYXNzKCdvbicpO30sb2JqLmZhZGVzcGVlZCk7XHJcblx0XHRlbHNle1xyXG5cdFx0XHRjbGVhclRpbWVvdXQob2JqLnBhZ2UyVGltZW91dCk7XHJcblx0XHRcdCQoJy5wZXJzb25fYWxsJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHR9XHJcblx0XHRpZihvYmoubm93cGFnZT09NSkgb2JqLnBhZ2U1VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXskKCcuaWNvbl9hbGwnKS5hZGRDbGFzcygnb24nKTt9LG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0ZWxzZXtcclxuXHRcdFx0Y2xlYXJUaW1lb3V0KG9iai5wYWdlNVRpbWVvdXQpO1xyXG5cdFx0XHQkKCcuaWNvbl9hbGwnKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdH1cclxuXHJcblx0XHQvL2NoZWNrdmlkZW9cclxuXHRcdGlmKCQoJy5wbGF5X2J0bicpLmhhc0NsYXNzKCdvZmYnKSl7XHJcblx0XHRcdGlmKG9iai5ub3dwYWdlIT0zKXtcclxuXHRcdFx0XHR0cnl7XHJcblx0XHRcdFx0XHRpZihvYmoucGxheWVyLmdldFBsYXllclN0YXRlKCkgPT0xKSAkKCcucGxheWVyX2N0cmwnKS50cmlnZ2VyKFwiY2xpY2tcIik7XHJcblx0XHRcdFx0fWNhdGNoKGVycil7fVx0XHRcdFxyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHR0cnl7XHJcblx0XHRcdFx0XHRpZihvYmoucGxheWVyLmdldFBsYXllclN0YXRlKCkgIT01ICYmIG9iai5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSAhPTEpICQoJy5wbGF5ZXJfY3RybCcpLnRyaWdnZXIoXCJjbGlja1wiKTtcclxuXHRcdFx0XHR9Y2F0Y2goZXJyKXt9XHRcdFx0XHJcblx0XHRcdH1cclxuXHRcdH1cdFx0XHJcblx0fVxyXG4gIFx0ZnVuY3Rpb24gc2hvd0xvYWRpbmcoX3Qpe1xyXG4gIFx0XHRpZihfdCkgJCgnLmxvYWRpbmcnKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcbiAgXHRcdGVsc2UgJCgnLmxvYWRpbmcnKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG4gIFx0fSAgXHRcclxuICBcdGZ1bmN0aW9uIGNoZWNrbW9iaWxlKCl7XHJcbiAgXHRcdGlmKGRldmljZS5tb2JpbGUoKSkgb2JqLm1vYmlsZSA9IHRydWU7XHJcblx0XHRlbHNle1xyXG5cdFx0XHRpZigkKHdpbmRvdykud2lkdGgoKTw9MTAyNCkgb2JqLm1vYmlsZSA9IHRydWU7XHJcblx0XHRcdGVsc2Ugb2JqLm1vYmlsZSA9IGZhbHNlO1x0XHRcclxuXHRcdH1cdFx0XHJcblxyXG5cdFx0Ly9wYWdlIGV2ZW50XHJcblx0XHRpZihvYmoubW9iaWxlKXtcclxuXHRcdFx0JCgnLnBhZ2VfYm94IC5wYWdlMScpLmNzcygnaGVpZ2h0JywkKHdpbmRvdykuaGVpZ2h0KCkpO1xyXG5cdFx0XHQkKCcucGFnZV9ib3ggLnBhZ2UzJykuY3NzKCdoZWlnaHQnLCQod2luZG93KS5oZWlnaHQoKSk7XHJcblx0XHRcdHRyeXtcclxuXHRcdFx0XHRpZihvYmoucGxheWVyX2xvb3AuZ2V0UGxheWVyU3RhdGUoKSA9PTEpIG9iai5wbGF5ZXJfbG9vcC5wYXVzZVZpZGVvKCk7XHJcblx0XHRcdFx0aWYob2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpID09MSkgJCgnLnBsYXllcl9jdHJsJykuYWRkQ2xhc3MoJ29uJyk7XHJcblx0XHRcdFx0ZWxzZSAkKCcucGxheWVyX2N0cmwnKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdFx0fWNhdGNoKGVycil7fVx0XHRcdFxyXG5cdFx0XHQvLyAkKCdodG1sLGJvZHknKS5hbmltYXRlKHtzY3JvbGxUb3A6JCgnLnBhZ2UnICsgb2JqLm5vd3BhZ2UpLm9mZnNldCgpLnRvcH0sb2JqLmZhZGVzcGVlZCk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0JCgnLnBhZ2VfYm94IC5wYWdlMScpLmF0dHIoJ3N0eWxlJywnJyk7XHJcblx0XHRcdCQoJy5wYWdlX2JveCAucGFnZTMnKS5hdHRyKCdzdHlsZScsJycpO1xyXG5cdFx0XHR0cnl7XHJcblx0XHRcdFx0aWYoISQoJy5wbGF5X2J0bicpLmhhc0NsYXNzKCdvZmYnKSkgb2JqLnBsYXllcl9sb29wLnBsYXlWaWRlbygpO1xyXG5cdFx0XHRcdGVsc2V7XHJcblx0XHRcdFx0XHRvYmoucGxheWVyX2xvb3AucGF1c2VWaWRlbygpO1xyXG5cdFx0XHRcdFx0JCgnI3BsYXllcl9sb29wJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0XHRcdCQoJy5wbGF5X2J0bicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKG9iai5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSA9PTEpe1x0XHRcdFx0XHRcclxuXHRcdFx0XHRcdCQoJyNwbGF5ZXJfbG9vcCcpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0XHQkKCcucGxheWVyX2N0cmwnKS5yZW1vdmVDbGFzcygnb24nKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHRcdFx0XHRcdFxyXG5cdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0aWYoISQoJy5wbGF5X2J0bicpLmhhc0NsYXNzKCdvZmYnKSkgJCgnLnBsYXllcl9jdHJsJykucmVtb3ZlQ2xhc3MoJ29uJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0XHRcdGVsc2UgJCgnLnBsYXllcl9jdHJsJykuYWRkQ2xhc3MoJ29uJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fWNhdGNoKGVycil7fVx0XHRcdFxyXG5cdFx0XHRjaGVja25vd3BhZ2VzY3JvbGwoKTtcclxuXHRcdH1cclxuXHJcblx0XHQvL3ZpZGVvIHdpZHRoIGhlaWdodFxyXG5cdFx0aWYob2JqLm1vYmlsZSl7XHJcblx0XHRcdG9iai52aWRlb1cgPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykud2lkdGgoKTtcclxuXHRcdCAgICBvYmoudmlkZW9IID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLmhlaWdodCgpO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdHZhciBfdyA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS53aWR0aCgpIC8gJCgnLnBhZ2VfYm94IC5wYWdlMycpLmhlaWdodCgpO1xyXG5cdFx0XHR2YXIgX3YgPSA2NDAgLyAzNjA7XHJcblx0XHRcdGlmKF93Pl92KXtcclxuXHRcdCAgICAgICAgb2JqLnZpZGVvVyA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS53aWR0aCgpO1xyXG5cdFx0ICAgICAgICBvYmoudmlkZW9IID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLndpZHRoKCkgLyBfdjtcclxuXHRcdCAgICB9ZWxzZSBpZihfdzxfdil7XHJcblx0XHQgICAgXHRvYmoudmlkZW9IID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLmhlaWdodCgpO1xyXG5cdFx0ICAgIFx0b2JqLnZpZGVvVyA9IG9iai52aWRlb0ggKiBfdjtcclxuXHRcdCAgICB9ZWxzZSBpZihfdz09X3Ype1xyXG5cdFx0ICAgICAgICBvYmoudmlkZW9XID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLndpZHRoKCk7XHJcblx0XHQgICAgICAgIG9iai52aWRlb0ggPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykuaGVpZ2h0KCk7XHJcblx0XHQgICAgfVx0XHRcdFxyXG5cdFx0fVxyXG5cdFx0JCgnLnZpZGVvJykuY3NzKHsnd2lkdGgnOm9iai52aWRlb1csJ2hlaWdodCc6b2JqLnZpZGVvSH0pO1xyXG4gIFx0fVxyXG59KS8vcmVhZHkgZW5kICBcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9

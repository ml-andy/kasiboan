$(document).ready(function(){function e(){f(),h.mobile&&(p(!1),setTimeout(function(){c(!1)},h.fadespeed)),t("player_loop",h.videoID_loop,!0),t("player",h.videoID_online,!1)}function a(e){p(!1),$(".scroll_btn").hasClass("inMb")||$(".scroll_btn").addClass("inMb").fadeOut(h.fadespeed),h.menuTimeout&&clearTimeout(h.menuTimeout),h.menuTimeout=setTimeout(function(){h.nowpage=e.attr("data-num"),r(),$.address.value("/page"+h.nowpage)},h.fadespeed)}function o(){h.hasWatchvideo=!0,$.cookie("hasWatch_kasiboan_video",!0),h.player_loop.pauseVideo(),h.player.playVideo(),$("#player_loop").fadeOut(h.fadespeed),$(".player_ctrl").fadeIn(h.fadespeed),$("#player").fadeIn(h.fadespeed)}function t(e,a,o){var t,n=0;h.mobile&&(n=1,o=!1),t=new YT.Player(e,{height:"100%",width:"100%",videoId:a,playerVars:{controls:n,autoplay:o,enablejsapi:"0",hd:"1",rel:"0",showinfo:"0",modestbranding:"1",cc_load_policy:"1",wmode:"transparent"},events:{onReady:d,onStateChange:l}}),"player_loop"==e?h.player_loop=t:"player"==e&&(h.player=t)}function d(e){"player_loop"==e.target.a.id&&h.player_loop.mute(),h.videohasready+=1,h.videohasready>=2&&(p(!1),setTimeout(function(){c(!1)},h.fadespeed))}function l(e){h.mobile&&(1==h.player.getPlayerState()?$(".player_ctrl").addClass("on").fadeOut(h.fadespeed):$(".player_ctrl").removeClass("on").fadeIn(h.fadespeed)),e.data==YT.PlayerState.ENDED&&("player_loop"==e.target.a.id?h.player_loop.playVideo():"player"==e.target.a.id&&($(".player_ctrl").addClass("on"),h.nowpage=4,r(),$.address.value("/page"+h.nowpage))),1==h.player.getPlayerState()&&(h.hasWatchvideo=!0,$.cookie("hasWatch_kasiboan_video",!0),$(".menubtn").fadeIn(h.fadespeed),h.mobile&&$(".pgm").fadeIn(),$(".play_btn").hasClass("off")||$(".play_btn").addClass("off").fadeOut(h.fadespeed))}function n(){function e(){t+=1,t>o-1&&(t=0),d!=-1?(a.eq(d).fadeOut(h.fadespeed),a.eq(t).fadeIn(h.fadespeed)):a.eq(t).fadeIn(h.fadespeed),d=t,setTimeout(function(){e()},5e3)}var a=$(this).find("li"),o=a.length,t=-1,d=-1;e()}function p(e){e?($(".menudom").addClass("on"),$(".menu").fadeIn(h.fadespeed)):($(".menudom").removeClass("on"),$(".menu").fadeOut(h.fadespeed))}function i(){var e=$.address.value();switch(e){case"/":h.nowpage=1;break;case"/page1":h.nowpage=1;break;case"/page2":h.nowpage=2;break;case"/page3":h.nowpage=3;break;case"/page4":h.nowpage=4;break;case"/page5":h.nowpage=5;break;case"/page6":h.nowpage=6;break;case"/page7":h.nowpage=7;break;default:h.nowpage=1}g(),$(".page_box").attr("class","page_box pg"+h.nowpage),h.mobile&&$("html,body").animate({scrollTop:$(".page"+h.nowpage).offset().top},h.fadespeed)}function s(e){$(".scroll_btn").hasClass("inMb")||$(".scroll_btn").addClass("inMb").fadeOut(h.fadespeed),h.mobile||(e.preventDefault(),h.canwheel&&(h.canwheel=!1,setTimeout(function(){h.canwheel=!0},h.fadespeed),e.wheelDelta>0?h.nowpage-=1:h.nowpage+=1,r(),$.address.value("/page"+h.nowpage)))}function r(){h.nowpage<1?h.nowpage=1:h.nowpage>=$(".page_box .page").length&&(h.nowpage=$(".page_box .page").length),h.hasWatchvideo||h.mobile||h.nowpage>=3&&(3!=h.nowpage&&alert(h.warningtxt),h.nowpage=3)}function g(){if(2==h.nowpage?h.page2Timeout=setTimeout(function(){$(".person_all").addClass("on")},h.fadespeed):(clearTimeout(h.page2Timeout),$(".person_all").removeClass("on")),5==h.nowpage?h.page5Timeout=setTimeout(function(){$(".icon_all").addClass("on")},h.fadespeed):(clearTimeout(h.page5Timeout),$(".icon_all").removeClass("on")),$(".play_btn").hasClass("off"))if(3!=h.nowpage)try{1==h.player.getPlayerState()&&$(".player_ctrl").trigger("click")}catch(e){}else try{5!=h.player.getPlayerState()&&1!=h.player.getPlayerState()&&$(".player_ctrl").trigger("click")}catch(e){}}function c(e){e?$(".loading").fadeIn(h.fadespeed):$(".loading").fadeOut(h.fadespeed)}function f(){if(device.mobile()?h.mobile=!0:$(window).width()<=1024?h.mobile=!0:h.mobile=!1,h.mobile){$(".page_box .page1").css("height",$(window).height()),$(".page_box .page3").css("height",$(window).height());try{1==h.player_loop.getPlayerState()&&h.player_loop.pauseVideo(),1==h.player.getPlayerState()?$(".player_ctrl").addClass("on"):$(".player_ctrl").removeClass("on")}catch(e){}}else{$(".page_box .page1").attr("style",""),$(".page_box .page3").attr("style","");try{$(".play_btn").hasClass("off")?(h.player_loop.pauseVideo(),$("#player_loop").fadeOut(h.fadespeed),$(".play_btn").fadeOut(h.fadespeed)):h.player_loop.playVideo(),1==h.player.getPlayerState()?($("#player_loop").fadeOut(h.fadespeed),$(".player_ctrl").removeClass("on").fadeIn(h.fadespeed)):$(".play_btn").hasClass("off")?$(".player_ctrl").addClass("on").fadeIn(h.fadespeed):$(".player_ctrl").removeClass("on").fadeOut(h.fadespeed)}catch(e){}r()}if(h.mobile)h.videoW=$(".page_box .page3").width(),h.videoH=$(".page_box .page3").height();else{var a=$(".page_box .page3").width()/$(".page_box .page3").height(),o=640/360;a>o?(h.videoW=$(".page_box .page3").width(),h.videoH=$(".page_box .page3").width()/o):a<o?(h.videoH=$(".page_box .page3").height(),h.videoW=h.videoH*o):a==o&&(h.videoW=$(".page_box .page3").width(),h.videoH=$(".page_box .page3").height())}$(".video").css({width:h.videoW,height:h.videoH})}var h={wrp:$(".wrapper"),fadespeed:500,canwheel:!0,hasWatchvideo:!1,videohasready:0,videoW:$(window).width(),videoH:$(window).height(),warningtxt:"請先欣賞完景點影片，即可往下繼續瀏覽。",videoID_loop:"722u9ZmgVtE",videoID_online:"eCiRnxgyLRk",nowpage:1};device.mobile()?h.mobile=!0:$(window).width()<=1024?h.mobile=!0:h.mobile=!1,null!=$.cookie("hasWatch_kasiboan_video")&&(h.hasWatchvideo=$.cookie("hasWatch_kasiboan_video"),"true"==h.hasWatchvideo&&($(".menubtn").fadeIn(h.fadespeed),h.mobile&&$(".pgm").fadeIn())),$(window).on("touchstart",function(){h.mobile&&($(".scroll_btn").hasClass("inMb")||$(".scroll_btn").addClass("inMb").fadeOut(h.fadespeed))}),$(".menua").click(function(){a($(this))}),$(".player_ctrl").click(function(){$(this).hasClass("on")?($(this).removeClass("on"),h.player.playVideo()):($(this).addClass("on"),h.player.pauseVideo())}),$(".play_btn").click(function(){o()}),$(".page1 .bg").each(n),$(".menubtn").click(function(){p($(this).hasClass("on")?!1:!0)}),$.address.change(i),window.onmousewheel=function(e){s(e)},$(window).resize(f),$(window).load(e)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIndpbmRvd2xvYWQiLCJjaGVja21vYmlsZSIsIm9iaiIsIm1vYmlsZSIsInNob3dNZW51Iiwic2V0VGltZW91dCIsInNob3dMb2FkaW5nIiwiZmFkZXNwZWVkIiwiY3JlYXRlVmlkZW8iLCJ2aWRlb0lEX2xvb3AiLCJ2aWRlb0lEX29ubGluZSIsIm1lbnVhQ2xpY2siLCJfbyIsImhhc0NsYXNzIiwiYWRkQ2xhc3MiLCJmYWRlT3V0IiwibWVudVRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJub3dwYWdlIiwiYXR0ciIsImNoZWNrbm93cGFnZXNjcm9sbCIsImFkZHJlc3MiLCJ2YWx1ZSIsInN0YXJ0VmlkZW8iLCJoYXNXYXRjaHZpZGVvIiwiY29va2llIiwicGxheWVyX2xvb3AiLCJwYXVzZVZpZGVvIiwicGxheWVyIiwicGxheVZpZGVvIiwiZmFkZUluIiwiX2lkIiwiX2F1dG9wbGF5IiwiX29iaiIsIl9jb24iLCJZVCIsIlBsYXllciIsImhlaWdodCIsIndpZHRoIiwidmlkZW9JZCIsInBsYXllclZhcnMiLCJjb250cm9scyIsImF1dG9wbGF5IiwiZW5hYmxlanNhcGkiLCJoZCIsInJlbCIsInNob3dpbmZvIiwibW9kZXN0YnJhbmRpbmciLCJjY19sb2FkX3BvbGljeSIsIndtb2RlIiwiZXZlbnRzIiwib25SZWFkeSIsInZpZGVvUmVhZHkiLCJvblN0YXRlQ2hhbmdlIiwib25QbGF5ZXJTdGF0ZUNoYW5nZSIsImV2ZW50IiwidGFyZ2V0IiwiYSIsImlkIiwibXV0ZSIsInZpZGVvaGFzcmVhZHkiLCJnZXRQbGF5ZXJTdGF0ZSIsInJlbW92ZUNsYXNzIiwiZGF0YSIsIlBsYXllclN0YXRlIiwiRU5ERUQiLCJiYW5uZXJmYyIsImNoYW5nZSIsIl9ub3ciLCJfbGVuZ3RoIiwiX3ByZSIsIl9saSIsImVxIiwidGhpcyIsImZpbmQiLCJsZW5ndGgiLCJfdCIsImFkZHJDaGFuZ2UiLCJjaGVja25vd3BhZ2UiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwidG9wIiwib25tb3VzZXdoZWVsZmMiLCJlIiwicHJldmVudERlZmF1bHQiLCJjYW53aGVlbCIsIndoZWVsRGVsdGEiLCJhbGVydCIsIndhcm5pbmd0eHQiLCJwYWdlMlRpbWVvdXQiLCJwYWdlNVRpbWVvdXQiLCJ0cmlnZ2VyIiwiZXJyIiwiZGV2aWNlIiwid2luZG93IiwiY3NzIiwidmlkZW9XIiwidmlkZW9IIiwiX3ciLCJfdiIsIndycCIsIm9uIiwiY2xpY2siLCJlYWNoIiwib25tb3VzZXdoZWVsIiwicmVzaXplIiwibG9hZCJdLCJtYXBwaW5ncyI6IkFBQUFBLEVBQUVDLFVBQVVDLE1BQU0sV0F3RGpCLFFBQVNDLEtBQ1JDLElBQ0dDLEVBQUlDLFNBQ05DLEdBQVMsR0FDTkMsV0FBVyxXQUFXQyxHQUFZLElBQVNKLEVBQUlLLFlBRW5EQyxFQUFZLGNBQWNOLEVBQUlPLGNBQWEsR0FDM0NELEVBQVksU0FBU04sRUFBSVEsZ0JBQWUsR0FJekMsUUFBU0MsR0FBV0MsR0FDbkJSLEdBQVMsR0FDTFAsRUFBRSxlQUFlZ0IsU0FBUyxTQUFTaEIsRUFBRSxlQUFlaUIsU0FBUyxRQUFRQyxRQUFRYixFQUFJSyxXQUNsRkwsRUFBSWMsYUFBYUMsYUFBYWYsRUFBSWMsYUFDckNkLEVBQUljLFlBQWNYLFdBQVcsV0FDNUJILEVBQUlnQixRQUFVTixFQUFHTyxLQUFLLFlBQ3RCQyxJQUNBdkIsRUFBRXdCLFFBQVFDLE1BQU0sUUFBUXBCLEVBQUlnQixVQUMzQmhCLEVBQUlLLFdBRVAsUUFBU2dCLEtBQ1JyQixFQUFJc0IsZUFBZ0IsRUFDakIzQixFQUFFNEIsT0FBTywyQkFBMEIsR0FDdEN2QixFQUFJd0IsWUFBWUMsYUFDaEJ6QixFQUFJMEIsT0FBT0MsWUFDWGhDLEVBQUUsZ0JBQWdCa0IsUUFBUWIsRUFBSUssV0FDOUJWLEVBQUUsZ0JBQWdCaUMsT0FBTzVCLEVBQUlLLFdBQzdCVixFQUFFLFdBQVdpQyxPQUFPNUIsRUFBSUss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IiwiZmlsZSI6ImNvbW1vbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcblx0Ly9Jbml0XHJcblx0dmFyIG9iaiA9e1xyXG5cdFx0d3JwOiAkKCcud3JhcHBlcicpLFxyXG5cdFx0ZmFkZXNwZWVkOiA1MDAsXHJcblx0XHRjYW53aGVlbDogdHJ1ZSxcclxuXHRcdGhhc1dhdGNodmlkZW86IGZhbHNlLFxyXG5cdFx0dmlkZW9oYXNyZWFkeTogMCxcclxuXHRcdHZpZGVvVzogJCh3aW5kb3cpLndpZHRoKCksXHJcblx0XHR2aWRlb0g6ICQod2luZG93KS5oZWlnaHQoKSxcclxuXHRcdHdhcm5pbmd0eHQ6ICfoq4vlhYjmrKPos57lrozmma/pu57lvbHniYfvvIzljbPlj6/lvoDkuIvnubznuozngI/opr3jgIInLFxyXG5cdFx0dmlkZW9JRF9sb29wOic3MjJ1OVptZ1Z0RScsXHJcblx0XHR2aWRlb0lEX29ubGluZTonZUNpUm54Z3lMUmsnLFxyXG5cdFx0bm93cGFnZTogMVxyXG5cdH07XHJcblx0aWYoZGV2aWNlLm1vYmlsZSgpKSBvYmoubW9iaWxlID0gdHJ1ZTtcclxuXHRlbHNle1xyXG5cdFx0aWYoJCh3aW5kb3cpLndpZHRoKCk8PTEwMjQpIG9iai5tb2JpbGUgPSB0cnVlO1xyXG5cdFx0ZWxzZSBvYmoubW9iaWxlID0gZmFsc2U7XHRcdFxyXG5cdH1cclxuXHRpZigkLmNvb2tpZShcImhhc1dhdGNoX2thc2lib2FuX3ZpZGVvXCIpIT1udWxsKXtcclxuXHRcdG9iai5oYXNXYXRjaHZpZGVvPSQuY29va2llKFwiaGFzV2F0Y2hfa2FzaWJvYW5fdmlkZW9cIik7XHJcblx0XHRpZihvYmouaGFzV2F0Y2h2aWRlbz09J3RydWUnKXtcclxuXHRcdFx0JCgnLm1lbnVidG4nKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdGlmKG9iai5tb2JpbGUpICQoJy5wZ20nKS5mYWRlSW4oKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vQWRkTGlzdGVuZXJcclxuXHQkKHdpbmRvdykub24oXCJ0b3VjaHN0YXJ0XCIsZnVuY3Rpb24oKXtcclxuXHRcdGlmKG9iai5tb2JpbGUpe1xyXG4gIFx0XHRcdGlmKCEkKCcuc2Nyb2xsX2J0bicpLmhhc0NsYXNzKCdpbk1iJykpICQoJy5zY3JvbGxfYnRuJykuYWRkQ2xhc3MoJ2luTWInKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG4gIFx0XHR9XHJcblx0fSk7XHJcblx0JCgnLm1lbnVhJykuY2xpY2soZnVuY3Rpb24oKXttZW51YUNsaWNrKCQodGhpcykpO30pO1xyXG5cdCQoJy5wbGF5ZXJfY3RybCcpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcblx0XHRpZigkKHRoaXMpLmhhc0NsYXNzKCdvbicpKXtcclxuXHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdFx0b2JqLnBsYXllci5wbGF5VmlkZW8oKTtcclxuXHRcdH1cclxuXHRcdGVsc2V7XHJcblx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ29uJyk7XHJcblx0XHRcdG9iai5wbGF5ZXIucGF1c2VWaWRlbygpO1x0XHJcblx0XHR9XHJcblx0fSlcclxuXHQkKCcucGxheV9idG4nKS5jbGljayhmdW5jdGlvbigpe3N0YXJ0VmlkZW8oKTt9KTtcclxuXHQvLyAkKCcuc2Nyb2xsX2J0bicpLmNsaWNrKGZ1bmN0aW9uKCl7c2Nyb2xsX2J0bmNsaWNrKCk7fSk7XHJcblx0JCgnLnBhZ2UxIC5iZycpLmVhY2goYmFubmVyZmMpO1xyXG5cdCQoJy5tZW51YnRuJykuY2xpY2soZnVuY3Rpb24oKXtcclxuXHRcdGlmKCQodGhpcykuaGFzQ2xhc3MoJ29uJykpc2hvd01lbnUoZmFsc2UpO1xyXG5cdFx0ZWxzZSBzaG93TWVudSh0cnVlKTtcclxuXHR9KTtcclxuXHQkLmFkZHJlc3MuY2hhbmdlKGFkZHJDaGFuZ2UpO1xyXG5cdHdpbmRvdy5vbm1vdXNld2hlZWw9IGZ1bmN0aW9uKGUpe29ubW91c2V3aGVlbGZjKGUpO31cclxuXHQkKHdpbmRvdykucmVzaXplKGNoZWNrbW9iaWxlKTtcclxuXHQkKHdpbmRvdykubG9hZCh3aW5kb3dsb2FkKTtcclxuXHRmdW5jdGlvbiB3aW5kb3dsb2FkKCl7XHJcblx0XHRjaGVja21vYmlsZSgpO1xyXG5cdFx0aWYob2JqLm1vYmlsZSl7XHJcblx0XHRcdHNob3dNZW51KGZhbHNlKTtcclxuICAgIFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7c2hvd0xvYWRpbmcoZmFsc2UpO30sb2JqLmZhZGVzcGVlZCk7XHJcblx0XHR9XHJcblx0XHRjcmVhdGVWaWRlbygncGxheWVyX2xvb3AnLG9iai52aWRlb0lEX2xvb3AsdHJ1ZSk7XHJcblx0XHRjcmVhdGVWaWRlbygncGxheWVyJyxvYmoudmlkZW9JRF9vbmxpbmUsZmFsc2UpO1xyXG5cdH1cclxuXHJcblx0Ly9FdmVudFxyXG5cdGZ1bmN0aW9uIG1lbnVhQ2xpY2soX28pe1xyXG5cdFx0c2hvd01lbnUoZmFsc2UpO1xyXG5cdFx0aWYoISQoJy5zY3JvbGxfYnRuJykuaGFzQ2xhc3MoJ2luTWInKSkgJCgnLnNjcm9sbF9idG4nKS5hZGRDbGFzcygnaW5NYicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRpZihvYmoubWVudVRpbWVvdXQpIGNsZWFyVGltZW91dChvYmoubWVudVRpbWVvdXQpO1xyXG5cdFx0b2JqLm1lbnVUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdFx0XHRvYmoubm93cGFnZSA9IF9vLmF0dHIoJ2RhdGEtbnVtJyk7XHJcblx0XHRcdGNoZWNrbm93cGFnZXNjcm9sbCgpO1xyXG5cdFx0XHQkLmFkZHJlc3MudmFsdWUoXCIvcGFnZVwiK29iai5ub3dwYWdlKTtcclxuXHRcdH0sb2JqLmZhZGVzcGVlZCk7XHRcdFxyXG5cdH1cclxuXHRmdW5jdGlvbiBzdGFydFZpZGVvKCl7XHRcdFxyXG5cdFx0b2JqLmhhc1dhdGNodmlkZW8gPSB0cnVlO1xyXG4gICAgXHQkLmNvb2tpZShcImhhc1dhdGNoX2thc2lib2FuX3ZpZGVvXCIsdHJ1ZSk7XHJcblx0XHRvYmoucGxheWVyX2xvb3AucGF1c2VWaWRlbygpO1xyXG5cdFx0b2JqLnBsYXllci5wbGF5VmlkZW8oKTtcdFx0XHJcblx0XHQkKCcjcGxheWVyX2xvb3AnKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0JCgnLnBsYXllcl9jdHJsJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0JCgnI3BsYXllcicpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuXHR9XHJcblx0ZnVuY3Rpb24gY3JlYXRlVmlkZW8oX28sX2lkLF9hdXRvcGxheSl7XHJcblx0XHR2YXIgX29iajtcdFx0XHJcblx0XHR2YXIgX2NvbiA9IDA7XHJcblx0XHRpZihvYmoubW9iaWxlKXtcclxuXHRcdFx0X2NvbiA9IDE7XHJcblx0XHRcdF9hdXRvcGxheT1mYWxzZTtcclxuXHRcdH1cclxuICAgICAgICBfb2JqID0gbmV3IFlULlBsYXllcihfbywge1xyXG4gICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXHJcbiAgICAgICAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAgICAgICAgdmlkZW9JZDogX2lkLFxyXG4gICAgICAgICAgcGxheWVyVmFyczp7XHJcbiAgICAgICAgICAgICdjb250cm9scyc6X2NvbixcclxuICAgICAgICAgICAgJ2F1dG9wbGF5JzpfYXV0b3BsYXksXHJcbiAgICAgICAgICAgICdlbmFibGVqc2FwaSc6JzAnLFxyXG4gICAgICAgICAgICAnaGQnOicxJyxcclxuICAgICAgICAgICAgJ3JlbCc6JzAnLFxyXG4gICAgICAgICAgICAnc2hvd2luZm8nOicwJyxcclxuICAgICAgICAgICAgJ21vZGVzdGJyYW5kaW5nJzonMScsXHJcbiAgICAgICAgICAgICdjY19sb2FkX3BvbGljeSc6JzEnLFxyXG4gICAgICAgICAgICAnd21vZGUnOid0cmFuc3BhcmVudCcgICAgICBcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBldmVudHM6IHtcclxuXHQgICAgICAgICdvblJlYWR5JzogdmlkZW9SZWFkeSxcclxuXHQgICAgICAgICdvblN0YXRlQ2hhbmdlJzogb25QbGF5ZXJTdGF0ZUNoYW5nZVxyXG5cdCAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZihfbyA9PSAncGxheWVyX2xvb3AnKSAgb2JqLnBsYXllcl9sb29wID0gX29iajtcclxuXHRcdGVsc2UgaWYoX28gPT0gJ3BsYXllcicpIG9iai5wbGF5ZXIgPSBfb2JqO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdmlkZW9SZWFkeShldmVudCl7XHJcbiAgICBcdGlmKGV2ZW50LnRhcmdldC5hLmlkID09ICdwbGF5ZXJfbG9vcCcpIG9iai5wbGF5ZXJfbG9vcC5tdXRlKCk7XHJcbiAgICBcdG9iai52aWRlb2hhc3JlYWR5Kz0xO1xyXG4gICAgXHRpZihvYmoudmlkZW9oYXNyZWFkeSA+PTIpe1xyXG4gICAgXHRcdHNob3dNZW51KGZhbHNlKTtcclxuICAgIFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICBcdFx0XHRzaG93TG9hZGluZyhmYWxzZSk7XHJcbiAgICBcdFx0fSxvYmouZmFkZXNwZWVkKTsgICAgXHRcdFxyXG4gICAgXHR9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBvblBsYXllclN0YXRlQ2hhbmdlKGV2ZW50KXtcclxuICAgIFx0aWYob2JqLm1vYmlsZSl7XHJcbiAgICBcdFx0aWYob2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpID09MSl7XHJcbiAgICBcdFx0XHQkKCcucGxheWVyX2N0cmwnKS5hZGRDbGFzcygnb24nKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG4gICAgXHRcdH1lbHNlICQoJy5wbGF5ZXJfY3RybCcpLnJlbW92ZUNsYXNzKCdvbicpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuICAgIFx0fVxyXG4gICAgXHRpZihldmVudC5kYXRhID09IFlULlBsYXllclN0YXRlLkVOREVEKXtcclxuICAgIFx0XHRpZihldmVudC50YXJnZXQuYS5pZCA9PSAncGxheWVyX2xvb3AnKSBvYmoucGxheWVyX2xvb3AucGxheVZpZGVvKCk7XHJcbiAgICBcdFx0ZWxzZSBpZihldmVudC50YXJnZXQuYS5pZCA9PSAncGxheWVyJyl7XHJcbiAgICBcdFx0XHQvLyBvYmouaGFzV2F0Y2h2aWRlbyA9IHRydWU7XHJcbiAgICBcdFx0XHQvLyAkLmNvb2tpZShcImhhc1dhdGNoX2thc2lib2FuX3ZpZGVvXCIsdHJ1ZSk7XHJcbiAgICBcdFx0XHQvLyAkKCcubWVudWJ0bicpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuICAgIFx0XHRcdC8vIGlmKG9iai5tb2JpbGUpICQoJy5wZ20nKS5mYWRlSW4oKTtcclxuICAgIFx0XHRcdCQoJy5wbGF5ZXJfY3RybCcpLmFkZENsYXNzKCdvbicpO1xyXG4gICAgXHRcdFx0b2JqLm5vd3BhZ2UgPSA0O1xyXG4gICAgXHRcdFx0Y2hlY2tub3dwYWdlc2Nyb2xsKCk7XHJcblx0XHRcdFx0JC5hZGRyZXNzLnZhbHVlKFwiL3BhZ2VcIitvYmoubm93cGFnZSk7XHJcbiAgICBcdFx0fSAgICBcdFx0XHJcbiAgICBcdH1cclxuICAgIFx0aWYob2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpID09MSl7XHJcbiAgICBcdFx0b2JqLmhhc1dhdGNodmlkZW8gPSB0cnVlO1xyXG5cdFx0XHQkLmNvb2tpZShcImhhc1dhdGNoX2thc2lib2FuX3ZpZGVvXCIsdHJ1ZSk7XHJcblx0XHRcdCQoJy5tZW51YnRuJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRpZihvYmoubW9iaWxlKSAkKCcucGdtJykuZmFkZUluKCk7XHJcbiAgICBcdFx0aWYoISQoJy5wbGF5X2J0bicpLmhhc0NsYXNzKCdvZmYnKSkgJCgnLnBsYXlfYnRuJykuYWRkQ2xhc3MoJ29mZicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7ICAgIFx0XHRcclxuICAgIFx0fVxyXG4gICAgfVxyXG5cdGZ1bmN0aW9uIHNjcm9sbF9idG5jbGljaygpe1xyXG5cdFx0b2JqLm5vd3BhZ2UrPTE7XHJcblx0XHRjaGVja25vd3BhZ2VzY3JvbGwoKTtcclxuXHRcdCQuYWRkcmVzcy52YWx1ZShcIi9wYWdlXCIrb2JqLm5vd3BhZ2UpO1xyXG5cdH1cdFxyXG5cdGZ1bmN0aW9uIGJhbm5lcmZjKCl7XHJcblx0XHR2YXIgX2xpID0gJCh0aGlzKS5maW5kKCdsaScpLFxyXG5cdFx0XHRfbGVuZ3RoID0gX2xpLmxlbmd0aCxcclxuXHRcdFx0X25vdyA9IC0xLF9wcmUgPSAtMTtcclxuXHJcblx0XHRjaGFuZ2UoKTtcclxuXHRcdGZ1bmN0aW9uIGNoYW5nZSgpe1xyXG5cdFx0XHRfbm93Kz0xO1xyXG5cdFx0XHRpZihfbm93Pl9sZW5ndGgtMSlfbm93PTA7XHJcblx0XHRcdGlmKF9wcmUhPS0xKXtcclxuXHRcdFx0XHRfbGkuZXEoX3ByZSkuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0XHRfbGkuZXEoX25vdykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1x0XHRcdFx0XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBfbGkuZXEoX25vdykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRfcHJlID0gX25vdztcclxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe2NoYW5nZSgpO30sNTAwMCk7XHJcblx0XHR9XHJcblx0fVxyXG5cdGZ1bmN0aW9uIHNob3dNZW51KF90KXtcclxuXHRcdGlmKF90KXtcclxuXHRcdFx0JCgnLm1lbnVkb20nKS5hZGRDbGFzcygnb24nKTtcclxuXHRcdFx0JCgnLm1lbnUnKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0JCgnLm1lbnVkb20nKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdFx0JCgnLm1lbnUnKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0fVxyXG5cdGZ1bmN0aW9uIGFkZHJDaGFuZ2UoKXtcclxuICAgIFx0dmFyIHZhbHVlID0gJC5hZGRyZXNzLnZhbHVlKCk7XHJcblx0XHRzd2l0Y2godmFsdWUpIHtcclxuXHRcdFx0Y2FzZSAnLyc6XHJcblx0XHRcdFx0b2JqLm5vd3BhZ2UgPSAxO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnL3BhZ2UxJzpcdFx0XHRcdFxyXG5cdFx0XHRcdG9iai5ub3dwYWdlID0gMTtcclxuXHRcdFx0YnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJy9wYWdlMic6XHJcbiAgICAgICAgICAgICAgICBvYmoubm93cGFnZSA9IDI7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTMnOlxyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSAzO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnL3BhZ2U0JzpcclxuICAgICAgICAgICAgICAgIG9iai5ub3dwYWdlID0gNDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJy9wYWdlNSc6XHJcbiAgICAgICAgICAgICAgICBvYmoubm93cGFnZSA9IDU7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTYnOlxyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSA2O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnL3BhZ2U3JzpcclxuICAgICAgICAgICAgICAgIG9iai5ub3dwYWdlID0gNztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBvYmoubm93cGFnZSA9IDE7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cdFx0fVxyXG5cdFx0Y2hlY2tub3dwYWdlKCk7XHJcblx0XHQkKCcucGFnZV9ib3gnKS5hdHRyKCdjbGFzcycsJ3BhZ2VfYm94IHBnJytvYmoubm93cGFnZSk7XHJcblx0XHRpZihvYmoubW9iaWxlKSAkKCdodG1sLGJvZHknKS5hbmltYXRlKHtzY3JvbGxUb3A6JCgnLnBhZ2UnICsgb2JqLm5vd3BhZ2UpLm9mZnNldCgpLnRvcH0sb2JqLmZhZGVzcGVlZCk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBvbm1vdXNld2hlZWxmYyhlKXtcclxuICAgIFx0aWYoISQoJy5zY3JvbGxfYnRuJykuaGFzQ2xhc3MoJ2luTWInKSkgJCgnLnNjcm9sbF9idG4nKS5hZGRDbGFzcygnaW5NYicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcbiAgICBcdGlmKCFvYmoubW9iaWxlKXtcclxuICAgIFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGlmKG9iai5jYW53aGVlbCl7XHJcblx0XHRcdFx0b2JqLmNhbndoZWVsID0gZmFsc2U7XHJcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe29iai5jYW53aGVlbD10cnVlO30sb2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0aWYoZS53aGVlbERlbHRhPjApIG9iai5ub3dwYWdlLT0xO1xyXG5cdFx0XHRcdGVsc2Ugb2JqLm5vd3BhZ2UrPTE7XHJcblx0XHRcdFx0Y2hlY2tub3dwYWdlc2Nyb2xsKCk7XHJcblx0XHRcdFx0JC5hZGRyZXNzLnZhbHVlKFwiL3BhZ2VcIitvYmoubm93cGFnZSk7XHJcblx0XHRcdH1cclxuICAgIFx0fVxyXG5cdH1cclxuXHRmdW5jdGlvbiBjaGVja25vd3BhZ2VzY3JvbGwoKXtcclxuXHRcdGlmKG9iai5ub3dwYWdlPDEpIG9iai5ub3dwYWdlPTE7XHJcblx0XHRlbHNlIGlmKG9iai5ub3dwYWdlID49ICQoJy5wYWdlX2JveCAucGFnZScpLmxlbmd0aClvYmoubm93cGFnZSA9ICQoJy5wYWdlX2JveCAucGFnZScpLmxlbmd0aDtcclxuXHRcdC8vaGFzV2F0Y2h2aWRlb1xyXG5cdFx0aWYoIW9iai5oYXNXYXRjaHZpZGVvKXtcclxuXHRcdFx0aWYoIW9iai5tb2JpbGUpe1xyXG5cdFx0XHRcdGlmKG9iai5ub3dwYWdlPj0zKXtcclxuXHRcdFx0XHRcdGlmKG9iai5ub3dwYWdlIT0zKSBhbGVydChvYmoud2FybmluZ3R4dCk7XHJcblx0XHRcdFx0XHRvYmoubm93cGFnZT0zO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRmdW5jdGlvbiBjaGVja25vd3BhZ2UoKXtcclxuXHRcdC8vcGFnZUFuaVxyXG5cdFx0aWYob2JqLm5vd3BhZ2U9PTIpIG9iai5wYWdlMlRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JCgnLnBlcnNvbl9hbGwnKS5hZGRDbGFzcygnb24nKTt9LG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0ZWxzZXtcclxuXHRcdFx0Y2xlYXJUaW1lb3V0KG9iai5wYWdlMlRpbWVvdXQpO1xyXG5cdFx0XHQkKCcucGVyc29uX2FsbCcpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG5cdFx0fVxyXG5cdFx0aWYob2JqLm5vd3BhZ2U9PTUpIG9iai5wYWdlNVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JCgnLmljb25fYWxsJykuYWRkQ2xhc3MoJ29uJyk7fSxvYmouZmFkZXNwZWVkKTtcclxuXHRcdGVsc2V7XHJcblx0XHRcdGNsZWFyVGltZW91dChvYmoucGFnZTVUaW1lb3V0KTtcclxuXHRcdFx0JCgnLmljb25fYWxsJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly9jaGVja3ZpZGVvXHJcblx0XHRpZigkKCcucGxheV9idG4nKS5oYXNDbGFzcygnb2ZmJykpe1xyXG5cdFx0XHRpZihvYmoubm93cGFnZSE9Myl7XHJcblx0XHRcdFx0dHJ5e1xyXG5cdFx0XHRcdFx0aWYob2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpID09MSkgJCgnLnBsYXllcl9jdHJsJykudHJpZ2dlcihcImNsaWNrXCIpO1xyXG5cdFx0XHRcdH1jYXRjaChlcnIpe31cdFx0XHRcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0dHJ5e1xyXG5cdFx0XHRcdFx0aWYob2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpICE9NSAmJiBvYmoucGxheWVyLmdldFBsYXllclN0YXRlKCkgIT0xKSAkKCcucGxheWVyX2N0cmwnKS50cmlnZ2VyKFwiY2xpY2tcIik7XHJcblx0XHRcdFx0fWNhdGNoKGVycil7fVx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHR9XHRcdFxyXG5cdH1cclxuICBcdGZ1bmN0aW9uIHNob3dMb2FkaW5nKF90KXtcclxuICBcdFx0aWYoX3QpICQoJy5sb2FkaW5nJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG4gIFx0XHRlbHNlICQoJy5sb2FkaW5nJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuICBcdH0gIFx0XHJcbiAgXHRmdW5jdGlvbiBjaGVja21vYmlsZSgpe1xyXG4gIFx0XHRpZihkZXZpY2UubW9iaWxlKCkpIG9iai5tb2JpbGUgPSB0cnVlO1xyXG5cdFx0ZWxzZXtcclxuXHRcdFx0aWYoJCh3aW5kb3cpLndpZHRoKCk8PTEwMjQpIG9iai5tb2JpbGUgPSB0cnVlO1xyXG5cdFx0XHRlbHNlIG9iai5tb2JpbGUgPSBmYWxzZTtcdFx0XHJcblx0XHR9XHRcdFxyXG5cclxuXHRcdC8vcGFnZSBldmVudFxyXG5cdFx0aWYob2JqLm1vYmlsZSl7XHJcblx0XHRcdCQoJy5wYWdlX2JveCAucGFnZTEnKS5jc3MoJ2hlaWdodCcsJCh3aW5kb3cpLmhlaWdodCgpKTtcclxuXHRcdFx0JCgnLnBhZ2VfYm94IC5wYWdlMycpLmNzcygnaGVpZ2h0JywkKHdpbmRvdykuaGVpZ2h0KCkpO1xyXG5cdFx0XHR0cnl7XHJcblx0XHRcdFx0aWYob2JqLnBsYXllcl9sb29wLmdldFBsYXllclN0YXRlKCkgPT0xKSBvYmoucGxheWVyX2xvb3AucGF1c2VWaWRlbygpO1xyXG5cdFx0XHRcdGlmKG9iai5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSA9PTEpICQoJy5wbGF5ZXJfY3RybCcpLmFkZENsYXNzKCdvbicpO1xyXG5cdFx0XHRcdGVsc2UgJCgnLnBsYXllcl9jdHJsJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHRcdH1jYXRjaChlcnIpe31cclxuXHRcdH1lbHNle1xyXG5cdFx0XHQkKCcucGFnZV9ib3ggLnBhZ2UxJykuYXR0cignc3R5bGUnLCcnKTtcclxuXHRcdFx0JCgnLnBhZ2VfYm94IC5wYWdlMycpLmF0dHIoJ3N0eWxlJywnJyk7XHJcblx0XHRcdHRyeXtcclxuXHRcdFx0XHRpZighJCgnLnBsYXlfYnRuJykuaGFzQ2xhc3MoJ29mZicpKSBvYmoucGxheWVyX2xvb3AucGxheVZpZGVvKCk7XHJcblx0XHRcdFx0ZWxzZXtcclxuXHRcdFx0XHRcdG9iai5wbGF5ZXJfbG9vcC5wYXVzZVZpZGVvKCk7XHJcblx0XHRcdFx0XHQkKCcjcGxheWVyX2xvb3AnKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRcdFx0JCgnLnBsYXlfYnRuJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYob2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpID09MSl7XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0JCgnI3BsYXllcl9sb29wJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0XHRcdCQoJy5wbGF5ZXJfY3RybCcpLnJlbW92ZUNsYXNzKCdvbicpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcdFx0XHRcdFx0XHJcblx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRpZighJCgnLnBsYXlfYnRuJykuaGFzQ2xhc3MoJ29mZicpKSAkKCcucGxheWVyX2N0cmwnKS5yZW1vdmVDbGFzcygnb24nKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRcdFx0ZWxzZSAkKCcucGxheWVyX2N0cmwnKS5hZGRDbGFzcygnb24nKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9Y2F0Y2goZXJyKXt9XHRcdFx0XHJcblx0XHRcdGNoZWNrbm93cGFnZXNjcm9sbCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vdmlkZW8gd2lkdGggaGVpZ2h0XHJcblx0XHRpZihvYmoubW9iaWxlKXtcclxuXHRcdFx0b2JqLnZpZGVvVyA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS53aWR0aCgpO1xyXG5cdFx0ICAgIG9iai52aWRlb0ggPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykuaGVpZ2h0KCk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0dmFyIF93ID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLndpZHRoKCkgLyAkKCcucGFnZV9ib3ggLnBhZ2UzJykuaGVpZ2h0KCk7XHJcblx0XHRcdHZhciBfdiA9IDY0MCAvIDM2MDtcclxuXHRcdFx0aWYoX3c+X3Ype1xyXG5cdFx0ICAgICAgICBvYmoudmlkZW9XID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLndpZHRoKCk7XHJcblx0XHQgICAgICAgIG9iai52aWRlb0ggPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykud2lkdGgoKSAvIF92O1xyXG5cdFx0ICAgIH1lbHNlIGlmKF93PF92KXtcclxuXHRcdCAgICBcdG9iai52aWRlb0ggPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykuaGVpZ2h0KCk7XHJcblx0XHQgICAgXHRvYmoudmlkZW9XID0gb2JqLnZpZGVvSCAqIF92O1xyXG5cdFx0ICAgIH1lbHNlIGlmKF93PT1fdil7XHJcblx0XHQgICAgICAgIG9iai52aWRlb1cgPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykud2lkdGgoKTtcclxuXHRcdCAgICAgICAgb2JqLnZpZGVvSCA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS5oZWlnaHQoKTtcclxuXHRcdCAgICB9XHRcdFx0XHJcblx0XHR9XHJcblx0XHQkKCcudmlkZW8nKS5jc3Moeyd3aWR0aCc6b2JqLnZpZGVvVywnaGVpZ2h0JzpvYmoudmlkZW9IfSk7XHJcbiAgXHR9XHJcbn0pLy9yZWFkeSBlbmQgIFxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=

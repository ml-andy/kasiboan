$(document).ready(function(){function e(){y(),t("player_loop","722u9ZmgVtE",!0),t("player","MaAj77BvA2I",!1)}function a(e){s(!1),h.menuTimeout&&clearTimeout(h.menuTimeout),h.menuTimeout=setTimeout(function(){h.nowpage=e.attr("data-num"),g(),$.address.value("/page"+h.nowpage)},h.fadespeed)}function o(){h.player_loop.pauseVideo(),h.player.playVideo(),$("#player_loop").fadeOut(h.fadespeed),$(".player_ctrl").fadeIn(h.fadespeed),$("#player").fadeIn(h.fadespeed)}function t(e,a,o){var t,n=0;h.mobile&&(n=1,o=!1),t=new YT.Player(e,{height:"100%",width:"100%",videoId:a,playerVars:{controls:n,autoplay:o,enablejsapi:"0",hd:"1",rel:"0",showinfo:"0",modestbranding:"1",cc_load_policy:"1",wmode:"transparent"},events:{onReady:l,onStateChange:p}}),"player_loop"==e?h.player_loop=t:"player"==e&&(h.player=t)}function l(e){h.videohasready+=1,h.videohasready>=2&&f(!1)}function p(e){h.mobile&&(1==h.player.getPlayerState()?$(".player_ctrl").addClass("on").fadeOut(h.fadespeed):$(".player_ctrl").removeClass("on").fadeIn(h.fadespeed)),e.data==YT.PlayerState.ENDED&&("player_loop"==e.target.a.id?h.player_loop.playVideo():"player"==e.target.a.id&&(h.hasWatchvideo=!0,$(".player_ctrl").addClass("on"),n())),1==h.player.getPlayerState()&&($(".play_btn").hasClass("off")||$(".play_btn").addClass("off").fadeOut(h.fadespeed))}function n(){h.nowpage+=1,g(),$.address.value("/page"+h.nowpage)}function d(){function e(){t+=1,t>o-1&&(t=0),l!=-1?(a.eq(l).fadeOut(h.fadespeed),a.eq(t).fadeIn(h.fadespeed)):a.eq(t).fadeIn(h.fadespeed),l=t,setTimeout(function(){e()},5e3)}var a=$(this).find("li"),o=a.length,t=-1,l=-1;e()}function s(e){e?($(".menudom").addClass("on"),$(".menu").fadeIn(h.fadespeed)):($(".menudom").removeClass("on"),$(".menu").fadeOut(h.fadespeed))}function i(){var e=$.address.value();switch(e){case"/":h.nowpage=1;break;case"/page1":h.nowpage=1;break;case"/page2":h.nowpage=2;break;case"/page3":h.nowpage=3;break;case"/page4":h.nowpage=4;break;case"/page5":h.nowpage=5;break;case"/page6":h.nowpage=6;break;case"/page7":h.nowpage=7;break;default:h.nowpage=1}c(),$(".page_box").attr("class","page_box pg"+h.nowpage),h.mobile&&$("html,body").animate({scrollTop:$(".page"+h.nowpage).offset().top},h.fadespeed)}function r(e){h.mobile||(e.preventDefault(),h.canwheel&&(h.canwheel=!1,setTimeout(function(){h.canwheel=!0},h.fadespeed),e.wheelDelta>0?h.nowpage-=1:h.nowpage+=1,g(),$.address.value("/page"+h.nowpage)))}function g(){h.nowpage<1?h.nowpage=1:h.nowpage>=$(".page_box .page").length&&(h.nowpage=$(".page_box .page").length);var e=!0;h.nowpage==$(".page_box .page").length?e=!1:h.hasWatchvideo||h.mobile||h.nowpage>=3&&(3!=h.nowpage&&alert(h.warningtxt),h.nowpage=3,e=!1),e?$(".scroll_btn").hasClass("on")||$(".scroll_btn").addClass("on").fadeIn(h.fadespeed):$(".scroll_btn").removeClass("on").fadeOut(h.fadespeed)}function c(){if(2==h.nowpage?h.page2Timeout=setTimeout(function(){$(".person_all").addClass("on")},h.fadespeed):(clearTimeout(h.page2Timeout),$(".person_all").removeClass("on")),5==h.nowpage?h.page5Timeout=setTimeout(function(){$(".icon_all").addClass("on")},h.fadespeed):(clearTimeout(h.page5Timeout),$(".icon_all").removeClass("on")),$(".play_btn").hasClass("off"))if(3!=h.nowpage)try{1==h.player.getPlayerState()&&$(".player_ctrl").trigger("click")}catch(e){}else try{5!=h.player.getPlayerState()&&1!=h.player.getPlayerState()&&$(".player_ctrl").trigger("click")}catch(e){}}function f(e){e?$(".loading").fadeIn(h.fadespeed):$(".loading").fadeOut(h.fadespeed)}function u(){h.mobile&&$(".scroll_btn").hasClass("on")&&$(".scroll_btn").removeClass("on").fadeOut(h.fadespeed)}function y(){if(device.mobile()?h.mobile=!0:$(window).width()<=1024?h.mobile=!0:h.mobile=!1,h.mobile)h.videoW=$(".page_box .page3").width(),h.videoH=$(".page_box .page3").height();else{var e=$(".page_box .page3").width()/$(".page_box .page3").height(),a=640/360;e>a?(h.videoW=$(".page_box .page3").width(),h.videoH=$(".page_box .page3").width()/a):e<a?(h.videoH=$(".page_box .page3").height(),h.videoW=h.videoH*a):windowsize==videosize&&(h.videoW=$(".page_box .page3").width(),h.videoH=$(".page_box .page3").height())}if($(".video").css({width:h.videoW,height:h.videoH}),h.mobile){$(".page_box .page1").css("height",$(window).height()),$(".page_box .page3").css("height",$(window).height());try{1==h.player_loop.getPlayerState()&&h.player_loop.pauseVideo(),1==h.player.getPlayerState()?$(".player_ctrl").addClass("on"):$(".player_ctrl").removeClass("on")}catch(o){}$("html,body").animate({scrollTop:$(".page"+h.nowpage).offset().top},h.fadespeed)}else{$(".page_box .page1").attr("style",""),$(".page_box .page3").attr("style","");try{$(".play_btn").hasClass("off")?(h.player_loop.pauseVideo(),$("#player_loop").fadeOut(h.fadespeed),$(".play_btn").fadeOut(h.fadespeed)):h.player_loop.playVideo(),1==h.player.getPlayerState()?($("#player_loop").fadeOut(h.fadespeed),$(".player_ctrl").removeClass("on").fadeIn(h.fadespeed)):$(".play_btn").hasClass("off")?$(".player_ctrl").addClass("on").fadeIn(h.fadespeed):$(".player_ctrl").removeClass("on").fadeOut(h.fadespeed)}catch(o){}g()}}var h={wrp:$(".wrapper"),fadespeed:500,canwheel:!0,hasWatchvideo:!1,videohasready:0,videoW:$(window).width(),videoH:$(window).height(),warningtxt:"請先欣賞完景點影片，即可往下繼續瀏覽。",nowpage:1};$(".menua").click(function(){a($(this))}),$(".player_ctrl").click(function(){$(this).hasClass("on")?($(this).removeClass("on"),h.player.playVideo()):($(this).addClass("on"),h.player.pauseVideo())}),$(".play_btn").click(function(){o()}),$(".scroll_btn").click(function(){n()}),$(".page1 .bg").each(d),$(".menubtn").click(function(){s($(this).hasClass("on")?!1:!0)}),$.address.change(i),window.onscroll=u,window.onmousewheel=function(e){r(e)},$(window).resize(y),$(window).load(e)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIndpbmRvd2xvYWQiLCJjaGVja21vYmlsZSIsImNyZWF0ZVZpZGVvIiwibWVudWFDbGljayIsIl9vIiwic2hvd01lbnUiLCJvYmoiLCJtZW51VGltZW91dCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJub3dwYWdlIiwiYXR0ciIsImNoZWNrbm93cGFnZXNjcm9sbCIsImFkZHJlc3MiLCJ2YWx1ZSIsImZhZGVzcGVlZCIsInN0YXJ0VmlkZW8iLCJwbGF5ZXJfbG9vcCIsInBhdXNlVmlkZW8iLCJwbGF5ZXIiLCJwbGF5VmlkZW8iLCJmYWRlT3V0IiwiZmFkZUluIiwiX2lkIiwiX2F1dG9wbGF5IiwiX29iaiIsIl9jb24iLCJtb2JpbGUiLCJZVCIsIlBsYXllciIsImhlaWdodCIsIndpZHRoIiwidmlkZW9JZCIsInBsYXllclZhcnMiLCJjb250cm9scyIsImF1dG9wbGF5IiwiZW5hYmxlanNhcGkiLCJoZCIsInJlbCIsInNob3dpbmZvIiwibW9kZXN0YnJhbmRpbmciLCJjY19sb2FkX3BvbGljeSIsIndtb2RlIiwiZXZlbnRzIiwib25SZWFkeSIsInZpZGVvUmVhZHkiLCJvblN0YXRlQ2hhbmdlIiwib25QbGF5ZXJTdGF0ZUNoYW5nZSIsImV2ZW50IiwidmlkZW9oYXNyZWFkeSIsInNob3dMb2FkaW5nIiwiZ2V0UGxheWVyU3RhdGUiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiZGF0YSIsIlBsYXllclN0YXRlIiwiRU5ERUQiLCJ0YXJnZXQiLCJhIiwiaWQiLCJoYXNXYXRjaHZpZGVvIiwic2Nyb2xsX2J0bmNsaWNrIiwiaGFzQ2xhc3MiLCJiYW5uZXJmYyIsImNoYW5nZSIsIl9ub3ciLCJfbGVuZ3RoIiwiX3ByZSIsIl9saSIsImVxIiwidGhpcyIsImZpbmQiLCJsZW5ndGgiLCJfdCIsImFkZHJDaGFuZ2UiLCJjaGVja25vd3BhZ2UiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwidG9wIiwib25tb3VzZXdoZWVsZmMiLCJlIiwicHJldmVudERlZmF1bHQiLCJjYW53aGVlbCIsIndoZWVsRGVsdGEiLCJfY2Fuc2hvdyIsImFsZXJ0Iiwid2FybmluZ3R4dCIsInBhZ2UyVGltZW91dCIsInBhZ2U1VGltZW91dCIsInRyaWdnZXIiLCJlcnIiLCJ3aW5kb3dPbnNjcm9sbCIsImRldmljZSIsIndpbmRvdyIsInZpZGVvVyIsInZpZGVvSCIsIl93IiwiX3YiLCJ3aW5kb3dzaXplIiwidmlkZW9zaXplIiwiY3NzIiwid3JwIiwiY2xpY2siLCJlYWNoIiwib25zY3JvbGwiLCJvbm1vdXNld2hlZWwiLCJyZXNpemUiLCJsb2FkIl0sIm1hcHBpbmdzIjoiQUFBQUEsRUFBRUMsVUFBVUMsTUFBTSxXQXlDakIsUUFBU0MsS0FDUkMsSUFDQUMsRUFBWSxjQUFjLGVBQWMsR0FDeENBLEVBQVksU0FBUyxlQUFjLEdBSXBDLFFBQVNDLEdBQVdDLEdBQ25CQyxHQUFTLEdBQ05DLEVBQUlDLGFBQWFDLGFBQWFGLEVBQUlDLGFBQ3JDRCxFQUFJQyxZQUFjRSxXQUFXLFdBQzVCSCxFQUFJSSxRQUFVTixFQUFHTyxLQUFLLFlBQ3RCQyxJQUNBZixFQUFFZ0IsUUFBUUMsTUFBTSxRQUFRUixFQUFJSSxVQUMzQkosRUFBSVMsV0FFUCxRQUFTQyxLQUNSVixFQUFJVyxZQUFZQyxhQUNoQlosRUFBSWEsT0FBT0MsWUFDWHZCLEVBQUUsZ0JBQWdCd0IsUUFBUWYsRUFBSVMsV0FDOUJsQixFQUFFLGdCQUFnQnlCLE9BQU9oQixFQUFJUyxXQUM3QmxCLEVBQUUsV0FBV3lCLE9BQU9oQixFQUFJUyxXQUV6QixRQUFTYixHQUFZRSxFQUFHbUIsRUFBSUMsR0FDM0IsR0FBSUMsR0FDQUMsRUFBTyxDQUNScEIsR0FBSXFCLFNBQ05ELEVBQU8sRUFDUEYsR0FBVSxHQUVMQyxFQUFPLEdBQUlHLElBQUdDLE9BQU96QixHQUNuQjBCLE9BQVEsT0FDUkMsTUFBTyxPQUNQQyxRQUFTVCxFQUNUVSxZQUNF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bEJ5RCxXQUFZLHNCQUNaN0UsUUFBUyxFQVFWYixHQUFFLFVBQVUwRyxNQUFNLFdBQVdwRyxFQUFXTixFQUFFeUUsU0FDMUN6RSxFQUFFLGdCQUFnQjBHLE1BQU0sV0FDcEIxRyxFQUFFeUUsTUFBTVIsU0FBUyxPQUNuQmpFLEVBQUV5RSxNQUFNakIsWUFBWSxNQUNwQi9DLEVBQUlhLE9BQU9DLGNBR1h2QixFQUFFeUUsTUFBTWxCLFNBQVMsTUFDakI5QyxFQUFJYSxPQUFPRCxnQkFHYnJCLEVBQUUsYUFBYTBHLE1BQU0sV0FBV3ZGLE1BQ2hDbkIsRUFBRSxlQUFlMEcsTUFBTSxXQUFXMUMsTUFDbENoRSxFQUFFLGNBQWMyRyxLQUFLekMsR0FDckJsRSxFQUFFLFlBQVkwRyxNQUFNLFdBQ09sRyxFQUF2QlIsRUFBRXlFLE1BQU1SLFNBQVMsT0FBZSxHQUNyQixLQUVmakUsRUFBRWdCLFFBQVFtRCxPQUFPVSxHQUNqQm9CLE9BQU9XLFNBQVdiLEVBQ2xCRSxPQUFPWSxhQUFjLFNBQVN6QixHQUFHRCxFQUFlQyxJQUNoRHBGLEVBQUVpRyxRQUFRYSxPQUFPMUcsR0FDakJKLEVBQUVpRyxRQUFRYyxLQUFLNUciLCJmaWxlIjoiY29tbW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcclxuXHR2YXIgb2JqID17XHJcblx0XHR3cnA6ICQoJy53cmFwcGVyJyksXHJcblx0XHRmYWRlc3BlZWQ6IDUwMCxcclxuXHRcdGNhbndoZWVsOiB0cnVlLFxyXG5cdFx0aGFzV2F0Y2h2aWRlbzogZmFsc2UsXHJcblx0XHR2aWRlb2hhc3JlYWR5OiAwLFxyXG5cdFx0dmlkZW9XOiAkKHdpbmRvdykud2lkdGgoKSxcclxuXHRcdHZpZGVvSDogJCh3aW5kb3cpLmhlaWdodCgpLFxyXG5cdFx0d2FybmluZ3R4dDogJ+iri+WFiOaso+iznuWujOaZr+m7nuW9seeJh++8jOWNs+WPr+W+gOS4i+e5vOe6jOeAj+imveOAgicsXHJcblx0XHRub3dwYWdlOiAxXHJcblx0fTtcdFxyXG5cclxuXHQvL0luaXRcclxuXHQvLyBjaGVja21vYmlsZSgpO1xyXG5cdFxyXG5cclxuXHQvL0FkZExpc3RlbmVyXHJcblx0JCgnLm1lbnVhJykuY2xpY2soZnVuY3Rpb24oKXttZW51YUNsaWNrKCQodGhpcykpO30pO1xyXG5cdCQoJy5wbGF5ZXJfY3RybCcpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcblx0XHRpZigkKHRoaXMpLmhhc0NsYXNzKCdvbicpKXtcclxuXHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdFx0b2JqLnBsYXllci5wbGF5VmlkZW8oKTtcclxuXHRcdH1cclxuXHRcdGVsc2V7XHJcblx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ29uJyk7XHJcblx0XHRcdG9iai5wbGF5ZXIucGF1c2VWaWRlbygpO1x0XHJcblx0XHR9XHJcblx0fSlcclxuXHQkKCcucGxheV9idG4nKS5jbGljayhmdW5jdGlvbigpe3N0YXJ0VmlkZW8oKTt9KTtcclxuXHQkKCcuc2Nyb2xsX2J0bicpLmNsaWNrKGZ1bmN0aW9uKCl7c2Nyb2xsX2J0bmNsaWNrKCk7fSk7XHJcblx0JCgnLnBhZ2UxIC5iZycpLmVhY2goYmFubmVyZmMpO1xyXG5cdCQoJy5tZW51YnRuJykuY2xpY2soZnVuY3Rpb24oKXtcclxuXHRcdGlmKCQodGhpcykuaGFzQ2xhc3MoJ29uJykpc2hvd01lbnUoZmFsc2UpO1xyXG5cdFx0ZWxzZSBzaG93TWVudSh0cnVlKTtcclxuXHR9KTtcclxuXHQkLmFkZHJlc3MuY2hhbmdlKGFkZHJDaGFuZ2UpO1xyXG5cdHdpbmRvdy5vbnNjcm9sbCA9IHdpbmRvd09uc2Nyb2xsO1xyXG5cdHdpbmRvdy5vbm1vdXNld2hlZWw9IGZ1bmN0aW9uKGUpe29ubW91c2V3aGVlbGZjKGUpO31cclxuXHQkKHdpbmRvdykucmVzaXplKGNoZWNrbW9iaWxlKTtcclxuXHQkKHdpbmRvdykubG9hZCh3aW5kb3dsb2FkKTtcclxuXHRmdW5jdGlvbiB3aW5kb3dsb2FkKCl7XHJcblx0XHRjaGVja21vYmlsZSgpO1xyXG5cdFx0Y3JlYXRlVmlkZW8oJ3BsYXllcl9sb29wJywnNzIydTlabWdWdEUnLHRydWUpO1xyXG5cdFx0Y3JlYXRlVmlkZW8oJ3BsYXllcicsJ01hQWo3N0J2QTJJJyxmYWxzZSk7XHRcdFxyXG5cdH1cclxuXHJcblx0Ly9FdmVudFxyXG5cdGZ1bmN0aW9uIG1lbnVhQ2xpY2soX28pe1xyXG5cdFx0c2hvd01lbnUoZmFsc2UpO1xyXG5cdFx0aWYob2JqLm1lbnVUaW1lb3V0KSBjbGVhclRpbWVvdXQob2JqLm1lbnVUaW1lb3V0KTtcclxuXHRcdG9iai5tZW51VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHRcdFx0b2JqLm5vd3BhZ2UgPSBfby5hdHRyKCdkYXRhLW51bScpO1xyXG5cdFx0XHRjaGVja25vd3BhZ2VzY3JvbGwoKTtcclxuXHRcdFx0JC5hZGRyZXNzLnZhbHVlKFwiL3BhZ2VcIitvYmoubm93cGFnZSk7XHJcblx0XHR9LG9iai5mYWRlc3BlZWQpO1x0XHRcclxuXHR9XHJcblx0ZnVuY3Rpb24gc3RhcnRWaWRlbygpe1x0XHRcclxuXHRcdG9iai5wbGF5ZXJfbG9vcC5wYXVzZVZpZGVvKCk7XHJcblx0XHRvYmoucGxheWVyLnBsYXlWaWRlbygpO1x0XHRcclxuXHRcdCQoJyNwbGF5ZXJfbG9vcCcpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHQkKCcucGxheWVyX2N0cmwnKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcblx0XHQkKCcjcGxheWVyJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdH1cclxuXHRmdW5jdGlvbiBjcmVhdGVWaWRlbyhfbyxfaWQsX2F1dG9wbGF5KXtcclxuXHRcdHZhciBfb2JqO1x0XHRcclxuXHRcdHZhciBfY29uID0gMDtcclxuXHRcdGlmKG9iai5tb2JpbGUpe1xyXG5cdFx0XHRfY29uID0gMTtcclxuXHRcdFx0X2F1dG9wbGF5PWZhbHNlO1xyXG5cdFx0fVxyXG4gICAgICAgIF9vYmogPSBuZXcgWVQuUGxheWVyKF9vLCB7XHJcbiAgICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcclxuICAgICAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgICB2aWRlb0lkOiBfaWQsXHJcbiAgICAgICAgICBwbGF5ZXJWYXJzOntcclxuICAgICAgICAgICAgJ2NvbnRyb2xzJzpfY29uLFxyXG4gICAgICAgICAgICAnYXV0b3BsYXknOl9hdXRvcGxheSxcclxuICAgICAgICAgICAgJ2VuYWJsZWpzYXBpJzonMCcsXHJcbiAgICAgICAgICAgICdoZCc6JzEnLFxyXG4gICAgICAgICAgICAncmVsJzonMCcsXHJcbiAgICAgICAgICAgICdzaG93aW5mbyc6JzAnLFxyXG4gICAgICAgICAgICAnbW9kZXN0YnJhbmRpbmcnOicxJyxcclxuICAgICAgICAgICAgJ2NjX2xvYWRfcG9saWN5JzonMScsXHJcbiAgICAgICAgICAgICd3bW9kZSc6J3RyYW5zcGFyZW50JyAgICAgIFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGV2ZW50czoge1xyXG5cdCAgICAgICAgJ29uUmVhZHknOiB2aWRlb1JlYWR5LFxyXG5cdCAgICAgICAgJ29uU3RhdGVDaGFuZ2UnOiBvblBsYXllclN0YXRlQ2hhbmdlXHJcblx0ICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmKF9vID09ICdwbGF5ZXJfbG9vcCcpICBvYmoucGxheWVyX2xvb3AgPSBfb2JqO1xyXG5cdFx0ZWxzZSBpZihfbyA9PSAncGxheWVyJykgb2JqLnBsYXllciA9IF9vYmo7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiB2aWRlb1JlYWR5KGV2ZW50KXtcclxuICAgIFx0b2JqLnZpZGVvaGFzcmVhZHkrPTE7XHJcbiAgICBcdGlmKG9iai52aWRlb2hhc3JlYWR5ID49Mikgc2hvd0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gb25QbGF5ZXJTdGF0ZUNoYW5nZShldmVudCl7XHJcbiAgICBcdGlmKG9iai5tb2JpbGUpe1xyXG4gICAgXHRcdGlmKG9iai5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSA9PTEpe1xyXG4gICAgXHRcdFx0JCgnLnBsYXllcl9jdHJsJykuYWRkQ2xhc3MoJ29uJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuICAgIFx0XHR9ZWxzZSAkKCcucGxheWVyX2N0cmwnKS5yZW1vdmVDbGFzcygnb24nKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcbiAgICBcdH1cclxuICAgIFx0aWYoZXZlbnQuZGF0YSA9PSBZVC5QbGF5ZXJTdGF0ZS5FTkRFRCl7XHJcbiAgICBcdFx0aWYoZXZlbnQudGFyZ2V0LmEuaWQgPT0gJ3BsYXllcl9sb29wJykgb2JqLnBsYXllcl9sb29wLnBsYXlWaWRlbygpO1xyXG4gICAgXHRcdGVsc2UgaWYoZXZlbnQudGFyZ2V0LmEuaWQgPT0gJ3BsYXllcicpe1xyXG4gICAgXHRcdFx0b2JqLmhhc1dhdGNodmlkZW8gPSB0cnVlO1xyXG4gICAgXHRcdFx0JCgnLnBsYXllcl9jdHJsJykuYWRkQ2xhc3MoJ29uJyk7XHJcbiAgICBcdFx0XHRzY3JvbGxfYnRuY2xpY2soKTtcclxuICAgIFx0XHR9ICAgIFx0XHRcclxuICAgIFx0fVxyXG4gICAgXHRpZihvYmoucGxheWVyLmdldFBsYXllclN0YXRlKCkgPT0xKXtcclxuICAgIFx0XHRpZighJCgnLnBsYXlfYnRuJykuaGFzQ2xhc3MoJ29mZicpKSAkKCcucGxheV9idG4nKS5hZGRDbGFzcygnb2ZmJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTsgICAgXHRcdFxyXG4gICAgXHR9XHJcbiAgICBcdFxyXG4gICAgfVxyXG5cdGZ1bmN0aW9uIHNjcm9sbF9idG5jbGljaygpe1xyXG5cdFx0b2JqLm5vd3BhZ2UrPTE7XHJcblx0XHRjaGVja25vd3BhZ2VzY3JvbGwoKTtcclxuXHRcdCQuYWRkcmVzcy52YWx1ZShcIi9wYWdlXCIrb2JqLm5vd3BhZ2UpO1xyXG5cdH1cdFxyXG5cdGZ1bmN0aW9uIGJhbm5lcmZjKCl7XHJcblx0XHR2YXIgX2xpID0gJCh0aGlzKS5maW5kKCdsaScpLFxyXG5cdFx0XHRfbGVuZ3RoID0gX2xpLmxlbmd0aCxcclxuXHRcdFx0X25vdyA9IC0xLF9wcmUgPSAtMTtcclxuXHJcblx0XHRjaGFuZ2UoKTtcclxuXHRcdGZ1bmN0aW9uIGNoYW5nZSgpe1xyXG5cdFx0XHRfbm93Kz0xO1xyXG5cdFx0XHRpZihfbm93Pl9sZW5ndGgtMSlfbm93PTA7XHJcblx0XHRcdGlmKF9wcmUhPS0xKXtcclxuXHRcdFx0XHRfbGkuZXEoX3ByZSkuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0XHRfbGkuZXEoX25vdykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1x0XHRcdFx0XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBfbGkuZXEoX25vdykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRfcHJlID0gX25vdztcclxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe2NoYW5nZSgpO30sNTAwMCk7XHJcblx0XHR9XHJcblx0fVxyXG5cdGZ1bmN0aW9uIHNob3dNZW51KF90KXtcclxuXHRcdGlmKF90KXtcclxuXHRcdFx0JCgnLm1lbnVkb20nKS5hZGRDbGFzcygnb24nKTtcclxuXHRcdFx0JCgnLm1lbnUnKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0JCgnLm1lbnVkb20nKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdFx0JCgnLm1lbnUnKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0fVxyXG5cdGZ1bmN0aW9uIGFkZHJDaGFuZ2UoKXtcclxuICAgIFx0dmFyIHZhbHVlID0gJC5hZGRyZXNzLnZhbHVlKCk7XHJcblx0XHRzd2l0Y2godmFsdWUpIHtcclxuXHRcdFx0Y2FzZSAnLyc6XHJcblx0XHRcdFx0b2JqLm5vd3BhZ2UgPSAxO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnL3BhZ2UxJzpcdFx0XHRcdFxyXG5cdFx0XHRcdG9iai5ub3dwYWdlID0gMTtcclxuXHRcdFx0YnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJy9wYWdlMic6XHJcbiAgICAgICAgICAgICAgICBvYmoubm93cGFnZSA9IDI7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTMnOlxyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSAzO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnL3BhZ2U0JzpcclxuICAgICAgICAgICAgICAgIG9iai5ub3dwYWdlID0gNDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJy9wYWdlNSc6XHJcbiAgICAgICAgICAgICAgICBvYmoubm93cGFnZSA9IDU7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTYnOlxyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSA2O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnL3BhZ2U3JzpcclxuICAgICAgICAgICAgICAgIG9iai5ub3dwYWdlID0gNztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAvLyB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiL1wiO1xyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSAxO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHRcdH1cclxuXHRcdGNoZWNrbm93cGFnZSgpO1xyXG5cdFx0JCgnLnBhZ2VfYm94JykuYXR0cignY2xhc3MnLCdwYWdlX2JveCBwZycrb2JqLm5vd3BhZ2UpO1xyXG5cdFx0aWYob2JqLm1vYmlsZSkgJCgnaHRtbCxib2R5JykuYW5pbWF0ZSh7c2Nyb2xsVG9wOiQoJy5wYWdlJyArIG9iai5ub3dwYWdlKS5vZmZzZXQoKS50b3B9LG9iai5mYWRlc3BlZWQpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gb25tb3VzZXdoZWVsZmMoZSl7XHJcbiAgICBcdGlmKCFvYmoubW9iaWxlKXtcclxuICAgIFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGlmKG9iai5jYW53aGVlbCl7XHJcblx0XHRcdFx0b2JqLmNhbndoZWVsID0gZmFsc2U7XHJcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe29iai5jYW53aGVlbD10cnVlO30sb2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0aWYoZS53aGVlbERlbHRhPjApIG9iai5ub3dwYWdlLT0xO1xyXG5cdFx0XHRcdGVsc2Ugb2JqLm5vd3BhZ2UrPTE7XHJcblx0XHRcdFx0Y2hlY2tub3dwYWdlc2Nyb2xsKCk7XHJcblx0XHRcdFx0JC5hZGRyZXNzLnZhbHVlKFwiL3BhZ2VcIitvYmoubm93cGFnZSk7XHJcblx0XHRcdH1cclxuICAgIFx0fVxyXG5cdH1cclxuXHRmdW5jdGlvbiBjaGVja25vd3BhZ2VzY3JvbGwoKXtcclxuXHRcdGlmKG9iai5ub3dwYWdlPDEpIG9iai5ub3dwYWdlPTE7XHJcblx0XHRlbHNlIGlmKG9iai5ub3dwYWdlID49ICQoJy5wYWdlX2JveCAucGFnZScpLmxlbmd0aClvYmoubm93cGFnZSA9ICQoJy5wYWdlX2JveCAucGFnZScpLmxlbmd0aDtcclxuXHJcblx0XHQvL3Njcm9sbF9idG5cclxuXHRcdHZhciBfY2Fuc2hvdyA9IHRydWU7XHJcblx0XHRpZihvYmoubm93cGFnZSA9PSAkKCcucGFnZV9ib3ggLnBhZ2UnKS5sZW5ndGgpIF9jYW5zaG93ID0gZmFsc2U7XHJcblx0XHRlbHNle1xyXG5cdFx0XHQvL2hhc1dhdGNodmlkZW9cclxuXHRcdFx0aWYoIW9iai5oYXNXYXRjaHZpZGVvKXtcclxuXHRcdFx0XHRpZighb2JqLm1vYmlsZSl7XHJcblx0XHRcdFx0XHRpZihvYmoubm93cGFnZT49Myl7XHJcblx0XHRcdFx0XHRcdGlmKG9iai5ub3dwYWdlIT0zKSBhbGVydChvYmoud2FybmluZ3R4dCk7XHJcblx0XHRcdFx0XHRcdG9iai5ub3dwYWdlPTM7XHJcblx0XHRcdFx0XHRcdF9jYW5zaG93PWZhbHNlO1x0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0aWYoX2NhbnNob3cpe1xyXG5cdFx0XHRpZighJCgnLnNjcm9sbF9idG4nKS5oYXNDbGFzcygnb24nKSkgJCgnLnNjcm9sbF9idG4nKS5hZGRDbGFzcygnb24nKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcblx0XHR9ZWxzZSAkKCcuc2Nyb2xsX2J0bicpLnJlbW92ZUNsYXNzKCdvbicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0fVxyXG5cdGZ1bmN0aW9uIGNoZWNrbm93cGFnZSgpe1xyXG5cdFx0Ly9wYWdlQW5pXHJcblx0XHRpZihvYmoubm93cGFnZT09Mikgb2JqLnBhZ2UyVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXskKCcucGVyc29uX2FsbCcpLmFkZENsYXNzKCdvbicpO30sb2JqLmZhZGVzcGVlZCk7XHJcblx0XHRlbHNle1xyXG5cdFx0XHRjbGVhclRpbWVvdXQob2JqLnBhZ2UyVGltZW91dCk7XHJcblx0XHRcdCQoJy5wZXJzb25fYWxsJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHR9XHJcblx0XHRpZihvYmoubm93cGFnZT09NSkgb2JqLnBhZ2U1VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXskKCcuaWNvbl9hbGwnKS5hZGRDbGFzcygnb24nKTt9LG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0ZWxzZXtcclxuXHRcdFx0Y2xlYXJUaW1lb3V0KG9iai5wYWdlNVRpbWVvdXQpO1xyXG5cdFx0XHQkKCcuaWNvbl9hbGwnKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdH1cclxuXHJcblx0XHQvL2NoZWNrdmlkZW9cclxuXHRcdGlmKCQoJy5wbGF5X2J0bicpLmhhc0NsYXNzKCdvZmYnKSl7XHJcblx0XHRcdGlmKG9iai5ub3dwYWdlIT0zKXtcclxuXHRcdFx0XHR0cnl7XHJcblx0XHRcdFx0XHRpZihvYmoucGxheWVyLmdldFBsYXllclN0YXRlKCkgPT0xKSAkKCcucGxheWVyX2N0cmwnKS50cmlnZ2VyKFwiY2xpY2tcIik7XHJcblx0XHRcdFx0fWNhdGNoKGVycil7fVx0XHRcdFxyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHR0cnl7XHJcblx0XHRcdFx0XHRpZihvYmoucGxheWVyLmdldFBsYXllclN0YXRlKCkgIT01ICYmIG9iai5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSAhPTEpICQoJy5wbGF5ZXJfY3RybCcpLnRyaWdnZXIoXCJjbGlja1wiKTtcclxuXHRcdFx0XHR9Y2F0Y2goZXJyKXt9XHRcdFx0XHJcblx0XHRcdH1cclxuXHRcdH1cdFx0XHJcblx0fVxyXG4gIFx0ZnVuY3Rpb24gc2hvd0xvYWRpbmcoX3Qpe1xyXG4gIFx0XHRpZihfdCkgJCgnLmxvYWRpbmcnKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHJcbiAgXHRcdGVsc2UgJCgnLmxvYWRpbmcnKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG4gIFx0fVxyXG4gIFx0ZnVuY3Rpb24gd2luZG93T25zY3JvbGwoKXtcclxuICBcdFx0aWYob2JqLm1vYmlsZSl7XHJcbiAgXHRcdFx0aWYoJCgnLnNjcm9sbF9idG4nKS5oYXNDbGFzcygnb24nKSkgJCgnLnNjcm9sbF9idG4nKS5yZW1vdmVDbGFzcygnb24nKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpOyAgXHRcdFx0XHJcbiAgXHRcdH1cclxuICBcdH1cclxuICBcdGZ1bmN0aW9uIGNoZWNrbW9iaWxlKCl7XHJcbiAgXHRcdGlmKGRldmljZS5tb2JpbGUoKSkgb2JqLm1vYmlsZSA9IHRydWU7XHJcblx0XHRlbHNle1xyXG5cdFx0XHRpZigkKHdpbmRvdykud2lkdGgoKTw9MTAyNCkgb2JqLm1vYmlsZSA9IHRydWU7XHJcblx0XHRcdGVsc2Ugb2JqLm1vYmlsZSA9IGZhbHNlO1x0XHRcclxuXHRcdH1cclxuXHRcdC8vdmlkZW8gd2lkdGggaGVpZ2h0XHJcblx0XHRpZihvYmoubW9iaWxlKXtcclxuXHRcdFx0b2JqLnZpZGVvVyA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS53aWR0aCgpO1xyXG5cdFx0ICAgIG9iai52aWRlb0ggPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykuaGVpZ2h0KCk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0dmFyIF93ID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLndpZHRoKCkgLyAkKCcucGFnZV9ib3ggLnBhZ2UzJykuaGVpZ2h0KCk7XHJcblx0XHRcdHZhciBfdiA9IDY0MCAvIDM2MDtcclxuXHRcdFx0aWYoX3c+X3Ype1xyXG5cdFx0ICAgICAgICBvYmoudmlkZW9XID0gJCgnLnBhZ2VfYm94IC5wYWdlMycpLndpZHRoKCk7XHJcblx0XHQgICAgICAgIG9iai52aWRlb0ggPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykud2lkdGgoKSAvIF92O1xyXG5cdFx0ICAgIH1lbHNlIGlmKF93PF92KXtcclxuXHRcdCAgICBcdG9iai52aWRlb0ggPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykuaGVpZ2h0KCk7XHJcblx0XHQgICAgXHRvYmoudmlkZW9XID0gb2JqLnZpZGVvSCAqIF92O1xyXG5cdFx0ICAgIH1lbHNlIGlmKHdpbmRvd3NpemU9PXZpZGVvc2l6ZSl7XHJcblx0XHQgICAgICAgIG9iai52aWRlb1cgPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykud2lkdGgoKTtcclxuXHRcdCAgICAgICAgb2JqLnZpZGVvSCA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS5oZWlnaHQoKTtcclxuXHRcdCAgICB9XHRcdFx0XHJcblx0XHR9XHJcblx0XHQkKCcudmlkZW8nKS5jc3Moeyd3aWR0aCc6b2JqLnZpZGVvVywnaGVpZ2h0JzpvYmoudmlkZW9IfSk7XHJcblxyXG5cdFx0Ly9wYWdlIGV2ZW50XHJcblx0XHRpZihvYmoubW9iaWxlKXtcclxuXHRcdFx0JCgnLnBhZ2VfYm94IC5wYWdlMScpLmNzcygnaGVpZ2h0JywkKHdpbmRvdykuaGVpZ2h0KCkpO1xyXG5cdFx0XHQkKCcucGFnZV9ib3ggLnBhZ2UzJykuY3NzKCdoZWlnaHQnLCQod2luZG93KS5oZWlnaHQoKSk7XHJcblx0XHRcdHRyeXtcclxuXHRcdFx0XHRpZihvYmoucGxheWVyX2xvb3AuZ2V0UGxheWVyU3RhdGUoKSA9PTEpIG9iai5wbGF5ZXJfbG9vcC5wYXVzZVZpZGVvKCk7XHJcblx0XHRcdFx0aWYob2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpID09MSkgJCgnLnBsYXllcl9jdHJsJykuYWRkQ2xhc3MoJ29uJyk7XHJcblx0XHRcdFx0ZWxzZSAkKCcucGxheWVyX2N0cmwnKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdFx0fWNhdGNoKGVycil7fVx0XHRcdFxyXG5cdFx0XHQkKCdodG1sLGJvZHknKS5hbmltYXRlKHtzY3JvbGxUb3A6JCgnLnBhZ2UnICsgb2JqLm5vd3BhZ2UpLm9mZnNldCgpLnRvcH0sb2JqLmZhZGVzcGVlZCk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0JCgnLnBhZ2VfYm94IC5wYWdlMScpLmF0dHIoJ3N0eWxlJywnJyk7XHJcblx0XHRcdCQoJy5wYWdlX2JveCAucGFnZTMnKS5hdHRyKCdzdHlsZScsJycpO1xyXG5cdFx0XHR0cnl7XHJcblx0XHRcdFx0aWYoISQoJy5wbGF5X2J0bicpLmhhc0NsYXNzKCdvZmYnKSkgb2JqLnBsYXllcl9sb29wLnBsYXlWaWRlbygpO1xyXG5cdFx0XHRcdGVsc2V7XHJcblx0XHRcdFx0XHRvYmoucGxheWVyX2xvb3AucGF1c2VWaWRlbygpO1xyXG5cdFx0XHRcdFx0JCgnI3BsYXllcl9sb29wJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0XHRcdCQoJy5wbGF5X2J0bicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKG9iai5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSA9PTEpe1x0XHRcdFx0XHRcclxuXHRcdFx0XHRcdCQoJyNwbGF5ZXJfbG9vcCcpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0XHQkKCcucGxheWVyX2N0cmwnKS5yZW1vdmVDbGFzcygnb24nKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHRcdFx0XHRcdFxyXG5cdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0aWYoISQoJy5wbGF5X2J0bicpLmhhc0NsYXNzKCdvZmYnKSkgJCgnLnBsYXllcl9jdHJsJykucmVtb3ZlQ2xhc3MoJ29uJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0XHRcdGVsc2UgJCgnLnBsYXllcl9jdHJsJykuYWRkQ2xhc3MoJ29uJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fWNhdGNoKGVycil7fVx0XHRcdFxyXG5cdFx0XHRjaGVja25vd3BhZ2VzY3JvbGwoKTtcclxuXHRcdH1cclxuICBcdH1cclxufSkvL3JlYWR5IGVuZCAgXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==

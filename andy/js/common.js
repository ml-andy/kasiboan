$(document).ready(function(){function e(){y(),l("player_loop","722u9ZmgVtE",!0),l("player","MaAj77BvA2I",!1)}function a(e){s(!1),w.menuTimeout&&clearTimeout(w.menuTimeout),w.menuTimeout=setTimeout(function(){w.nowpage=e.attr("data-num"),g(),$.address.value("/page"+w.nowpage)},w.fadespeed)}function o(){w.player_loop.pauseVideo(),w.player.playVideo(),$("#player_loop").fadeOut(w.fadespeed),$(".player_ctrl").fadeIn(w.fadespeed),$("#player").fadeIn(w.fadespeed)}function l(e,a,o){var l,p=0;w.mobile&&(p=1,o=!1),l=new YT.Player(e,{height:"100%",width:"100%",videoId:a,playerVars:{controls:p,autoplay:o,enablejsapi:"0",hd:"1",rel:"0",showinfo:"0",modestbranding:"1",cc_load_policy:"1",wmode:"transparent"},events:{onReady:t,onStateChange:n}}),"player_loop"==e?w.player_loop=l:"player"==e&&(w.player=l)}function t(e){w.videohasready+=1,w.videohasready>=2&&f(!1)}function n(e){w.mobile&&(1==w.player.getPlayerState()?$(".player_ctrl").addClass("on").fadeOut(w.fadespeed):$(".player_ctrl").removeClass("on").fadeIn(w.fadespeed)),e.data==YT.PlayerState.ENDED&&("player_loop"==e.target.a.id?w.player_loop.playVideo():"player"==e.target.a.id&&(w.hasWatchvideo=!0,$(".player_ctrl").addClass("on"),p())),1==w.player.getPlayerState()&&($(".play_btn").hasClass("off")||$(".play_btn").addClass("off").fadeOut(w.fadespeed))}function p(){w.nowpage+=1,g(),$.address.value("/page"+w.nowpage)}function d(){function e(){l+=1,l>o-1&&(l=0),t!=-1?(a.eq(t).fadeOut(w.fadespeed),a.eq(l).fadeIn(w.fadespeed)):a.eq(l).fadeIn(w.fadespeed),t=l,setTimeout(function(){e()},5e3)}var a=$(this).find("li"),o=a.length,l=-1,t=-1;e()}function s(e){e?($(".menudom").addClass("on"),$(".menu").fadeIn(w.fadespeed)):($(".menudom").removeClass("on"),$(".menu").fadeOut(w.fadespeed))}function i(){var e=$.address.value();switch(e){case"/":w.nowpage=1;break;case"/page1":w.nowpage=1;break;case"/page2":w.nowpage=2;break;case"/page3":w.nowpage=3;break;case"/page4":w.nowpage=4;break;case"/page5":w.nowpage=5;break;case"/page6":w.nowpage=6;break;case"/page7":w.nowpage=7;break;default:w.nowpage=1}c(),$(".page_box").attr("class","page_box pg"+w.nowpage),w.mobile&&$("html,body").animate({scrollTop:$(".page"+w.nowpage).offset().top},w.fadespeed)}function r(e){w.mobile||(e.preventDefault(),w.canwheel&&(w.canwheel=!1,setTimeout(function(){w.canwheel=!0},w.fadespeed),e.wheelDelta>0?w.nowpage-=1:w.nowpage+=1,g(),$.address.value("/page"+w.nowpage)))}function g(){w.nowpage<1?w.nowpage=1:w.nowpage>=$(".page_box .page").length&&(w.nowpage=$(".page_box .page").length);var e=!0;w.nowpage==$(".page_box .page").length?e=!1:w.hasWatchvideo||w.mobile||w.nowpage>=3&&(3!=w.nowpage&&alert(w.warningtxt),w.nowpage=3,e=!1),e?$(".scroll_btn").hasClass("on")||$(".scroll_btn").addClass("on").fadeIn(w.fadespeed):$(".scroll_btn").removeClass("on").fadeOut(w.fadespeed)}function c(){if(2==w.nowpage?w.page2Timeout=setTimeout(function(){$(".person_all").addClass("on")},w.fadespeed):(clearTimeout(w.page2Timeout),$(".person_all").removeClass("on")),5==w.nowpage?w.page5Timeout=setTimeout(function(){$(".icon_all").addClass("on")},w.fadespeed):(clearTimeout(w.page5Timeout),$(".icon_all").removeClass("on")),$(".play_btn").hasClass("off"))if(3!=w.nowpage)try{1==w.player.getPlayerState()&&$(".player_ctrl").trigger("click")}catch(e){}else try{5!=w.player.getPlayerState()&&1!=w.player.getPlayerState()&&$(".player_ctrl").trigger("click")}catch(e){}}function f(e){e?$(".loading").fadeIn(w.fadespeed):$(".loading").fadeOut(w.fadespeed)}function u(){w.mobile&&$(".scroll_btn").hasClass("on")&&$(".scroll_btn").removeClass("on").fadeOut(w.fadespeed)}function y(){if(device.mobile()?w.mobile=!0:$(window).width()<=1024?w.mobile=!0:w.mobile=!1,w.mobile)w.videoW="100%",w.videoH="100%";else{var e=$(".page_box .page3").width()/$(".page_box .page3").height(),a=640/360;e>a?(w.videoW=$(".page_box .page3").width(),w.videoH=$(".page_box .page3").width()/a):e<a?(w.videoH=$(".page_box .page3").height(),w.videoW=w.videoH*a):windowsize==videosize&&(w.videoW="100%",w.videoH="100%")}if($(".video").css({width:w.videoW,height:w.videoH}),w.mobile){$(".page_box .page1").css("height",$(window).height()),$(".page_box .page3").css("height",$(window).height());try{1==w.player_loop.getPlayerState()&&w.player_loop.pauseVideo(),1==w.player.getPlayerState()?$(".player_ctrl").addClass("on"):$(".player_ctrl").removeClass("on")}catch(o){}$("html,body").animate({scrollTop:$(".page"+w.nowpage).offset().top},w.fadespeed)}else{$(".page_box .page1").attr("style",""),$(".page_box .page3").attr("style","");try{$(".play_btn").hasClass("off")?(w.player_loop.pauseVideo(),$("#player_loop").fadeOut(w.fadespeed),$(".play_btn").fadeOut(w.fadespeed)):w.player_loop.playVideo(),1==w.player.getPlayerState()?($("#player_loop").fadeOut(w.fadespeed),$(".player_ctrl").removeClass("on").fadeIn(w.fadespeed)):$(".play_btn").hasClass("off")?$(".player_ctrl").addClass("on").fadeIn(w.fadespeed):$(".player_ctrl").removeClass("on").fadeOut(w.fadespeed)}catch(o){}g()}}var w={wrp:$(".wrapper"),fadespeed:500,canwheel:!0,hasWatchvideo:!1,videohasready:0,videoW:$(window).width(),videoH:$(window).height(),warningtxt:"請先欣賞完景點影片，即可往下繼續瀏覽。",nowpage:1};$(".menua").click(function(){a($(this))}),$(".player_ctrl").click(function(){$(this).hasClass("on")?($(this).removeClass("on"),w.player.playVideo()):($(this).addClass("on"),w.player.pauseVideo())}),$(".play_btn").click(function(){o()}),$(".scroll_btn").click(function(){p()}),$(".page1 .bg").each(d),$(".menubtn").click(function(){s($(this).hasClass("on")?!1:!0)}),$.address.change(i),window.onscroll=u,window.onmousewheel=function(e){r(e)},$(window).resize(y),$(window).load(e)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIndpbmRvd2xvYWQiLCJjaGVja21vYmlsZSIsImNyZWF0ZVZpZGVvIiwibWVudWFDbGljayIsIl9vIiwic2hvd01lbnUiLCJvYmoiLCJtZW51VGltZW91dCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJub3dwYWdlIiwiYXR0ciIsImNoZWNrbm93cGFnZXNjcm9sbCIsImFkZHJlc3MiLCJ2YWx1ZSIsImZhZGVzcGVlZCIsInN0YXJ0VmlkZW8iLCJwbGF5ZXJfbG9vcCIsInBhdXNlVmlkZW8iLCJwbGF5ZXIiLCJwbGF5VmlkZW8iLCJmYWRlT3V0IiwiZmFkZUluIiwiX2lkIiwiX2F1dG9wbGF5IiwiX29iaiIsIl9jb24iLCJtb2JpbGUiLCJZVCIsIlBsYXllciIsImhlaWdodCIsIndpZHRoIiwidmlkZW9JZCIsInBsYXllclZhcnMiLCJjb250cm9scyIsImF1dG9wbGF5IiwiZW5hYmxlanNhcGkiLCJoZCIsInJlbCIsInNob3dpbmZvIiwibW9kZXN0YnJhbmRpbmciLCJjY19sb2FkX3BvbGljeSIsIndtb2RlIiwiZXZlbnRzIiwib25SZWFkeSIsInZpZGVvUmVhZHkiLCJvblN0YXRlQ2hhbmdlIiwib25QbGF5ZXJTdGF0ZUNoYW5nZSIsImV2ZW50IiwidmlkZW9oYXNyZWFkeSIsInNob3dMb2FkaW5nIiwiZ2V0UGxheWVyU3RhdGUiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiZGF0YSIsIlBsYXllclN0YXRlIiwiRU5ERUQiLCJ0YXJnZXQiLCJhIiwiaWQiLCJoYXNXYXRjaHZpZGVvIiwic2Nyb2xsX2J0bmNsaWNrIiwiaGFzQ2xhc3MiLCJiYW5uZXJmYyIsImNoYW5nZSIsIl9ub3ciLCJfbGVuZ3RoIiwiX3ByZSIsIl9saSIsImVxIiwidGhpcyIsImZpbmQiLCJsZW5ndGgiLCJfdCIsImFkZHJDaGFuZ2UiLCJjaGVja25vd3BhZ2UiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwidG9wIiwib25tb3VzZXdoZWVsZmMiLCJlIiwicHJldmVudERlZmF1bHQiLCJjYW53aGVlbCIsIndoZWVsRGVsdGEiLCJfY2Fuc2hvdyIsImFsZXJ0Iiwid2FybmluZ3R4dCIsInBhZ2UyVGltZW91dCIsInBhZ2U1VGltZW91dCIsInRyaWdnZXIiLCJlcnIiLCJ3aW5kb3dPbnNjcm9sbCIsImRldmljZSIsIndpbmRvdyIsInZpZGVvVyIsInZpZGVvSCIsIl93IiwiX3YiLCJ3aW5kb3dzaXplIiwidmlkZW9zaXplIiwiY3NzIiwid3JwIiwiY2xpY2siLCJlYWNoIiwib25zY3JvbGwiLCJvbm1vdXNld2hlZWwiLCJyZXNpemUiLCJsb2FkIl0sIm1hcHBpbmdzIjoiQUFBQUEsRUFBRUMsVUFBVUMsTUFBTSxXQXlDakIsUUFBU0MsS0FDUkMsSUFDQUMsRUFBWSxjQUFjLGVBQWMsR0FDeENBLEVBQVksU0FBUyxlQUFjLEdBSXBDLFFBQVNDLEdBQVdDLEdBQ25CQyxHQUFTLEdBQ05DLEVBQUlDLGFBQWFDLGFBQWFGLEVBQUlDLGFBQ3JDRCxFQUFJQyxZQUFjRSxXQUFXLFdBQzVCSCxFQUFJSSxRQUFVTixFQUFHTyxLQUFLLFlBQ3RCQyxJQUNBZixFQUFFZ0IsUUFBUUMsTUFBTSxRQUFRUixFQUFJSSxVQUMzQkosRUFBSVMsV0FFUCxRQUFTQyxLQUNSVixFQUFJVyxZQUFZQyxhQUNoQlosRUFBSWEsT0FBT0MsWUFDWHZCLEVBQUUsZ0JBQWdCd0IsUUFBUWYsRUFBSVMsV0FDOUJsQixFQUFFLGdCQUFnQnlCLE9BQU9oQixFQUFJUyxXQUM3QmxCLEVBQUUsV0FBV3lCLE9BQU9oQixFQUFJUyxXQUV6QixRQUFTYixHQUFZRSxFQUFHbUIsRUFBSUMsR0FDM0IsR0FBSUMsR0FDQUMsRUFBTyxDQUNScEIsR0FBSXFCLFNBQ05ELEVBQU8sRUFDUEYsR0FBVSxHQUVMQyxFQUFPLEdBQUlHLElBQUdDLE9BQU96QixHQUNuQjBCLE9BQVEsT0FDUkMsTUFBTyxPQUNQQyxRQUFTVCxFQUNUVSxZQUNF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QzFDekUsRUFBRSxnQkFBZ0IwRyxNQUFNLFdBQ3BCMUcsRUFBRXlFLE1BQU1SLFNBQVMsT0FDbkJqRSxFQUFFeUUsTUFBTWpCLFlBQVksTUFDcEIvQyxFQUFJYSxPQUFPQyxjQUdYdkIsRUFBRXlFLE1BQU1sQixTQUFTLE1BQ2pCOUMsRUFBSWEsT0FBT0QsZ0JBR2JyQixFQUFFLGFBQWEwRyxNQUFNLFdBQVd2RixNQUNoQ25CLEVBQUUsZUFBZTBHLE1BQU0sV0FBVzFDLE1BQ2xDaEUsRUFBRSxjQUFjMkcsS0FBS3pDLEdBQ3JCbEUsRUFBRSxZQUFZMEcsTUFBTSxXQUNPbEcsRUFBdkJSLEVBQUV5RSxNQUFNUixTQUFTLE9BQWUsR0FDckIsS0FFZmpFLEVBQUVnQixRQUFRbUQsT0FBT1UsR0FDakJvQixPQUFPVyxTQUFXYixFQUNsQkUsT0FBT1ksYUFBYyxTQUFTekIsR0FBR0QsRUFBZUMsSUFDaERwRixFQUFFaUcsUUFBUWEsT0FBTzFHLEdBQ2pCSixFQUFFaUcsUUFBUWMsS0FBSzVHIiwiZmlsZSI6ImNvbW1vbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcblx0dmFyIG9iaiA9e1xyXG5cdFx0d3JwOiAkKCcud3JhcHBlcicpLFxyXG5cdFx0ZmFkZXNwZWVkOiA1MDAsXHJcblx0XHRjYW53aGVlbDogdHJ1ZSxcclxuXHRcdGhhc1dhdGNodmlkZW86IGZhbHNlLFxyXG5cdFx0dmlkZW9oYXNyZWFkeTogMCxcclxuXHRcdHZpZGVvVzogJCh3aW5kb3cpLndpZHRoKCksXHJcblx0XHR2aWRlb0g6ICQod2luZG93KS5oZWlnaHQoKSxcclxuXHRcdHdhcm5pbmd0eHQ6ICfoq4vlhYjmrKPos57lrozmma/pu57lvbHniYfvvIzljbPlj6/lvoDkuIvnubznuozngI/opr3jgIInLFxyXG5cdFx0bm93cGFnZTogMVxyXG5cdH07XHRcclxuXHJcblx0Ly9Jbml0XHJcblx0Ly8gY2hlY2ttb2JpbGUoKTtcclxuXHRcclxuXHJcblx0Ly9BZGRMaXN0ZW5lclxyXG5cdCQoJy5tZW51YScpLmNsaWNrKGZ1bmN0aW9uKCl7bWVudWFDbGljaygkKHRoaXMpKTt9KTtcclxuXHQkKCcucGxheWVyX2N0cmwnKS5jbGljayhmdW5jdGlvbigpe1xyXG5cdFx0aWYoJCh0aGlzKS5oYXNDbGFzcygnb24nKSl7XHJcblx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHRcdG9iai5wbGF5ZXIucGxheVZpZGVvKCk7XHJcblx0XHR9XHJcblx0XHRlbHNle1xyXG5cdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdvbicpO1xyXG5cdFx0XHRvYmoucGxheWVyLnBhdXNlVmlkZW8oKTtcdFxyXG5cdFx0fVxyXG5cdH0pXHJcblx0JCgnLnBsYXlfYnRuJykuY2xpY2soZnVuY3Rpb24oKXtzdGFydFZpZGVvKCk7fSk7XHJcblx0JCgnLnNjcm9sbF9idG4nKS5jbGljayhmdW5jdGlvbigpe3Njcm9sbF9idG5jbGljaygpO30pO1xyXG5cdCQoJy5wYWdlMSAuYmcnKS5lYWNoKGJhbm5lcmZjKTtcclxuXHQkKCcubWVudWJ0bicpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcblx0XHRpZigkKHRoaXMpLmhhc0NsYXNzKCdvbicpKXNob3dNZW51KGZhbHNlKTtcclxuXHRcdGVsc2Ugc2hvd01lbnUodHJ1ZSk7XHJcblx0fSk7XHJcblx0JC5hZGRyZXNzLmNoYW5nZShhZGRyQ2hhbmdlKTtcclxuXHR3aW5kb3cub25zY3JvbGwgPSB3aW5kb3dPbnNjcm9sbDtcclxuXHR3aW5kb3cub25tb3VzZXdoZWVsPSBmdW5jdGlvbihlKXtvbm1vdXNld2hlZWxmYyhlKTt9XHJcblx0JCh3aW5kb3cpLnJlc2l6ZShjaGVja21vYmlsZSk7XHJcblx0JCh3aW5kb3cpLmxvYWQod2luZG93bG9hZCk7XHJcblx0ZnVuY3Rpb24gd2luZG93bG9hZCgpe1xyXG5cdFx0Y2hlY2ttb2JpbGUoKTtcclxuXHRcdGNyZWF0ZVZpZGVvKCdwbGF5ZXJfbG9vcCcsJzcyMnU5Wm1nVnRFJyx0cnVlKTtcclxuXHRcdGNyZWF0ZVZpZGVvKCdwbGF5ZXInLCdNYUFqNzdCdkEySScsZmFsc2UpO1x0XHRcclxuXHR9XHJcblxyXG5cdC8vRXZlbnRcclxuXHRmdW5jdGlvbiBtZW51YUNsaWNrKF9vKXtcclxuXHRcdHNob3dNZW51KGZhbHNlKTtcclxuXHRcdGlmKG9iai5tZW51VGltZW91dCkgY2xlYXJUaW1lb3V0KG9iai5tZW51VGltZW91dCk7XHJcblx0XHRvYmoubWVudVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0XHRcdG9iai5ub3dwYWdlID0gX28uYXR0cignZGF0YS1udW0nKTtcclxuXHRcdFx0Y2hlY2tub3dwYWdlc2Nyb2xsKCk7XHJcblx0XHRcdCQuYWRkcmVzcy52YWx1ZShcIi9wYWdlXCIrb2JqLm5vd3BhZ2UpO1xyXG5cdFx0fSxvYmouZmFkZXNwZWVkKTtcdFx0XHJcblx0fVxyXG5cdGZ1bmN0aW9uIHN0YXJ0VmlkZW8oKXtcdFx0XHJcblx0XHRvYmoucGxheWVyX2xvb3AucGF1c2VWaWRlbygpO1xyXG5cdFx0b2JqLnBsYXllci5wbGF5VmlkZW8oKTtcdFx0XHJcblx0XHQkKCcjcGxheWVyX2xvb3AnKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0JCgnLnBsYXllcl9jdHJsJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0JCgnI3BsYXllcicpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuXHR9XHJcblx0ZnVuY3Rpb24gY3JlYXRlVmlkZW8oX28sX2lkLF9hdXRvcGxheSl7XHJcblx0XHR2YXIgX29iajtcdFx0XHJcblx0XHR2YXIgX2NvbiA9IDA7XHJcblx0XHRpZihvYmoubW9iaWxlKXtcclxuXHRcdFx0X2NvbiA9IDE7XHJcblx0XHRcdF9hdXRvcGxheT1mYWxzZTtcclxuXHRcdH1cclxuICAgICAgICBfb2JqID0gbmV3IFlULlBsYXllcihfbywge1xyXG4gICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXHJcbiAgICAgICAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAgICAgICAgdmlkZW9JZDogX2lkLFxyXG4gICAgICAgICAgcGxheWVyVmFyczp7XHJcbiAgICAgICAgICAgICdjb250cm9scyc6X2NvbixcclxuICAgICAgICAgICAgJ2F1dG9wbGF5JzpfYXV0b3BsYXksXHJcbiAgICAgICAgICAgICdlbmFibGVqc2FwaSc6JzAnLFxyXG4gICAgICAgICAgICAnaGQnOicxJyxcclxuICAgICAgICAgICAgJ3JlbCc6JzAnLFxyXG4gICAgICAgICAgICAnc2hvd2luZm8nOicwJyxcclxuICAgICAgICAgICAgJ21vZGVzdGJyYW5kaW5nJzonMScsXHJcbiAgICAgICAgICAgICdjY19sb2FkX3BvbGljeSc6JzEnLFxyXG4gICAgICAgICAgICAnd21vZGUnOid0cmFuc3BhcmVudCcgICAgICBcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBldmVudHM6IHtcclxuXHQgICAgICAgICdvblJlYWR5JzogdmlkZW9SZWFkeSxcclxuXHQgICAgICAgICdvblN0YXRlQ2hhbmdlJzogb25QbGF5ZXJTdGF0ZUNoYW5nZVxyXG5cdCAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZihfbyA9PSAncGxheWVyX2xvb3AnKSAgb2JqLnBsYXllcl9sb29wID0gX29iajtcclxuXHRcdGVsc2UgaWYoX28gPT0gJ3BsYXllcicpIG9iai5wbGF5ZXIgPSBfb2JqO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdmlkZW9SZWFkeShldmVudCl7XHJcbiAgICBcdG9iai52aWRlb2hhc3JlYWR5Kz0xO1xyXG4gICAgXHRpZihvYmoudmlkZW9oYXNyZWFkeSA+PTIpIHNob3dMb2FkaW5nKGZhbHNlKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG9uUGxheWVyU3RhdGVDaGFuZ2UoZXZlbnQpe1xyXG4gICAgXHRpZihvYmoubW9iaWxlKXtcclxuICAgIFx0XHRpZihvYmoucGxheWVyLmdldFBsYXllclN0YXRlKCkgPT0xKXtcclxuICAgIFx0XHRcdCQoJy5wbGF5ZXJfY3RybCcpLmFkZENsYXNzKCdvbicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcbiAgICBcdFx0fWVsc2UgJCgnLnBsYXllcl9jdHJsJykucmVtb3ZlQ2xhc3MoJ29uJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG4gICAgXHR9XHJcbiAgICBcdGlmKGV2ZW50LmRhdGEgPT0gWVQuUGxheWVyU3RhdGUuRU5ERUQpe1xyXG4gICAgXHRcdGlmKGV2ZW50LnRhcmdldC5hLmlkID09ICdwbGF5ZXJfbG9vcCcpIG9iai5wbGF5ZXJfbG9vcC5wbGF5VmlkZW8oKTtcclxuICAgIFx0XHRlbHNlIGlmKGV2ZW50LnRhcmdldC5hLmlkID09ICdwbGF5ZXInKXtcclxuICAgIFx0XHRcdG9iai5oYXNXYXRjaHZpZGVvID0gdHJ1ZTtcclxuICAgIFx0XHRcdCQoJy5wbGF5ZXJfY3RybCcpLmFkZENsYXNzKCdvbicpO1xyXG4gICAgXHRcdFx0c2Nyb2xsX2J0bmNsaWNrKCk7XHJcbiAgICBcdFx0fSAgICBcdFx0XHJcbiAgICBcdH1cclxuICAgIFx0aWYob2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpID09MSl7XHJcbiAgICBcdFx0aWYoISQoJy5wbGF5X2J0bicpLmhhc0NsYXNzKCdvZmYnKSkgJCgnLnBsYXlfYnRuJykuYWRkQ2xhc3MoJ29mZicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7ICAgIFx0XHRcclxuICAgIFx0fVxyXG4gICAgXHRcclxuICAgIH1cclxuXHRmdW5jdGlvbiBzY3JvbGxfYnRuY2xpY2soKXtcclxuXHRcdG9iai5ub3dwYWdlKz0xO1xyXG5cdFx0Y2hlY2tub3dwYWdlc2Nyb2xsKCk7XHJcblx0XHQkLmFkZHJlc3MudmFsdWUoXCIvcGFnZVwiK29iai5ub3dwYWdlKTtcclxuXHR9XHRcclxuXHRmdW5jdGlvbiBiYW5uZXJmYygpe1xyXG5cdFx0dmFyIF9saSA9ICQodGhpcykuZmluZCgnbGknKSxcclxuXHRcdFx0X2xlbmd0aCA9IF9saS5sZW5ndGgsXHJcblx0XHRcdF9ub3cgPSAtMSxfcHJlID0gLTE7XHJcblxyXG5cdFx0Y2hhbmdlKCk7XHJcblx0XHRmdW5jdGlvbiBjaGFuZ2UoKXtcclxuXHRcdFx0X25vdys9MTtcclxuXHRcdFx0aWYoX25vdz5fbGVuZ3RoLTEpX25vdz0wO1xyXG5cdFx0XHRpZihfcHJlIT0tMSl7XHJcblx0XHRcdFx0X2xpLmVxKF9wcmUpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0X2xpLmVxKF9ub3cpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgX2xpLmVxKF9ub3cpLmZhZGVJbihvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0X3ByZSA9IF9ub3c7XHJcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtjaGFuZ2UoKTt9LDUwMDApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRmdW5jdGlvbiBzaG93TWVudShfdCl7XHJcblx0XHRpZihfdCl7XHJcblx0XHRcdCQoJy5tZW51ZG9tJykuYWRkQ2xhc3MoJ29uJyk7XHJcblx0XHRcdCQoJy5tZW51JykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdCQoJy5tZW51ZG9tJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHRcdCQoJy5tZW51JykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdH1cclxuXHRmdW5jdGlvbiBhZGRyQ2hhbmdlKCl7XHJcbiAgICBcdHZhciB2YWx1ZSA9ICQuYWRkcmVzcy52YWx1ZSgpO1xyXG5cdFx0c3dpdGNoKHZhbHVlKSB7XHJcblx0XHRcdGNhc2UgJy8nOlxyXG5cdFx0XHRcdG9iai5ub3dwYWdlID0gMTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJy9wYWdlMSc6XHRcdFx0XHRcclxuXHRcdFx0XHRvYmoubm93cGFnZSA9IDE7XHJcblx0XHRcdGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTInOlxyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSAyO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnL3BhZ2UzJzpcclxuICAgICAgICAgICAgICAgIG9iai5ub3dwYWdlID0gMztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJy9wYWdlNCc6XHJcbiAgICAgICAgICAgICAgICBvYmoubm93cGFnZSA9IDQ7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTUnOlxyXG4gICAgICAgICAgICAgICAgb2JqLm5vd3BhZ2UgPSA1O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnL3BhZ2U2JzpcclxuICAgICAgICAgICAgICAgIG9iai5ub3dwYWdlID0gNjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJy9wYWdlNyc6XHJcbiAgICAgICAgICAgICAgICBvYmoubm93cGFnZSA9IDc7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgLy8gd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9cIjtcclxuICAgICAgICAgICAgICAgIG9iai5ub3dwYWdlID0gMTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcblx0XHR9XHJcblx0XHRjaGVja25vd3BhZ2UoKTtcclxuXHRcdCQoJy5wYWdlX2JveCcpLmF0dHIoJ2NsYXNzJywncGFnZV9ib3ggcGcnK29iai5ub3dwYWdlKTtcclxuXHRcdGlmKG9iai5tb2JpbGUpICQoJ2h0bWwsYm9keScpLmFuaW1hdGUoe3Njcm9sbFRvcDokKCcucGFnZScgKyBvYmoubm93cGFnZSkub2Zmc2V0KCkudG9wfSxvYmouZmFkZXNwZWVkKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG9ubW91c2V3aGVlbGZjKGUpe1xyXG4gICAgXHRpZighb2JqLm1vYmlsZSl7XHJcbiAgICBcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRpZihvYmouY2Fud2hlZWwpe1xyXG5cdFx0XHRcdG9iai5jYW53aGVlbCA9IGZhbHNlO1xyXG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtvYmouY2Fud2hlZWw9dHJ1ZTt9LG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRcdGlmKGUud2hlZWxEZWx0YT4wKSBvYmoubm93cGFnZS09MTtcclxuXHRcdFx0XHRlbHNlIG9iai5ub3dwYWdlKz0xO1xyXG5cdFx0XHRcdGNoZWNrbm93cGFnZXNjcm9sbCgpO1xyXG5cdFx0XHRcdCQuYWRkcmVzcy52YWx1ZShcIi9wYWdlXCIrb2JqLm5vd3BhZ2UpO1xyXG5cdFx0XHR9XHJcbiAgICBcdH1cclxuXHR9XHJcblx0ZnVuY3Rpb24gY2hlY2tub3dwYWdlc2Nyb2xsKCl7XHJcblx0XHRpZihvYmoubm93cGFnZTwxKSBvYmoubm93cGFnZT0xO1xyXG5cdFx0ZWxzZSBpZihvYmoubm93cGFnZSA+PSAkKCcucGFnZV9ib3ggLnBhZ2UnKS5sZW5ndGgpb2JqLm5vd3BhZ2UgPSAkKCcucGFnZV9ib3ggLnBhZ2UnKS5sZW5ndGg7XHJcblxyXG5cdFx0Ly9zY3JvbGxfYnRuXHJcblx0XHR2YXIgX2NhbnNob3cgPSB0cnVlO1xyXG5cdFx0aWYob2JqLm5vd3BhZ2UgPT0gJCgnLnBhZ2VfYm94IC5wYWdlJykubGVuZ3RoKSBfY2Fuc2hvdyA9IGZhbHNlO1xyXG5cdFx0ZWxzZXtcclxuXHRcdFx0Ly9oYXNXYXRjaHZpZGVvXHJcblx0XHRcdGlmKCFvYmouaGFzV2F0Y2h2aWRlbyl7XHJcblx0XHRcdFx0aWYoIW9iai5tb2JpbGUpe1xyXG5cdFx0XHRcdFx0aWYob2JqLm5vd3BhZ2U+PTMpe1xyXG5cdFx0XHRcdFx0XHRpZihvYmoubm93cGFnZSE9MykgYWxlcnQob2JqLndhcm5pbmd0eHQpO1xyXG5cdFx0XHRcdFx0XHRvYmoubm93cGFnZT0zO1xyXG5cdFx0XHRcdFx0XHRfY2Fuc2hvdz1mYWxzZTtcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGlmKF9jYW5zaG93KXtcclxuXHRcdFx0aWYoISQoJy5zY3JvbGxfYnRuJykuaGFzQ2xhc3MoJ29uJykpICQoJy5zY3JvbGxfYnRuJykuYWRkQ2xhc3MoJ29uJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0fWVsc2UgJCgnLnNjcm9sbF9idG4nKS5yZW1vdmVDbGFzcygnb24nKS5mYWRlT3V0KG9iai5mYWRlc3BlZWQpO1xyXG5cdH1cclxuXHRmdW5jdGlvbiBjaGVja25vd3BhZ2UoKXtcclxuXHRcdC8vcGFnZUFuaVxyXG5cdFx0aWYob2JqLm5vd3BhZ2U9PTIpIG9iai5wYWdlMlRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JCgnLnBlcnNvbl9hbGwnKS5hZGRDbGFzcygnb24nKTt9LG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0ZWxzZXtcclxuXHRcdFx0Y2xlYXJUaW1lb3V0KG9iai5wYWdlMlRpbWVvdXQpO1xyXG5cdFx0XHQkKCcucGVyc29uX2FsbCcpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG5cdFx0fVxyXG5cdFx0aWYob2JqLm5vd3BhZ2U9PTUpIG9iai5wYWdlNVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JCgnLmljb25fYWxsJykuYWRkQ2xhc3MoJ29uJyk7fSxvYmouZmFkZXNwZWVkKTtcclxuXHRcdGVsc2V7XHJcblx0XHRcdGNsZWFyVGltZW91dChvYmoucGFnZTVUaW1lb3V0KTtcclxuXHRcdFx0JCgnLmljb25fYWxsJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly9jaGVja3ZpZGVvXHJcblx0XHRpZigkKCcucGxheV9idG4nKS5oYXNDbGFzcygnb2ZmJykpe1xyXG5cdFx0XHRpZihvYmoubm93cGFnZSE9Myl7XHJcblx0XHRcdFx0dHJ5e1xyXG5cdFx0XHRcdFx0aWYob2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpID09MSkgJCgnLnBsYXllcl9jdHJsJykudHJpZ2dlcihcImNsaWNrXCIpO1xyXG5cdFx0XHRcdH1jYXRjaChlcnIpe31cdFx0XHRcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0dHJ5e1xyXG5cdFx0XHRcdFx0aWYob2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpICE9NSAmJiBvYmoucGxheWVyLmdldFBsYXllclN0YXRlKCkgIT0xKSAkKCcucGxheWVyX2N0cmwnKS50cmlnZ2VyKFwiY2xpY2tcIik7XHJcblx0XHRcdFx0fWNhdGNoKGVycil7fVx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHR9XHRcdFxyXG5cdH1cclxuICBcdGZ1bmN0aW9uIHNob3dMb2FkaW5nKF90KXtcclxuICBcdFx0aWYoX3QpICQoJy5sb2FkaW5nJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG4gIFx0XHRlbHNlICQoJy5sb2FkaW5nJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuICBcdH1cclxuICBcdGZ1bmN0aW9uIHdpbmRvd09uc2Nyb2xsKCl7XHJcbiAgXHRcdGlmKG9iai5tb2JpbGUpe1xyXG4gIFx0XHRcdGlmKCQoJy5zY3JvbGxfYnRuJykuaGFzQ2xhc3MoJ29uJykpICQoJy5zY3JvbGxfYnRuJykucmVtb3ZlQ2xhc3MoJ29uJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTsgIFx0XHRcdFxyXG4gIFx0XHR9XHJcbiAgXHR9XHJcbiAgXHRmdW5jdGlvbiBjaGVja21vYmlsZSgpe1xyXG4gIFx0XHRpZihkZXZpY2UubW9iaWxlKCkpIG9iai5tb2JpbGUgPSB0cnVlO1xyXG5cdFx0ZWxzZXtcclxuXHRcdFx0aWYoJCh3aW5kb3cpLndpZHRoKCk8PTEwMjQpIG9iai5tb2JpbGUgPSB0cnVlO1xyXG5cdFx0XHRlbHNlIG9iai5tb2JpbGUgPSBmYWxzZTtcdFx0XHJcblx0XHR9XHJcblx0XHQvL3ZpZGVvIHdpZHRoIGhlaWdodFxyXG5cdFx0aWYob2JqLm1vYmlsZSl7XHJcblx0XHRcdG9iai52aWRlb1c9XCIxMDAlXCI7XHJcblx0XHQgICAgb2JqLnZpZGVvSD1cIjEwMCVcIjtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHR2YXIgX3cgPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykud2lkdGgoKSAvICQoJy5wYWdlX2JveCAucGFnZTMnKS5oZWlnaHQoKTtcclxuXHRcdFx0dmFyIF92ID0gNjQwIC8gMzYwO1xyXG5cdFx0XHRpZihfdz5fdil7XHJcblx0XHQgICAgICAgIG9iai52aWRlb1cgPSAkKCcucGFnZV9ib3ggLnBhZ2UzJykud2lkdGgoKTtcclxuXHRcdCAgICAgICAgb2JqLnZpZGVvSCA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS53aWR0aCgpIC8gX3Y7XHJcblx0XHQgICAgfWVsc2UgaWYoX3c8X3Ype1xyXG5cdFx0ICAgIFx0b2JqLnZpZGVvSCA9ICQoJy5wYWdlX2JveCAucGFnZTMnKS5oZWlnaHQoKTtcclxuXHRcdCAgICBcdG9iai52aWRlb1cgPSBvYmoudmlkZW9IICogX3Y7XHJcblx0XHQgICAgfWVsc2UgaWYod2luZG93c2l6ZT09dmlkZW9zaXplKXtcclxuXHRcdCAgICAgICAgb2JqLnZpZGVvVz1cIjEwMCVcIjtcclxuXHRcdCAgICAgICAgb2JqLnZpZGVvSD1cIjEwMCVcIjtcclxuXHRcdCAgICB9XHRcdFx0XHJcblx0XHR9XHJcblx0XHQkKCcudmlkZW8nKS5jc3Moeyd3aWR0aCc6b2JqLnZpZGVvVywnaGVpZ2h0JzpvYmoudmlkZW9IfSk7XHJcblxyXG5cdFx0Ly9wYWdlIGV2ZW50XHJcblx0XHRpZihvYmoubW9iaWxlKXtcclxuXHRcdFx0JCgnLnBhZ2VfYm94IC5wYWdlMScpLmNzcygnaGVpZ2h0JywkKHdpbmRvdykuaGVpZ2h0KCkpO1xyXG5cdFx0XHQkKCcucGFnZV9ib3ggLnBhZ2UzJykuY3NzKCdoZWlnaHQnLCQod2luZG93KS5oZWlnaHQoKSk7XHJcblx0XHRcdHRyeXtcclxuXHRcdFx0XHRpZihvYmoucGxheWVyX2xvb3AuZ2V0UGxheWVyU3RhdGUoKSA9PTEpIG9iai5wbGF5ZXJfbG9vcC5wYXVzZVZpZGVvKCk7XHJcblx0XHRcdFx0aWYob2JqLnBsYXllci5nZXRQbGF5ZXJTdGF0ZSgpID09MSkgJCgnLnBsYXllcl9jdHJsJykuYWRkQ2xhc3MoJ29uJyk7XHJcblx0XHRcdFx0ZWxzZSAkKCcucGxheWVyX2N0cmwnKS5yZW1vdmVDbGFzcygnb24nKTtcclxuXHRcdFx0fWNhdGNoKGVycil7fVx0XHRcdFxyXG5cdFx0XHQkKCdodG1sLGJvZHknKS5hbmltYXRlKHtzY3JvbGxUb3A6JCgnLnBhZ2UnICsgb2JqLm5vd3BhZ2UpLm9mZnNldCgpLnRvcH0sb2JqLmZhZGVzcGVlZCk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0JCgnLnBhZ2VfYm94IC5wYWdlMScpLmF0dHIoJ3N0eWxlJywnJyk7XHJcblx0XHRcdCQoJy5wYWdlX2JveCAucGFnZTMnKS5hdHRyKCdzdHlsZScsJycpO1xyXG5cdFx0XHR0cnl7XHJcblx0XHRcdFx0aWYoISQoJy5wbGF5X2J0bicpLmhhc0NsYXNzKCdvZmYnKSkgb2JqLnBsYXllcl9sb29wLnBsYXlWaWRlbygpO1xyXG5cdFx0XHRcdGVsc2V7XHJcblx0XHRcdFx0XHRvYmoucGxheWVyX2xvb3AucGF1c2VWaWRlbygpO1xyXG5cdFx0XHRcdFx0JCgnI3BsYXllcl9sb29wJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0XHRcdCQoJy5wbGF5X2J0bicpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKG9iai5wbGF5ZXIuZ2V0UGxheWVyU3RhdGUoKSA9PTEpe1x0XHRcdFx0XHRcclxuXHRcdFx0XHRcdCQoJyNwbGF5ZXJfbG9vcCcpLmZhZGVPdXQob2JqLmZhZGVzcGVlZCk7XHJcblx0XHRcdFx0XHQkKCcucGxheWVyX2N0cmwnKS5yZW1vdmVDbGFzcygnb24nKS5mYWRlSW4ob2JqLmZhZGVzcGVlZCk7XHRcdFx0XHRcdFxyXG5cdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0aWYoISQoJy5wbGF5X2J0bicpLmhhc0NsYXNzKCdvZmYnKSkgJCgnLnBsYXllcl9jdHJsJykucmVtb3ZlQ2xhc3MoJ29uJykuZmFkZU91dChvYmouZmFkZXNwZWVkKTtcclxuXHRcdFx0XHRcdGVsc2UgJCgnLnBsYXllcl9jdHJsJykuYWRkQ2xhc3MoJ29uJykuZmFkZUluKG9iai5mYWRlc3BlZWQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fWNhdGNoKGVycil7fVx0XHRcdFxyXG5cdFx0XHRjaGVja25vd3BhZ2VzY3JvbGwoKTtcclxuXHRcdH1cclxuICBcdH1cclxufSkvL3JlYWR5IGVuZCAgXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
